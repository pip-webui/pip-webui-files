!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(t.pip||(t.pip={})).files=e()}}(function(){return function e(t,i,n){function o(r,a){if(!i[r]){if(!t[r]){var s="function"==typeof require&&require;if(!a&&s)return s(r,!0);if(l)return l(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var p=i[r]={exports:{}};t[r][0].call(p.exports,function(e){var i=t[r][1][e];return o(i?i:e)},p,p.exports,e,t,i,n)}return i[r].exports}for(var l="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e,t,i){!function(){"use strict";var e=angular.module("pipFiles.Translate",[]);e.filter("translate",["$injector",function(e){var t=e.has("pipTranslate")?e.get("pipTranslate"):null;return function(e){return t?t.translate(e)||e:e}}])}()},{}],2:[function(e,t,i){"use strict";var n=e("./select/FileSelectController"),o=e("./upload/FileUploadController"),l=e("./service/FileUploadService");!function(){function e(e){"ngInject";return{restrict:"A",link:function(t,i,n){var o=e(n.fileModel),l=o.assign;i.bind("change",function(){t.$apply(function(){l(t,i[0].files[0])})})}}}function t(){return{restrict:"E",replace:!0,scope:{localFile:"="},controller:n.FileSelectController,controllerAs:"vm",templateUrl:"select/FileSelect.html"}}function i(){return{restrict:"E",replace:!0,controller:o.FileUploadController,controllerAs:"vm",scope:{cancel:"=pipCancel",retry:"=pipRetry",name:"=pipName",state:"=pipState",type:"=?pipType",progress:"=pipProgress"},templateUrl:"upload/FileUpload.html"}}e.$inject=["$parse"],angular.module("pipFiles",[]).directive("fileModel",e).directive("pipFileSelect",t).directive("pipFileUpload",i).service("pipFileUpload",l.FileUploadService)}()},{"./select/FileSelectController":3,"./service/FileUploadService":4,"./upload/FileUploadController":5}],3:[function(e,t,i){"use strict";var n=function(){function e(e){"ngInject";this.localFile=e.localFile,e.$watch("vm.localFile",function(t){e.localFile=t})}return e.$inject=["$scope"],e.prototype.onUploadButtonClick=function(){$("#inp_file").click()},e.prototype.onDeleteButtonClick=function(){this.localFile=null;var e=document.getElementById("inp_form");e.reset()},e}();i.FileSelectController=n},{}],4:[function(e,t,i){"use strict";var n=function(){function e(){}return e}();n.All=["start","upload","fail"],n.Start="start",n.Upload="upload",n.Fail="fail",i.FileUploadState=n;var o=function(){function e(e,t){"ngInject";this.error=null,this._http=e,this.transaction=t.create("upload file")}return e.$inject=["$http","pipTransaction"],e.prototype.upload=function(e,t,i){var o=this,l=new FormData;l.append("file",t),this.progress=0,this.transaction.begin(n.Start),this.state=n.Start,this._http.post(e,l,{uploadEventHandlers:{progress:function(e){e.lengthComputable&&(o.progress=e.loaded/e.total*100)}},headers:{"Content-Type":void 0}}).success(function(e){o.state=n.Upload,o.transaction.end(n.Upload),i&&i(e,null)}).error(function(e){o.state=n.Fail,o.transaction.end(n.Fail),o.error=e.Error||e,i&&i(null,e)})},e.prototype.abort=function(){this.transaction.abort()},e}();i.FileUploadService=o},{}],5:[function(e,t,i){"use strict";var n=function(){function e(e,t){"ngInject";var i=this;this.type=e.type||"file",this._cancel=e.cancel,this._retry=e.retry,this.name=e.name,this.state=e.state,this.progress=e.progress,e.$watch("state",function(e){i.state=e}),e.$watch("progress",function(e){i.progress=e}),this._service=t}return e.$inject=["$scope","pipFileUpload"],e.prototype.errorFail=function(){return this._service.error},e.prototype.onCancel=function(){this._cancel&&this._cancel()},e.prototype.onRetry=function(){this._retry&&this._retry()},e.prototype.abort=function(){this._service.abort(),this._cancel&&this._cancel()},e}();i.FileUploadController=n},{}],6:[function(e,t,i){!function(e){try{e=angular.module("pipFiles.Templates")}catch(t){e=angular.module("pipFiles.Templates",[])}e.run(["$templateCache",function(e){e.put("select/FileSelect.html",'<div class="pip-file-select"><form id="inp_form" class="pip-hidden-form"><input type="file" file-model="vm.localFile" id="inp_file" ng-model="vm.localFile"></form><md-button class="md-raised md-accent pip-button" ng-click="vm.onUploadButtonClick()" ng-if="!vm.localFile">Choose File</md-button><div ng-if="vm.localFile.name" class="pip-file layout-row layout-align-start-center"><md-icon md-svg-icon="icons:document" class="pip-icon"></md-icon><div class="flex"><div class="text-body2 text-overflow">{{vm.localFile.name}}</div><div ng-if="vm.localFile.size" class="color-secondary-text">{{vm.localFile.size}}</div></div><md-button ng-click="vm.onDeleteButtonClick()" class="md-icon-button"><md-icon md-svg-icon="icons:cross-circle"></md-icon></md-button></div></div>')}])}(),function(e){try{e=angular.module("pipFiles.Templates")}catch(t){e=angular.module("pipFiles.Templates",[])}e.run(["$templateCache",function(e){e.put("upload/FileUpload.html",'<div class="pip-files pip-progress-files"><div class="pip-body pip-scroll pip-progress-body"><div class="layout-row"><div class="pip-progress-icon" ng-class="{\'color-badge-bg\': vm.state == \'fail\', \'bb-orange\': vm.state == \'start\', \'bb-green\': vm.state == \'upload\' }"><md-icon md-svg-icon="icons:check" ng-if="vm.state == \'upload\'"></md-icon><md-icon md-svg-icon="icons:play" ng-if="vm.state == \'start\'"></md-icon><md-icon md-svg-icon="icons:cross" ng-if="vm.state == \'fail\'"></md-icon></div><div class="pip-progress-content"><h3 class="pip-title" ng-if="vm.state == \'start\'">Uploading {{vm.type}}</h3><h3 class="pip-title" ng-if="vm.state == \'upload\'">Uploaded {{vm.type}} successfully!</h3><h3 class="pip-title" ng-if="vm.state == \'fail\'">Uploading {{vm.type}} failed with errors!</h3><div class="color-secondary-text pip-subtitle">{{vm.name}}</div><div class="color-error pip-error" ng-if="vm.state == \'fail\'">{{vm.errorFail()}}</div><div ng-if="vm.state == \'start\'"><md-progress-linear md-mode="determinate" class="md-accent" value="{{vm.progress}}" ng-if="vm.progress < 100"></md-progress-linear><md-progress-linear md-mode="indeterminate" class="md-accent" ng-if="vm.progress == 100"></md-progress-linear></div></div></div></div><div class="pip-footer layout-row layout-align-end-center"><div><md-button class="md-accent" ng-click="vm.onCancel()" ng-show="!vm.state || vm.state == \'fail\'">Cancel</md-button><md-button class="md-accent" ng-click="vm.onRetry()" ng-show="vm.state == \'fail\'">Retry</md-button><md-button class="md-accent" ng-click="vm.abort()" ng-show="vm.state == \'start\'">Abort</md-button></div></div></div>')}])}()},{}]},{},[6,1,2,3,4,5])(6)});
//# sourceMappingURL=pip-webui-files.min.js.map
