!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o;o="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(o.pip||(o.pip={})).files=e()}}(function(){return function e(o,t,r){function l(n,s){if(!t[n]){if(!o[n]){var c="function"==typeof require&&require;if(!s&&c)return c(n,!0);if(i)return i(n,!0);var a=new Error("Cannot find module '"+n+"'");throw a.code="MODULE_NOT_FOUND",a}var p=t[n]={exports:{}};o[n][0].call(p.exports,function(e){var t=o[n][1][e];return l(t?t:e)},p,p.exports,e,o,t,r)}return t[n].exports}for(var i="function"==typeof require&&require,n=0;n<r.length;n++)l(r[n]);return l}({1:[function(e,o,t){!function(){"use strict";var e=angular.module("pipFiles.Translate",[]);e.filter("translate",["$injector",function(e){var o=e.has("pipTranslate")?e.get("pipTranslate"):null;return function(e){return o?o.translate(e)||e:e}}])}()},{}],2:[function(e,o,t){"use strict";var r=e("./select/FileSelectController"),l=e("./progress/FileProgressController"),i=e("./service/FileUploadService");!function(){function e(e){"ngInject";return{restrict:"A",link:function(o,t,r){var l=e(r.fileModel),i=l.assign;t.bind("change",function(){o.$apply(function(){i(o,t[0].files[0])})})}}}function o(){return{restrict:"E",replace:!0,scope:{localFile:"="},controller:r.FileSelectController,controllerAs:"vm",templateUrl:"select/FileSelect.html"}}function t(){return{restrict:"E",replace:!0,controller:l.FileProgressController,controllerAs:"vm",scope:{cancel:"=pipCancel",retry:"=pipRetry",name:"=pipName",type:"=?pipType"},templateUrl:"progress/FileProgress.html"}}e.$inject=["$parse"],angular.module("pipFiles",[]).directive("fileModel",e).directive("pipFileSelect",o).directive("pipFileProgress",t).service("pipFileUpload",i.FileUploadService)}()},{"./progress/FileProgressController":3,"./select/FileSelectController":4,"./service/FileUploadService":5}],3:[function(e,o,t){"use strict";var r=function(){function e(e,o){"ngInject";this.type=e.type||"file",this._cancel=e.cancel,this._retry=e.retry,this.name=e.name,this._service=o}return e.$inject=["$scope","pipFileUpload"],e.prototype.globalProgress=function(){return this._service.globalProgress},e.prototype.errorFail=function(){return this._service.error},e.prototype.localProgress=function(){return this._service.progress},e.prototype.onCancel=function(){this._cancel&&this._cancel()},e.prototype.onRetry=function(){this._retry&&this._retry()},e.prototype.abort=function(){this._service.abort(),this._cancel&&this._cancel()},e}();t.FileProgressController=r},{}],4:[function(e,o,t){"use strict";var r=function(){function e(e){"ngInject";this.localFile=e.localFile,e.$watch("vm.localFile",function(o){e.localFile=o})}return e.$inject=["$scope"],e.prototype.onUploadButtonClick=function(){$("#inp_file").click()},e.prototype.onDeleteButtonClick=function(){this.localFile=null;var e=document.getElementById("inp_form");e.reset()},e}();t.FileSelectController=r},{}],5:[function(e,o,t){"use strict";var r=function(){function e(){}return e}();r.All=["start","upload","fail"],r.Start="start",r.Upload="upload",r.Fail="fail",t.GlobalProgress=r;var l=function(){function e(e,o){"ngInject";this.error=null,this._http=e,this.transaction=o.create("upload file")}return e.$inject=["$http","pipTransaction"],e.prototype.upload=function(e,o,t){var l=this,i=new FormData;i.append("file",o),this.progress=0,this.transaction.begin(r.Start),this.globalProgress=r.Start,this._http.post(e,i,{uploadEventHandlers:{progress:function(e){e.lengthComputable&&(l.progress=e.loaded/e.total*100)}},headers:{"Content-Type":void 0}}).success(function(e){l.globalProgress=r.Upload,l.transaction.end(r.Upload),t&&t(e,null)}).error(function(e){l.globalProgress=r.Fail,l.transaction.end(r.Fail),l.error=e.Error||e,t&&t(null,e)})},e.prototype.abort=function(){this.transaction.abort()},e}();t.FileUploadService=l},{}],6:[function(e,o,t){!function(e){try{e=angular.module("pipFiles.Templates")}catch(o){e=angular.module("pipFiles.Templates",[])}e.run(["$templateCache",function(e){e.put("progress/FileProgress.html",'<div class="pip-files pip-progress-files"><div class="pip-body pip-scroll pip-progress-body"><div class="layout-row"><div class="pip-progress-icon" ng-class="{\'color-badge-bg\': vm.globalProgress() == \'fail\', \'bb-orange\': vm.globalProgress() == \'start\', \'bb-green\': vm.globalProgress() == \'upload\' }"><md-icon md-svg-icon="icons:check" ng-if="vm.globalProgress() == \'upload\'"></md-icon><md-icon md-svg-icon="bootbarn-icons:play" ng-if="vm.globalProgress() == \'start\'"></md-icon><md-icon md-svg-icon="icons:cross" ng-if="vm.globalProgress() == \'fail\'"></md-icon></div><div class="pip-progress-content"><h3 class="pip-title" ng-if="vm.globalProgress() == \'start\'">Uploading {{vm.type}}</h3><h3 class="pip-title" ng-if="vm.globalProgress() == \'upload\'">Uploaded {{vm.type}} successfully!</h3><h3 class="pip-title" ng-if="vm.globalProgress() == \'fail\'">Uploading {{vm.type}} failed with errors!</h3><div class="color-secondary-text pip-subtitle">{{vm.name}}</div><div class="color-error pip-error" ng-if="vm.globalProgress() == \'fail\'">{{vm.errorFail()}}</div><div ng-if="vm.globalProgress() == \'start\'"><md-progress-linear md-mode="determinate" class="md-accent" value="{{vm.localProgress()}}" ng-if="vm.localProgress() < 100"></md-progress-linear><md-progress-linear md-mode="indeterminate" class="md-accent" ng-if="vm.localProgress() == 100"></md-progress-linear></div></div></div></div><div class="pip-footer layout-row layout-align-end-center"><div><md-button class="md-accent" ng-click="vm.onCancel()" ng-show="!vm.globalProgress() || vm.globalProgress() == \'fail\'">Cancel</md-button><md-button class="md-accent" ng-click="vm.onRetry()" ng-show="vm.globalProgress() == \'fail\'">Retry</md-button><md-button class="md-accent" ng-click="vm.abort()" ng-show="vm.globalProgress() == \'start\'">Abort</md-button></div></div></div>')}])}(),function(e){try{e=angular.module("pipFiles.Templates")}catch(o){e=angular.module("pipFiles.Templates",[])}e.run(["$templateCache",function(e){e.put("select/FileSelect.html",'<div class="pip-file-select"><form id="inp_form" class="pip-hidden-form"><input type="file" file-model="vm.localFile" id="inp_file" ng-model="vm.localFile"></form><md-button class="md-raised md-accent pip-button" ng-click="vm.onUploadButtonClick()" ng-if="!vm.localFile">Choose File</md-button><div ng-if="vm.localFile.name" class="pip-file layout-row layout-align-start-center"><md-icon md-svg-icon="icons:document" class="pip-icon"></md-icon><div class="flex"><div class="text-body2 text-overflow">{{vm.localFile.name}}</div><div ng-if="vm.localFile.size" class="color-secondary-text">{{vm.localFile.size}}</div></div><md-button ng-click="vm.onDeleteButtonClick()" class="md-icon-button"><md-icon md-svg-icon="icons:cross-circle"></md-icon></md-button></div></div>')}])}()},{}]},{},[6,1,2,3,4,5])(6)});
//# sourceMappingURL=pip-webui-files.min.js.map
