!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o;o="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(o.pip||(o.pip={})).files=e()}}(function(){return function e(o,r,t){function i(n,s){if(!r[n]){if(!o[n]){var a="function"==typeof require&&require;if(!s&&a)return a(n,!0);if(l)return l(n,!0);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}var p=r[n]={exports:{}};o[n][0].call(p.exports,function(e){var r=o[n][1][e];return i(r?r:e)},p,p.exports,e,o,r,t)}return r[n].exports}for(var l="function"==typeof require&&require,n=0;n<t.length;n++)i(t[n]);return i}({1:[function(e,o,r){!function(){"use strict";var e=angular.module("pipFiles.Translate",[]);e.filter("translate",["$injector",function(e){var o=e.has("pipTranslate")?e.get("pipTranslate"):null;return function(e){return o?o.translate(e)||e:e}}])}()},{}],2:[function(e,o,r){"use strict";var t=e("./upload/FileUploadController"),i=e("./progress/FileProgressController"),l=e("./service/FileUploadService");!function(){function e(e){"ngInject";return{restrict:"A",link:function(o,r,t){var i=e(t.fileModel),l=i.assign;r.bind("change",function(){o.$apply(function(){l(o,r[0].files[0])})})}}}function o(){return{restrict:"E",replace:!0,scope:{localFile:"="},controller:t.FileUploadController,controllerAs:"vm",templateUrl:"upload/FileUpload.html"}}function r(){return{restrict:"E",replace:!0,controller:i.FileProgressController,controllerAs:"vm",scope:{cancel:"=pipCancel",retry:"=pipRetry",name:"=pipName",type:"=?pipType"},templateUrl:"progress/FileProgress.html"}}e.$inject=["$parse"],angular.module("pipFiles",[]).directive("fileModel",e).directive("pipFileUpload",o).directive("pipFileProgress",r).service("pipFileUpload",l.FileUploadService)}()},{"./progress/FileProgressController":3,"./service/FileUploadService":5,"./upload/FileUploadController":6}],3:[function(e,o,r){"use strict";var t=function(){function e(e,o){"ngInject";this.type=e.type||"file",this._cancel=e.cancel,this._retry=e.retry,this._service=o,this.name=e.name}return e.$inject=["$scope","pipFileUpload"],e.prototype.globalProgress=function(){return this._service.globalProgress},e.prototype.errorFail=function(){return this._service.error},e.prototype.localProgress=function(){return this._service.progress},e.prototype.onCancel=function(){this._cancel&&this._cancel()},e.prototype.onRetry=function(){this._retry&&this._retry()},e.prototype.abort=function(){this._service.abort(),this._cancel&&this._cancel()},e}();r.FileProgressController=t},{}],4:[function(e,o,r){},{}],5:[function(e,o,r){"use strict";var t=function(){function e(e,o){"ngInject";this.error=null,this._http=e,this.transaction=o.create("upload file")}return e.$inject=["$http","pipTransaction"],e.prototype.upload=function(e,o,r){var t=this,i=new FormData;i.append("file",o),this.progress=0,this.transaction.begin("start"),this.globalProgress="start",this._http.post(e,i,{uploadEventHandlers:{progress:function(e){e.lengthComputable&&(t.progress=e.loaded/e.total*100)}},headers:{"Content-Type":void 0}}).success(function(e){t.globalProgress="upload",t.transaction.end("success"),r&&r(e,null)}).error(function(e){t.globalProgress="fail",t.transaction.end("error"),t.error=e.Error||e,r&&r(null,e)})},e.prototype.abort=function(){this.transaction.abort()},e}();r.FileUploadService=t},{}],6:[function(e,o,r){"use strict";var t=function(){function e(e){"ngInject";this.localFile=e.localFile,e.$watch("vm.localFile",function(o){e.localFile=o})}return e.$inject=["$scope"],e.prototype.onUploadButtonClick=function(){$("#inp_file").click()},e.prototype.onDeleteButtonClick=function(){this.localFile=null;var e=document.getElementById("inp_form");e.reset()},e}();r.FileUploadController=t},{}],7:[function(e,o,r){!function(e){try{e=angular.module("pipFiles.Templates")}catch(o){e=angular.module("pipFiles.Templates",[])}e.run(["$templateCache",function(e){e.put("progress/FileProgress.html",'<div><div class="pip-body pip-scroll" style="padding: 16px"><div class="layout-row"><div style="width: 30px; height: 30px; border-radius: 50%; margin-right: 16px" class="" ng-class="{\'color-badge-bg\': vm.globalProgress() == \'fail\', \'bb-orange\': vm.globalProgress() == \'start\', \'bb-green\': vm.globalProgress() == \'upload\' }"><md-icon md-svg-icon="icons:check" ng-if="vm.globalProgress() == \'upload\'" style="color: #fff !important; margin: 4px"></md-icon><md-icon md-svg-icon="bootbarn-icons:play" ng-if="vm.globalProgress() == \'start\'" style="color: #fff !important; margin: 4px"></md-icon><md-icon md-svg-icon="icons:cross" ng-if="vm.globalProgress() == \'fail\'" style="color: #fff !important; margin: 4px"></md-icon></div><div style="width: 100%"><h3 style="margin-top: 4px; margin-bottom: 8px" ng-if="vm.globalProgress() == \'start\'">Uploading {{vm.type}}</h3><h3 style="margin-top: 4px; margin-bottom: 8px" ng-if="vm.globalProgress() == \'upload\'">Uploaded {{vm.type}} successfully!</h3><h3 style="margin-top: 4px; margin-bottom: 8px" ng-if="vm.globalProgress() == \'fail\'">Uploading {{vm.type}} failed with errors!</h3><div class="color-secondary-text" style="word-break: break-word; margin-top: 0px; margin-bottom:8px">{{vm.name}}</div><div class="color-error" style="word-break: break-word; margin-top: 0px;" ng-if="vm.globalProgress() == \'fail\'">{{vm.errorFail()}}</div><div ng-if="vm.globalProgress() == \'start\'"><md-progress-linear md-mode="determinate" class="md-accent" value="{{vm.localProgress()}}" ng-if="vm.localProgress() < 100"></md-progress-linear><md-progress-linear md-mode="indeterminate" class="md-accent" ng-if="vm.localProgress() == 100"></md-progress-linear></div></div></div></div><div class="pip-footer"><div><md-button class="md-accent" ng-click="vm.onCancel()" ng-show="!vm.globalProgress() || vm.globalProgress() == \'fail\'">Cancel</md-button><md-button class="md-accent" ng-click="vm.onRetry()" ng-show="vm.globalProgress() == \'fail\'">Retry</md-button><md-button class="md-accent" ng-click="vm.abort()" ng-show="vm.globalProgress() == \'start\'">Abort</md-button></div></div></div>')}])}(),function(e){try{e=angular.module("pipFiles.Templates")}catch(o){e=angular.module("pipFiles.Templates",[])}e.run(["$templateCache",function(e){e.put("upload/FileUpload.html",'<div><form id="inp_form" style="display: none"><input type="file" file-model="vm.localFile" id="inp_file" ng-model="vm.localFile"></form><md-button class="md-raised md-accent" style="margin: 0; width: 100%" ng-click="vm.onUploadButtonClick()" ng-if="!vm.localFile">Choose File</md-button><div ng-if="vm.localFile.name" class="layout-row layout-align-start-center" style="height: 60px; border-radius: 2px; background-color: rgba(0, 0, 0, 0.08);"><md-icon md-svg-icon="icons:document" style="margin-right: 16px; margin-left: 12px;"></md-icon><div class="flex"><div class="text-body2 text-overflow">{{vm.localFile.name}}</div><div ng-if="vm.localFile.size" class="color-secondary-text">{{vm.localFile.size}}</div></div><md-button ng-click="vm.onDeleteButtonClick()" class="md-icon-button"><md-icon md-svg-icon="icons:cross-circle"></md-icon></md-button></div></div>')}])}()},{}]},{},[7,1,2,3,4,5,6])(7)});
//# sourceMappingURL=pip-webui-files.min.js.map
