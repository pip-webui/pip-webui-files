{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/common/ButtonsUpload.ts","src/dependencies/translate.ts","src/fail/FileFailController.ts","src/files.ts","src/select/FileSelectController.ts","src/service/FileUploadService.ts","src/start/FileStartController.ts","src/success/FileSuccessController.ts","src/success/index.ts","src/upload/FileUploadController.ts","src/upload/index.ts","temp/pip-webui-files-html.min.js"],"names":[],"mappings":"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","file":"pip-webui-files.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","export class ButtonsUpload {\r\n    public title: string;\r\n    public click: Function;\r\n}","/**\r\n * @file Optional filter to translate string resources\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global angular */\r\n\r\n(() => {\r\n    'use strict';\r\n    function filerTranslate($injector: angular.auto.IInjectorService) {\r\n        let pipTranslate: any = $injector.has('pipTranslate') \r\n            ? $injector.get('pipTranslate') : null;\r\n\r\n        return (key: string) => {\r\n            return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n        }\r\n    }\r\n\r\n    angular.module('pipFiles.Translate', [])\r\n        .filter('translate', filerTranslate);\r\n\r\n})();\r\n","\r\nimport {\r\n    ButtonsUpload\r\n} from \"../common/ButtonsUpload\";\r\n\r\nexport interface IFileFailController {\r\n    name: string;\r\n    type: string;\r\n    error: string;\r\n    buttons: ButtonsUpload[];\r\n}\r\n\r\nexport class FileFailController implements IFileFailController {\r\n    public name: string;\r\n    public type: string;\r\n    public error: string;\r\n    public buttons: ButtonsUpload[];\r\n\r\n    constructor($scope: ng.IScope) {\r\n        \"ngInject\";\r\n        \r\n        // Init parameters\r\n        this.type = $scope['type'] || 'file';\r\n        this.name = $scope['name'];\r\n        this.buttons = $scope['buttons'] || null;\r\n        this.error = $scope['error'] || null;\r\n        \r\n        $scope.$watch('error', (error: string) => {\r\n            this.error = error;\r\n        })\r\n      \r\n    }\r\n}","﻿\r\nimport {FileSelectController} from './select/FileSelectController';\r\nimport {FileFailController} from './fail/FileFailController';\r\nimport {FileUploadService} from './service/FileUploadService';\r\nimport {FileStartController} from './start/FileStartController';\r\n\r\nimport './success/index';\r\nimport './upload/index';\r\n\r\n(() => {\r\n    function fileModelDirective($parse: any) {\r\n        \"ngInject\";\r\n\r\n        return {\r\n            restrict: 'A',\r\n            link: (scope, element, attrs) => {\r\n                let model = $parse(attrs.fileModel);\r\n                let modelSetter = model.assign;\r\n                \r\n                element.bind('change', () => {\r\n                    scope.$apply(() => {\r\n                        modelSetter(scope, element[0].files[0]);\r\n                    });\r\n                });\r\n            }\r\n        };\r\n    }\r\n\r\n    function fileSelectDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            replace: true,\r\n            scope: {\r\n                localFile: '='\r\n            },\r\n            controller: FileSelectController,\r\n            controllerAs: 'vm',\r\n            templateUrl: 'select/FileSelect.html'\r\n        };\r\n    }\r\n     function fileFailDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            replace: true,\r\n            controller: FileFailController,\r\n            controllerAs: 'vm',\r\n            scope: {\r\n                buttons: '=?pipButtons',\r\n                name: '=pipName',\r\n                type: '=?pipType',\r\n                error: '=pipError'\r\n            },\r\n            templateUrl: 'fail/FileFail.html'\r\n        };\r\n    }\r\n\r\n    function fileStartDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            replace: true,\r\n            controller: FileStartController,\r\n            controllerAs: 'vm',\r\n            scope: {\r\n                buttons: '=?pipButtons',\r\n                name: '=pipName',\r\n                type: '=?pipType',\r\n                progress: '=pipProgress'\r\n            },\r\n            templateUrl: 'start/FileStart.html'\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipFiles', ['pipFiles.SuccessUpload', 'pipFiles.FileUpload'])\r\n        .directive('fileModel', fileModelDirective)\r\n        .directive('pipFileSelect', fileSelectDirective)\r\n        //.directive('pipFileUpload', fileUploadDirective)\r\n        //.component('pipSuccesUpload', fileSuccessDirective)\r\n        .directive('pipFailUpload', fileFailDirective)\r\n        .directive('pipStartUpload', fileStartDirective)\r\n        .service('pipFileUpload', FileUploadService);\r\n\r\n\r\n})();\r\n","export interface IFileSelectController {\r\n    localFile: any;\r\n    onUploadButtonClick(): void ;\r\n    onDeleteButtonClick(): void;\r\n}\r\n\r\nexport class FileSelectController implements IFileSelectController {\r\n    public localFile: any;\r\n    \r\n    constructor($scope: ng.IScope) {\r\n        \"ngInject\";\r\n        this.localFile = $scope['localFile'];\r\n        $scope.$watch('vm.localFile', (item) => {\r\n            $scope['localFile'] = item;\r\n        }) \r\n    }\r\n\r\n    public onUploadButtonClick(): void {\r\n        $('#inp_file').click();\r\n    }\r\n\r\n    public onDeleteButtonClick(): void {\r\n        this.localFile = null;\r\n        let forml = document.getElementById('inp_form');\r\n        (<any>forml).reset();\r\n\r\n    }\r\n}","export class FileUploadState {\r\n    public static All: string[] = ['start', 'upload', 'fail'];\r\n    public static Start: string = 'start';\r\n    public static Upload: string = 'upload';\r\n    public static Fail: string = 'fail';\r\n}\r\n\r\nexport interface IFileUploadService {\r\n    progress: number;\r\n    state: string;\r\n    error: string;\r\n    upload(url: string, file: any, transaction: any, callback?: (data: any, err: any) => void): void;\r\n}\r\n\r\nexport class FileUploadService implements IFileUploadService {\r\n    public progress: number;\r\n    public state: string;\r\n    public error: string = null;\r\n\r\n    public constructor( private $http: ng.IHttpService) {}\r\n\r\n    public upload(url: string, file: any, callback?: (data: any, err: any) => void): void {\r\n        \r\n        let fd: FormData = new FormData();\r\n        fd.append('file', file);\r\n        \r\n        this.progress = 0;\r\n        this.state = FileUploadState.Start;\r\n        this.$http.post(url, fd, <any>{\r\n            uploadEventHandlers: {\r\n                progress: (e: any) => {\r\n                    if (e.lengthComputable) {\r\n                        this.progress = (e.loaded / e.total) * 100;\r\n                    }\r\n                }\r\n            },\r\n            headers: { 'Content-Type': undefined }\r\n        })    \r\n        .success((response: any) => {\r\n            this.state = FileUploadState.Upload;\r\n\r\n            if (callback) callback(response, null);\r\n        })    \r\n        .error((response: any) => {\r\n            this.state = FileUploadState.Fail;\r\n            this.error = response.Error || response;\r\n\r\n            if (callback) callback(null, response);\r\n        });\r\n    }\r\n}","\r\nimport {\r\n    ButtonsUpload\r\n} from \"../common/ButtonsUpload\";\r\n\r\nexport interface IFileStartController {\r\n    name: string;\r\n    type: string;\r\n    progress: number;\r\n    buttons: ButtonsUpload[];\r\n}\r\n\r\nexport class FileStartController implements IFileStartController {\r\n    public name: string;\r\n    public progress: number;\r\n    public type: string;\r\n    public buttons: ButtonsUpload[];\r\n\r\n    constructor($scope: ng.IScope) {\r\n        \"ngInject\";\r\n        \r\n        // Init parameters\r\n        this.type = $scope['type'] || 'file';\r\n        this.name = $scope['name'];\r\n        this.buttons = $scope['buttons'] || null;\r\n        this.progress = $scope['progress'] || null;\r\n      \r\n        $scope.$watch('progress', (progress: number) => {\r\n            this.progress = progress;\r\n        })\r\n    }\r\n}","\r\nimport {\r\n    ButtonsUpload\r\n} from \"../common/ButtonsUpload\";\r\n\r\nimport { IFileSuccessBindings} from './index';\r\n\r\nexport interface IFileSuccessController {\r\n    name: string;\r\n    type: string;\r\n    buttons: ButtonsUpload[];\r\n}\r\n\r\nexport class FileSuccessController implements IFileSuccessController, IFileSuccessBindings {\r\n    public name: string;\r\n    public type: string = 'file';\r\n    public buttons: ButtonsUpload[];\r\n\r\n    constructor() {}\r\n\r\n    public $onChanges(changes) {}\r\n}","\r\nimport {FileSuccessController} from './FileSuccessController';\r\n\r\nexport interface IFileSuccessBindings {\r\n    [key: string]: any;\r\n\r\n    type: any\r\n    buttons: any,\r\n    name: any\r\n}\r\n\r\nconst FileSuccessBindings: IFileSuccessBindings = {\r\n    buttons: '=?pipButtons',\r\n    name: '=pipName',\r\n    type: '=?pipType',\r\n};\r\n\r\n(() => {\r\n \r\n     const fileSuccessDirective = {\r\n            restrict: 'E',\r\n            replace: true,\r\n            controller: FileSuccessController,\r\n            controllerAs: 'vm',\r\n            bindings: FileSuccessBindings,\r\n            templateUrl: 'success/FileSuccess.html'\r\n    }\r\n\r\n\r\n    angular\r\n        .module('pipFiles.SuccessUpload', [])\r\n        .component('pipSuccesUpload', fileSuccessDirective)\r\n\r\n\r\n})();\r\n","\r\nimport {\r\n    IFileUploadService\r\n} from \"../service/FileUploadService\";\r\n\r\nimport {\r\n    ButtonsUpload\r\n} from \"../common/ButtonsUpload\";\r\n\r\nexport interface IFileUploadController {\r\n    name: string;\r\n    type: string;\r\n    state: string;\r\n    progress: number;\r\n    onCancel(): void;\r\n    onRetry(): void;\r\n    onAbort(): void;\r\n}\r\n\r\nexport class FileUploadButtons {\r\n    retry: Function;\r\n    cancel: Function;\r\n    abort: Function;\r\n}\r\n\r\nexport class FileUploadController implements IFileUploadController {\r\n    //private _buttonFunction: FileUploadButtons;\r\n    private _functions: FileUploadButtons;\r\n    public uploadButtons: ButtonsUpload[];\r\n    public failButtons: ButtonsUpload[];\r\n    public startButtons: ButtonsUpload[];\r\n\r\n    public name: string;\r\n    public type: string;\r\n    public state: string;\r\n    public progress: number;\r\n    public buttons: boolean;\r\n    public error: string = null;\r\n\r\n    constructor(\r\n        $scope: ng.IScope\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._functions = $scope['buttonFunction'];\r\n        \r\n        // Init parameters\r\n        if (this._functions) {\r\n            this.uploadButtons = [];\r\n            this.failButtons = [\r\n                {title: 'Cancel', click: () => { this.onCancel()}},\r\n                {title: 'Retry', click: () => { this.onRetry()}}\r\n            ];\r\n            this.startButtons = [\r\n                {title: 'Abort', click: () => { this.onAbort() }}\r\n            ];\r\n        }\r\n        this.buttons = $scope['buttons'] || false;\r\n        this.type = $scope['type'] || 'file';\r\n        this.name = $scope['name'];\r\n        this.state = $scope['state'];\r\n        this.error = $scope['error'];\r\n        this.progress = $scope['progress'];\r\n\r\n        $scope.$watch('state', (state: string) => {\r\n            this.state = state;\r\n        })\r\n\r\n        $scope.$watch('error', (error: string) => {\r\n            this.error = error;\r\n        })\r\n\r\n        $scope.$watch('progress', (progress: number) => {\r\n            this.progress = progress;\r\n        })\r\n    }\r\n\r\n    public onCancel(): void {\r\n        if (this._functions.cancel) this._functions.cancel();\r\n    }\r\n\r\n    public onRetry(): void {\r\n        if (this._functions.retry) this._functions.retry();\r\n    }\r\n\r\n    public onAbort() {\r\n        if (this._functions.abort) this._functions.abort();\r\n    }\r\n\r\n}","\r\nimport {FileUploadController} from './FileUploadController';\r\n\r\n(() => {\r\n    \r\n     function fileUploadDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            replace: true,\r\n            controller: FileUploadController,\r\n            controllerAs: 'vm',\r\n            scope: {\r\n                buttonFunction: '=?pipButtonFunctions',\r\n                buttons: '=?pipButtons',\r\n                error: '=?pipError',\r\n                name: '=pipName',\r\n                state: '=pipState',\r\n                type: '=?pipType',\r\n                progress: '=pipProgress'\r\n            },\r\n            templateUrl: 'upload/FileUpload.html'\r\n        };\r\n  \r\n    }\r\n\r\n    angular\r\n        .module('pipFiles.FileUpload', [])\r\n        .directive('pipFileUpload', fileUploadDirective)\r\n       \r\n})();\r\n","(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('fail/FileFail.html',\n    '<div class=\"pip-files pip-progress-files\"><div class=\"pip-body pip-scroll pip-progress-body\"><div class=\"layout-row\"><div class=\"pip-progress-icon color-badge-bg\"><md-icon md-svg-icon=\"icons:cross\"></md-icon></div><div class=\"pip-progress-content\"><h3 class=\"pip-title\">Uploading {{vm.type}} failed with errors!</h3><div class=\"color-secondary-text pip-subtitle\">{{vm.name}}</div><div class=\"color-error pip-error\">{{vm.error}}</div></div></div></div><div class=\"pip-footer layout-row layout-align-end-center\" ng-if=\"vm.buttons && vm.buttons.length > 0\"><div><md-button class=\"md-accent\" ng-repeat=\"fail in vm.buttons\" ng-click=\"fail.click()\">{{::fail.title}}</md-button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('select/FileSelect.html',\n    '<div class=\"pip-file-select\"><form id=\"inp_form\" class=\"pip-hidden-form\"><input type=\"file\" file-model=\"vm.localFile\" id=\"inp_file\" ng-model=\"vm.localFile\"></form><md-button class=\"md-raised md-accent pip-button\" ng-click=\"vm.onUploadButtonClick()\" ng-if=\"!vm.localFile\">Choose File</md-button><div ng-if=\"vm.localFile.name\" class=\"pip-file layout-row layout-align-start-center\"><md-icon md-svg-icon=\"icons:document\" class=\"pip-icon\"></md-icon><div class=\"flex\"><div class=\"text-body2 text-overflow\">{{vm.localFile.name}}</div><div ng-if=\"vm.localFile.size\" class=\"color-secondary-text\">{{vm.localFile.size}}</div></div><md-button ng-click=\"vm.onDeleteButtonClick()\" class=\"md-icon-button\"><md-icon md-svg-icon=\"icons:cross-circle\"></md-icon></md-button></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('start/FileStart.html',\n    '<div class=\"pip-files pip-progress-files\"><div class=\"pip-body pip-scroll pip-progress-body\"><div class=\"layout-row\"><div class=\"pip-progress-icon bb-orange\"><md-icon md-svg-icon=\"icons:play\"></md-icon></div><div class=\"pip-progress-content\"><h3 class=\"pip-title\">Uploading {{::vm.type}}</h3><div class=\"color-secondary-text pip-subtitle\">{{vm.name}}</div><div><md-progress-linear md-mode=\"determinate\" class=\"md-accent\" value=\"{{vm.progress}}\" ng-if=\"vm.progress < 100\"></md-progress-linear><md-progress-linear md-mode=\"indeterminate\" class=\"md-accent\" ng-if=\"vm.progress == 100\"></md-progress-linear></div></div></div></div><div class=\"pip-footer layout-row layout-align-end-center\" ng-if=\"vm.buttons\"><div><md-button class=\"md-accent\" ng-repeat=\"start in vm.buttons\" ng-click=\"start.click()\">{{start.title}}</md-button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('success/FileSuccess.html',\n    '<div class=\"pip-files pip-progress-files\"><div class=\"pip-body pip-scroll pip-progress-body\"><div class=\"layout-row\"><div class=\"pip-progress-icon bb-green\"><md-icon md-svg-icon=\"icons:check\"></md-icon></div><div class=\"pip-progress-content\"><h3 class=\"pip-title\">Uploaded {{::vm.type}} successfully!</h3><div class=\"color-secondary-text pip-subtitle\">{{vm.name}}</div></div></div></div><div class=\"pip-footer layout-row layout-align-end-center\" ng-if=\"vm.buttons && vm.buttons.length > 0\"><div><md-button class=\"md-accent\" ng-repeat=\"start in vm.buttons\" ng-click=\"start.click()\">{{start.title}}</md-button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('upload/FileUpload.html',\n    '<div><pip-succes-upload ng-if=\"vm.state == \\'upload\\'\" pip-name=\"vm.name\" pip-type=\"vm.type\" pip-buttons=\"vm.buttons\"></pip-succes-upload><pip-fail-upload ng-if=\"vm.state == \\'fail\\'\" pip-name=\"vm.name\" pip-type=\"vm.type\" pip-error=\"vm.error\" pip-buttons=\"vm.failButtons\"></pip-fail-upload><pip-start-upload ng-if=\"vm.state == \\'start\\'\" pip-name=\"vm.name\" pip-type=\"vm.type\" pip-progress=\"vm.progress\" pip-buttons=\"vm.startButtons\"></pip-start-upload></div>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-files-html.min.js.map\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvY29tbW9uL0J1dHRvbnNVcGxvYWQudHMiLCJzcmMvZGVwZW5kZW5jaWVzL3RyYW5zbGF0ZS50cyIsInNyYy9mYWlsL0ZpbGVGYWlsQ29udHJvbGxlci50cyIsInNyYy9maWxlcy50cyIsInNyYy9zZWxlY3QvRmlsZVNlbGVjdENvbnRyb2xsZXIudHMiLCJzcmMvc2VydmljZS9GaWxlVXBsb2FkU2VydmljZS50cyIsInNyYy9zdGFydC9GaWxlU3RhcnRDb250cm9sbGVyLnRzIiwic3JjL3N1Y2Nlc3MvRmlsZVN1Y2Nlc3NDb250cm9sbGVyLnRzIiwic3JjL3N1Y2Nlc3MvaW5kZXgudHMiLCJzcmMvdXBsb2FkL0ZpbGVVcGxvYWRDb250cm9sbGVyLnRzIiwic3JjL3VwbG9hZC9pbmRleC50cyIsInRlbXAvcGlwLXdlYnVpLWZpbGVzLWh0bWwubWluLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNBQTtJQUFBO0lBR0EsQ0FBQztJQUFELG9CQUFDO0FBQUQsQ0FIQSxBQUdDLElBQUE7QUFIWSxzQ0FBYTs7QUNPMUIsQ0FBQztJQUNHLFlBQVksQ0FBQztJQUNiLHdCQUF3QixTQUF3QztRQUM1RCxJQUFJLFlBQVksR0FBUSxTQUFTLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQztjQUMvQyxTQUFTLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxHQUFHLElBQUksQ0FBQztRQUUzQyxNQUFNLENBQUMsVUFBQyxHQUFXO1lBQ2YsTUFBTSxDQUFDLFlBQVksR0FBSSxZQUFZLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFDcEUsQ0FBQyxDQUFBO0lBQ0wsQ0FBQztJQUVELE9BQU8sQ0FBQyxNQUFNLENBQUMsb0JBQW9CLEVBQUUsRUFBRSxDQUFDO1NBQ25DLE1BQU0sQ0FBQyxXQUFXLEVBQUUsY0FBYyxDQUFDLENBQUM7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b290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJleHBvcnQgY2xhc3MgQnV0dG9uc1VwbG9hZCB7XHJcbiAgICBwdWJsaWMgdGl0bGU6IHN0cmluZztcclxuICAgIHB1YmxpYyBjbGljazogRnVuY3Rpb247XHJcbn0iLCIvKipcclxuICogQGZpbGUgT3B0aW9uYWwgZmlsdGVyIHRvIHRyYW5zbGF0ZSBzdHJpbmcgcmVzb3VyY2VzXHJcbiAqIEBjb3B5cmlnaHQgRGlnaXRhbCBMaXZpbmcgU29mdHdhcmUgQ29ycC4gMjAxNC0yMDE2XHJcbiAqL1xyXG4gXHJcbi8qIGdsb2JhbCBhbmd1bGFyICovXHJcblxyXG4oKCkgPT4ge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgZnVuY3Rpb24gZmlsZXJUcmFuc2xhdGUoJGluamVjdG9yOiBhbmd1bGFyLmF1dG8uSUluamVjdG9yU2VydmljZSkge1xyXG4gICAgICAgIGxldCBwaXBUcmFuc2xhdGU6IGFueSA9ICRpbmplY3Rvci5oYXMoJ3BpcFRyYW5zbGF0ZScpIFxyXG4gICAgICAgICAgICA/ICRpbmplY3Rvci5nZXQoJ3BpcFRyYW5zbGF0ZScpIDogbnVsbDtcclxuXHJcbiAgICAgICAgcmV0dXJuIChrZXk6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcGlwVHJhbnNsYXRlICA/IHBpcFRyYW5zbGF0ZS50cmFuc2xhdGUoa2V5KSB8fCBrZXkgOiBrZXk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdwaXBGaWxlcy5UcmFuc2xhdGUnLCBbXSlcclxuICAgICAgICAuZmlsdGVyKCd0cmFuc2xhdGUnLCBmaWxlclRyYW5zbGF0ZSk7XHJcblxyXG59KSgpO1xyXG4iLCJcclxuaW1wb3J0IHtcclxuICAgIEJ1dHRvbnNVcGxvYWRcclxufSBmcm9tIFwiLi4vY29tbW9uL0J1dHRvbnNVcGxvYWRcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUZpbGVGYWlsQ29udHJvbGxlciB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICB0eXBlOiBzdHJpbmc7XHJcbiAgICBlcnJvcjogc3RyaW5nO1xyXG4gICAgYnV0dG9uczogQnV0dG9uc1VwbG9hZFtdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRmlsZUZhaWxDb250cm9sbGVyIGltcGxlbWVudHMgSUZpbGVGYWlsQ29udHJvbGxlciB7XHJcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nO1xyXG4gICAgcHVibGljIHR5cGU6IHN0cmluZztcclxuICAgIHB1YmxpYyBlcnJvcjogc3RyaW5nO1xyXG4gICAgcHVibGljIGJ1dHRvbnM6IEJ1dHRvbnNVcGxvYWRbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcigkc2NvcGU6IG5nLklTY29wZSkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICBcclxuICAgICAgICAvLyBJbml0IHBhcmFtZXRlcnNcclxuICAgICAgICB0aGlzLnR5cGUgPSAkc2NvcGVbJ3R5cGUnXSB8fCAnZmlsZSc7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gJHNjb3BlWyduYW1lJ107XHJcbiAgICAgICAgdGhpcy5idXR0b25zID0gJHNjb3BlWydidXR0b25zJ10gfHwgbnVsbDtcclxuICAgICAgICB0aGlzLmVycm9yID0gJHNjb3BlWydlcnJvciddIHx8IG51bGw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnZXJyb3InLCAoZXJyb3I6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgfSlcclxuICAgICAgXHJcbiAgICB9XHJcbn0iLCLvu79cclxuaW1wb3J0IHtGaWxlU2VsZWN0Q29udHJvbGxlcn0gZnJvbSAnLi9zZWxlY3QvRmlsZVNlbGVjdENvbnRyb2xsZXInO1xyXG5pbXBvcnQge0ZpbGVGYWlsQ29udHJvbGxlcn0gZnJvbSAnLi9mYWlsL0ZpbGVGYWlsQ29udHJvbGxlcic7XHJcbmltcG9ydCB7RmlsZVVwbG9hZFNlcnZpY2V9IGZyb20gJy4vc2VydmljZS9GaWxlVXBsb2FkU2VydmljZSc7XHJcbmltcG9ydCB7RmlsZVN0YXJ0Q29udHJvbGxlcn0gZnJvbSAnLi9zdGFydC9GaWxlU3RhcnRDb250cm9sbGVyJztcclxuXHJcbmltcG9ydCAnLi9zdWNjZXNzL2luZGV4JztcclxuaW1wb3J0ICcuL3VwbG9hZC9pbmRleCc7XHJcblxyXG4oKCkgPT4ge1xyXG4gICAgZnVuY3Rpb24gZmlsZU1vZGVsRGlyZWN0aXZlKCRwYXJzZTogYW55KSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgICAgICBsaW5rOiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbW9kZWwgPSAkcGFyc2UoYXR0cnMuZmlsZU1vZGVsKTtcclxuICAgICAgICAgICAgICAgIGxldCBtb2RlbFNldHRlciA9IG1vZGVsLmFzc2lnbjtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5iaW5kKCdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0ZXIoc2NvcGUsIGVsZW1lbnRbMF0uZmlsZXNbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGZpbGVTZWxlY3REaXJlY3RpdmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIGxvY2FsRmlsZTogJz0nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IEZpbGVTZWxlY3RDb250cm9sbGVyLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc2VsZWN0L0ZpbGVTZWxlY3QuaHRtbCdcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgIGZ1bmN0aW9uIGZpbGVGYWlsRGlyZWN0aXZlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IEZpbGVGYWlsQ29udHJvbGxlcixcclxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uczogJz0/cGlwQnV0dG9ucycsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnPXBpcE5hbWUnLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJz0/cGlwVHlwZScsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogJz1waXBFcnJvcidcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdmYWlsL0ZpbGVGYWlsLmh0bWwnXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBmaWxlU3RhcnREaXJlY3RpdmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogRmlsZVN0YXJ0Q29udHJvbGxlcixcclxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uczogJz0/cGlwQnV0dG9ucycsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnPXBpcE5hbWUnLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJz0/cGlwVHlwZScsXHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzczogJz1waXBQcm9ncmVzcydcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdzdGFydC9GaWxlU3RhcnQuaHRtbCdcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdwaXBGaWxlcycsIFsncGlwRmlsZXMuU3VjY2Vzc1VwbG9hZCcsICdwaXBGaWxlcy5GaWxlVXBsb2FkJ10pXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnZmlsZU1vZGVsJywgZmlsZU1vZGVsRGlyZWN0aXZlKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ3BpcEZpbGVTZWxlY3QnLCBmaWxlU2VsZWN0RGlyZWN0aXZlKVxyXG4gICAgICAgIC8vLmRpcmVjdGl2ZSgncGlwRmlsZVVwbG9hZCcsIGZpbGVVcGxvYWREaXJlY3RpdmUpXHJcbiAgICAgICAgLy8uY29tcG9uZW50KCdwaXBTdWNjZXNVcGxvYWQnLCBmaWxlU3VjY2Vzc0RpcmVjdGl2ZSlcclxuICAgICAgICAuZGlyZWN0aXZlKCdwaXBGYWlsVXBsb2FkJywgZmlsZUZhaWxEaXJlY3RpdmUpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgncGlwU3RhcnRVcGxvYWQnLCBmaWxlU3RhcnREaXJlY3RpdmUpXHJcbiAgICAgICAgLnNlcnZpY2UoJ3BpcEZpbGVVcGxvYWQnLCBGaWxlVXBsb2FkU2VydmljZSk7XHJcblxyXG5cclxufSkoKTtcclxuIiwiZXhwb3J0IGludGVyZmFjZSBJRmlsZVNlbGVjdENvbnRyb2xsZXIge1xyXG4gICAgbG9jYWxGaWxlOiBhbnk7XHJcbiAgICBvblVwbG9hZEJ1dHRvbkNsaWNrKCk6IHZvaWQgO1xyXG4gICAgb25EZWxldGVCdXR0b25DbGljaygpOiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRmlsZVNlbGVjdENvbnRyb2xsZXIgaW1wbGVtZW50cyBJRmlsZVNlbGVjdENvbnRyb2xsZXIge1xyXG4gICAgcHVibGljIGxvY2FsRmlsZTogYW55O1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3Rvcigkc2NvcGU6IG5nLklTY29wZSkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICB0aGlzLmxvY2FsRmlsZSA9ICRzY29wZVsnbG9jYWxGaWxlJ107XHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgndm0ubG9jYWxGaWxlJywgKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgJHNjb3BlWydsb2NhbEZpbGUnXSA9IGl0ZW07XHJcbiAgICAgICAgfSkgXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uVXBsb2FkQnV0dG9uQ2xpY2soKTogdm9pZCB7XHJcbiAgICAgICAgJCgnI2lucF9maWxlJykuY2xpY2soKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25EZWxldGVCdXR0b25DbGljaygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmxvY2FsRmlsZSA9IG51bGw7XHJcbiAgICAgICAgbGV0IGZvcm1sID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucF9mb3JtJyk7XHJcbiAgICAgICAgKDxhbnk+Zm9ybWwpLnJlc2V0KCk7XHJcblxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIEZpbGVVcGxvYWRTdGF0ZSB7XHJcbiAgICBwdWJsaWMgc3RhdGljIEFsbDogc3RyaW5nW10gPSBbJ3N0YXJ0JywgJ3VwbG9hZCcsICdmYWlsJ107XHJcbiAgICBwdWJsaWMgc3RhdGljIFN0YXJ0OiBzdHJpbmcgPSAnc3RhcnQnO1xyXG4gICAgcHVibGljIHN0YXRpYyBVcGxvYWQ6IHN0cmluZyA9ICd1cGxvYWQnO1xyXG4gICAgcHVibGljIHN0YXRpYyBGYWlsOiBzdHJpbmcgPSAnZmFpbCc7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUZpbGVVcGxvYWRTZXJ2aWNlIHtcclxuICAgIHByb2dyZXNzOiBudW1iZXI7XHJcbiAgICBzdGF0ZTogc3RyaW5nO1xyXG4gICAgZXJyb3I6IHN0cmluZztcclxuICAgIHVwbG9hZCh1cmw6IHN0cmluZywgZmlsZTogYW55LCB0cmFuc2FjdGlvbjogYW55LCBjYWxsYmFjaz86IChkYXRhOiBhbnksIGVycjogYW55KSA9PiB2b2lkKTogdm9pZDtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEZpbGVVcGxvYWRTZXJ2aWNlIGltcGxlbWVudHMgSUZpbGVVcGxvYWRTZXJ2aWNlIHtcclxuICAgIHB1YmxpYyBwcm9ncmVzczogbnVtYmVyO1xyXG4gICAgcHVibGljIHN0YXRlOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgZXJyb3I6IHN0cmluZyA9IG51bGw7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCBwcml2YXRlICRodHRwOiBuZy5JSHR0cFNlcnZpY2UpIHt9XHJcblxyXG4gICAgcHVibGljIHVwbG9hZCh1cmw6IHN0cmluZywgZmlsZTogYW55LCBjYWxsYmFjaz86IChkYXRhOiBhbnksIGVycjogYW55KSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGZkOiBGb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgIGZkLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMucHJvZ3Jlc3MgPSAwO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBGaWxlVXBsb2FkU3RhdGUuU3RhcnQ7XHJcbiAgICAgICAgdGhpcy4kaHR0cC5wb3N0KHVybCwgZmQsIDxhbnk+e1xyXG4gICAgICAgICAgICB1cGxvYWRFdmVudEhhbmRsZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzczogKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmxlbmd0aENvbXB1dGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IChlLmxvYWRlZCAvIGUudG90YWwpICogMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkIH1cclxuICAgICAgICB9KSAgICBcclxuICAgICAgICAuc3VjY2VzcygocmVzcG9uc2U6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gRmlsZVVwbG9hZFN0YXRlLlVwbG9hZDtcclxuXHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2socmVzcG9uc2UsIG51bGwpO1xyXG4gICAgICAgIH0pICAgIFxyXG4gICAgICAgIC5lcnJvcigocmVzcG9uc2U6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gRmlsZVVwbG9hZFN0YXRlLkZhaWw7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3IgPSByZXNwb25zZS5FcnJvciB8fCByZXNwb25zZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2sobnVsbCwgcmVzcG9uc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiXHJcbmltcG9ydCB7XHJcbiAgICBCdXR0b25zVXBsb2FkXHJcbn0gZnJvbSBcIi4uL2NvbW1vbi9CdXR0b25zVXBsb2FkXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElGaWxlU3RhcnRDb250cm9sbGVyIHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHR5cGU6IHN0cmluZztcclxuICAgIHByb2dyZXNzOiBudW1iZXI7XHJcbiAgICBidXR0b25zOiBCdXR0b25zVXBsb2FkW107XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBGaWxlU3RhcnRDb250cm9sbGVyIGltcGxlbWVudHMgSUZpbGVTdGFydENvbnRyb2xsZXIge1xyXG4gICAgcHVibGljIG5hbWU6IHN0cmluZztcclxuICAgIHB1YmxpYyBwcm9ncmVzczogbnVtYmVyO1xyXG4gICAgcHVibGljIHR5cGU6IHN0cmluZztcclxuICAgIHB1YmxpYyBidXR0b25zOiBCdXR0b25zVXBsb2FkW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoJHNjb3BlOiBuZy5JU2NvcGUpIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSW5pdCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgdGhpcy50eXBlID0gJHNjb3BlWyd0eXBlJ10gfHwgJ2ZpbGUnO1xyXG4gICAgICAgIHRoaXMubmFtZSA9ICRzY29wZVsnbmFtZSddO1xyXG4gICAgICAgIHRoaXMuYnV0dG9ucyA9ICRzY29wZVsnYnV0dG9ucyddIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5wcm9ncmVzcyA9ICRzY29wZVsncHJvZ3Jlc3MnXSB8fCBudWxsO1xyXG4gICAgICBcclxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdwcm9ncmVzcycsIChwcm9ncmVzczogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSBwcm9ncmVzcztcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59IiwiXHJcbmltcG9ydCB7XHJcbiAgICBCdXR0b25zVXBsb2FkXHJcbn0gZnJvbSBcIi4uL2NvbW1vbi9CdXR0b25zVXBsb2FkXCI7XHJcblxyXG5pbXBvcnQgeyBJRmlsZVN1Y2Nlc3NCaW5kaW5nc30gZnJvbSAnLi9pbmRleCc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElGaWxlU3VjY2Vzc0NvbnRyb2xsZXIge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgdHlwZTogc3RyaW5nO1xyXG4gICAgYnV0dG9uczogQnV0dG9uc1VwbG9hZFtdO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRmlsZVN1Y2Nlc3NDb250cm9sbGVyIGltcGxlbWVudHMgSUZpbGVTdWNjZXNzQ29udHJvbGxlciwgSUZpbGVTdWNjZXNzQmluZGluZ3Mge1xyXG4gICAgcHVibGljIG5hbWU6IHN0cmluZztcclxuICAgIHB1YmxpYyB0eXBlOiBzdHJpbmcgPSAnZmlsZSc7XHJcbiAgICBwdWJsaWMgYnV0dG9uczogQnV0dG9uc1VwbG9hZFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgICBwdWJsaWMgJG9uQ2hhbmdlcyhjaGFuZ2VzKSB7fVxyXG59IiwiXHJcbmltcG9ydCB7RmlsZVN1Y2Nlc3NDb250cm9sbGVyfSBmcm9tICcuL0ZpbGVTdWNjZXNzQ29udHJvbGxlcic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElGaWxlU3VjY2Vzc0JpbmRpbmdzIHtcclxuICAgIFtrZXk6IHN0cmluZ106IGFueTtcclxuXHJcbiAgICB0eXBlOiBhbnlcclxuICAgIGJ1dHRvbnM6IGFueSxcclxuICAgIG5hbWU6IGFueVxyXG59XHJcblxyXG5jb25zdCBGaWxlU3VjY2Vzc0JpbmRpbmdzOiBJRmlsZVN1Y2Nlc3NCaW5kaW5ncyA9IHtcclxuICAgIGJ1dHRvbnM6ICc9P3BpcEJ1dHRvbnMnLFxyXG4gICAgbmFtZTogJz1waXBOYW1lJyxcclxuICAgIHR5cGU6ICc9P3BpcFR5cGUnLFxyXG59O1xyXG5cclxuKCgpID0+IHtcclxuIFxyXG4gICAgIGNvbnN0IGZpbGVTdWNjZXNzRGlyZWN0aXZlID0ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBGaWxlU3VjY2Vzc0NvbnRyb2xsZXIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuICAgICAgICAgICAgYmluZGluZ3M6IEZpbGVTdWNjZXNzQmluZGluZ3MsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnc3VjY2Vzcy9GaWxlU3VjY2Vzcy5odG1sJ1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgncGlwRmlsZXMuU3VjY2Vzc1VwbG9hZCcsIFtdKVxyXG4gICAgICAgIC5jb21wb25lbnQoJ3BpcFN1Y2Nlc1VwbG9hZCcsIGZpbGVTdWNjZXNzRGlyZWN0aXZlKVxyXG5cclxuXHJcbn0pKCk7XHJcbiIsIlxyXG5pbXBvcnQge1xyXG4gICAgSUZpbGVVcGxvYWRTZXJ2aWNlXHJcbn0gZnJvbSBcIi4uL3NlcnZpY2UvRmlsZVVwbG9hZFNlcnZpY2VcIjtcclxuXHJcbmltcG9ydCB7XHJcbiAgICBCdXR0b25zVXBsb2FkXHJcbn0gZnJvbSBcIi4uL2NvbW1vbi9CdXR0b25zVXBsb2FkXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElGaWxlVXBsb2FkQ29udHJvbGxlciB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICB0eXBlOiBzdHJpbmc7XHJcbiAgICBzdGF0ZTogc3RyaW5nO1xyXG4gICAgcHJvZ3Jlc3M6IG51bWJlcjtcclxuICAgIG9uQ2FuY2VsKCk6IHZvaWQ7XHJcbiAgICBvblJldHJ5KCk6IHZvaWQ7XHJcbiAgICBvbkFib3J0KCk6IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBGaWxlVXBsb2FkQnV0dG9ucyB7XHJcbiAgICByZXRyeTogRnVuY3Rpb247XHJcbiAgICBjYW5jZWw6IEZ1bmN0aW9uO1xyXG4gICAgYWJvcnQ6IEZ1bmN0aW9uO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRmlsZVVwbG9hZENvbnRyb2xsZXIgaW1wbGVtZW50cyBJRmlsZVVwbG9hZENvbnRyb2xsZXIge1xyXG4gICAgLy9wcml2YXRlIF9idXR0b25GdW5jdGlvbjogRmlsZVVwbG9hZEJ1dHRvbnM7XHJcbiAgICBwcml2YXRlIF9mdW5jdGlvbnM6IEZpbGVVcGxvYWRCdXR0b25zO1xyXG4gICAgcHVibGljIHVwbG9hZEJ1dHRvbnM6IEJ1dHRvbnNVcGxvYWRbXTtcclxuICAgIHB1YmxpYyBmYWlsQnV0dG9uczogQnV0dG9uc1VwbG9hZFtdO1xyXG4gICAgcHVibGljIHN0YXJ0QnV0dG9uczogQnV0dG9uc1VwbG9hZFtdO1xyXG5cclxuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgdHlwZTogc3RyaW5nO1xyXG4gICAgcHVibGljIHN0YXRlOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgcHJvZ3Jlc3M6IG51bWJlcjtcclxuICAgIHB1YmxpYyBidXR0b25zOiBib29sZWFuO1xyXG4gICAgcHVibGljIGVycm9yOiBzdHJpbmcgPSBudWxsO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgICRzY29wZTogbmcuSVNjb3BlXHJcbiAgICApIHtcclxuICAgICAgICBcIm5nSW5qZWN0XCI7XHJcblxyXG4gICAgICAgIHRoaXMuX2Z1bmN0aW9ucyA9ICRzY29wZVsnYnV0dG9uRnVuY3Rpb24nXTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBJbml0IHBhcmFtZXRlcnNcclxuICAgICAgICBpZiAodGhpcy5fZnVuY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBsb2FkQnV0dG9ucyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmZhaWxCdXR0b25zID0gW1xyXG4gICAgICAgICAgICAgICAge3RpdGxlOiAnQ2FuY2VsJywgY2xpY2s6ICgpID0+IHsgdGhpcy5vbkNhbmNlbCgpfX0sXHJcbiAgICAgICAgICAgICAgICB7dGl0bGU6ICdSZXRyeScsIGNsaWNrOiAoKSA9PiB7IHRoaXMub25SZXRyeSgpfX1cclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgdGhpcy5zdGFydEJ1dHRvbnMgPSBbXHJcbiAgICAgICAgICAgICAgICB7dGl0bGU6ICdBYm9ydCcsIGNsaWNrOiAoKSA9PiB7IHRoaXMub25BYm9ydCgpIH19XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYnV0dG9ucyA9ICRzY29wZVsnYnV0dG9ucyddIHx8IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudHlwZSA9ICRzY29wZVsndHlwZSddIHx8ICdmaWxlJztcclxuICAgICAgICB0aGlzLm5hbWUgPSAkc2NvcGVbJ25hbWUnXTtcclxuICAgICAgICB0aGlzLnN0YXRlID0gJHNjb3BlWydzdGF0ZSddO1xyXG4gICAgICAgIHRoaXMuZXJyb3IgPSAkc2NvcGVbJ2Vycm9yJ107XHJcbiAgICAgICAgdGhpcy5wcm9ncmVzcyA9ICRzY29wZVsncHJvZ3Jlc3MnXTtcclxuXHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnc3RhdGUnLCAoc3RhdGU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgnZXJyb3InLCAoZXJyb3I6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgncHJvZ3Jlc3MnLCAocHJvZ3Jlc3M6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gcHJvZ3Jlc3M7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25DYW5jZWwoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2Z1bmN0aW9ucy5jYW5jZWwpIHRoaXMuX2Z1bmN0aW9ucy5jYW5jZWwoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25SZXRyeSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5fZnVuY3Rpb25zLnJldHJ5KSB0aGlzLl9mdW5jdGlvbnMucmV0cnkoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25BYm9ydCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fZnVuY3Rpb25zLmFib3J0KSB0aGlzLl9mdW5jdGlvbnMuYWJvcnQoKTtcclxuICAgIH1cclxuXHJcbn0iLCJcclxuaW1wb3J0IHtGaWxlVXBsb2FkQ29udHJvbGxlcn0gZnJvbSAnLi9GaWxlVXBsb2FkQ29udHJvbGxlcic7XHJcblxyXG4oKCkgPT4ge1xyXG4gICAgXHJcbiAgICAgZnVuY3Rpb24gZmlsZVVwbG9hZERpcmVjdGl2ZSgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBGaWxlVXBsb2FkQ29udHJvbGxlcixcclxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uRnVuY3Rpb246ICc9P3BpcEJ1dHRvbkZ1bmN0aW9ucycsXHJcbiAgICAgICAgICAgICAgICBidXR0b25zOiAnPT9waXBCdXR0b25zJyxcclxuICAgICAgICAgICAgICAgIGVycm9yOiAnPT9waXBFcnJvcicsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnPXBpcE5hbWUnLFxyXG4gICAgICAgICAgICAgICAgc3RhdGU6ICc9cGlwU3RhdGUnLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJz0/cGlwVHlwZScsXHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzczogJz1waXBQcm9ncmVzcydcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd1cGxvYWQvRmlsZVVwbG9hZC5odG1sJ1xyXG4gICAgICAgIH07XHJcbiAgXHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ3BpcEZpbGVzLkZpbGVVcGxvYWQnLCBbXSlcclxuICAgICAgICAuZGlyZWN0aXZlKCdwaXBGaWxlVXBsb2FkJywgZmlsZVVwbG9hZERpcmVjdGl2ZSlcclxuICAgICAgIFxyXG59KSgpO1xyXG4iLCIoZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncGlwRmlsZXMuVGVtcGxhdGVzJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdwaXBGaWxlcy5UZW1wbGF0ZXMnLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2ZhaWwvRmlsZUZhaWwuaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJwaXAtZmlsZXMgcGlwLXByb2dyZXNzLWZpbGVzXCI+PGRpdiBjbGFzcz1cInBpcC1ib2R5IHBpcC1zY3JvbGwgcGlwLXByb2dyZXNzLWJvZHlcIj48ZGl2IGNsYXNzPVwibGF5b3V0LXJvd1wiPjxkaXYgY2xhc3M9XCJwaXAtcHJvZ3Jlc3MtaWNvbiBjb2xvci1iYWRnZS1iZ1wiPjxtZC1pY29uIG1kLXN2Zy1pY29uPVwiaWNvbnM6Y3Jvc3NcIj48L21kLWljb24+PC9kaXY+PGRpdiBjbGFzcz1cInBpcC1wcm9ncmVzcy1jb250ZW50XCI+PGgzIGNsYXNzPVwicGlwLXRpdGxlXCI+VXBsb2FkaW5nIHt7dm0udHlwZX19IGZhaWxlZCB3aXRoIGVycm9ycyE8L2gzPjxkaXYgY2xhc3M9XCJjb2xvci1zZWNvbmRhcnktdGV4dCBwaXAtc3VidGl0bGVcIj57e3ZtLm5hbWV9fTwvZGl2PjxkaXYgY2xhc3M9XCJjb2xvci1lcnJvciBwaXAtZXJyb3JcIj57e3ZtLmVycm9yfX08L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwicGlwLWZvb3RlciBsYXlvdXQtcm93IGxheW91dC1hbGlnbi1lbmQtY2VudGVyXCIgbmctaWY9XCJ2bS5idXR0b25zICYmIHZtLmJ1dHRvbnMubGVuZ3RoID4gMFwiPjxkaXY+PG1kLWJ1dHRvbiBjbGFzcz1cIm1kLWFjY2VudFwiIG5nLXJlcGVhdD1cImZhaWwgaW4gdm0uYnV0dG9uc1wiIG5nLWNsaWNrPVwiZmFpbC5jbGljaygpXCI+e3s6OmZhaWwudGl0bGV9fTwvbWQtYnV0dG9uPjwvZGl2PjwvZGl2PjwvZGl2PicpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3BpcEZpbGVzLlRlbXBsYXRlcycpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncGlwRmlsZXMuVGVtcGxhdGVzJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdzZWxlY3QvRmlsZVNlbGVjdC5odG1sJyxcbiAgICAnPGRpdiBjbGFzcz1cInBpcC1maWxlLXNlbGVjdFwiPjxmb3JtIGlkPVwiaW5wX2Zvcm1cIiBjbGFzcz1cInBpcC1oaWRkZW4tZm9ybVwiPjxpbnB1dCB0eXBlPVwiZmlsZVwiIGZpbGUtbW9kZWw9XCJ2bS5sb2NhbEZpbGVcIiBpZD1cImlucF9maWxlXCIgbmctbW9kZWw9XCJ2bS5sb2NhbEZpbGVcIj48L2Zvcm0+PG1kLWJ1dHRvbiBjbGFzcz1cIm1kLXJhaXNlZCBtZC1hY2NlbnQgcGlwLWJ1dHRvblwiIG5nLWNsaWNrPVwidm0ub25VcGxvYWRCdXR0b25DbGljaygpXCIgbmctaWY9XCIhdm0ubG9jYWxGaWxlXCI+Q2hvb3NlIEZpbGU8L21kLWJ1dHRvbj48ZGl2IG5nLWlmPVwidm0ubG9jYWxGaWxlLm5hbWVcIiBjbGFzcz1cInBpcC1maWxlIGxheW91dC1yb3cgbGF5b3V0LWFsaWduLXN0YXJ0LWNlbnRlclwiPjxtZC1pY29uIG1kLXN2Zy1pY29uPVwiaWNvbnM6ZG9jdW1lbnRcIiBjbGFzcz1cInBpcC1pY29uXCI+PC9tZC1pY29uPjxkaXYgY2xhc3M9XCJmbGV4XCI+PGRpdiBjbGFzcz1cInRleHQtYm9keTIgdGV4dC1vdmVyZmxvd1wiPnt7dm0ubG9jYWxGaWxlLm5hbWV9fTwvZGl2PjxkaXYgbmctaWY9XCJ2bS5sb2NhbEZpbGUuc2l6ZVwiIGNsYXNzPVwiY29sb3Itc2Vjb25kYXJ5LXRleHRcIj57e3ZtLmxvY2FsRmlsZS5zaXplfX08L2Rpdj48L2Rpdj48bWQtYnV0dG9uIG5nLWNsaWNrPVwidm0ub25EZWxldGVCdXR0b25DbGljaygpXCIgY2xhc3M9XCJtZC1pY29uLWJ1dHRvblwiPjxtZC1pY29uIG1kLXN2Zy1pY29uPVwiaWNvbnM6Y3Jvc3MtY2lyY2xlXCI+PC9tZC1pY29uPjwvbWQtYnV0dG9uPjwvZGl2PjwvZGl2PicpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3BpcEZpbGVzLlRlbXBsYXRlcycpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncGlwRmlsZXMuVGVtcGxhdGVzJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdzdGFydC9GaWxlU3RhcnQuaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJwaXAtZmlsZXMgcGlwLXByb2dyZXNzLWZpbGVzXCI+PGRpdiBjbGFzcz1cInBpcC1ib2R5IHBpcC1zY3JvbGwgcGlwLXByb2dyZXNzLWJvZHlcIj48ZGl2IGNsYXNzPVwibGF5b3V0LXJvd1wiPjxkaXYgY2xhc3M9XCJwaXAtcHJvZ3Jlc3MtaWNvbiBiYi1vcmFuZ2VcIj48bWQtaWNvbiBtZC1zdmctaWNvbj1cImljb25zOnBsYXlcIj48L21kLWljb24+PC9kaXY+PGRpdiBjbGFzcz1cInBpcC1wcm9ncmVzcy1jb250ZW50XCI+PGgzIGNsYXNzPVwicGlwLXRpdGxlXCI+VXBsb2FkaW5nIHt7Ojp2bS50eXBlfX08L2gzPjxkaXYgY2xhc3M9XCJjb2xvci1zZWNvbmRhcnktdGV4dCBwaXAtc3VidGl0bGVcIj57e3ZtLm5hbWV9fTwvZGl2PjxkaXY+PG1kLXByb2dyZXNzLWxpbmVhciBtZC1tb2RlPVwiZGV0ZXJtaW5hdGVcIiBjbGFzcz1cIm1kLWFjY2VudFwiIHZhbHVlPVwie3t2bS5wcm9ncmVzc319XCIgbmctaWY9XCJ2bS5wcm9ncmVzcyA8IDEwMFwiPjwvbWQtcHJvZ3Jlc3MtbGluZWFyPjxtZC1wcm9ncmVzcy1saW5lYXIgbWQtbW9kZT1cImluZGV0ZXJtaW5hdGVcIiBjbGFzcz1cIm1kLWFjY2VudFwiIG5nLWlmPVwidm0ucHJvZ3Jlc3MgPT0gMTAwXCI+PC9tZC1wcm9ncmVzcy1saW5lYXI+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cInBpcC1mb290ZXIgbGF5b3V0LXJvdyBsYXlvdXQtYWxpZ24tZW5kLWNlbnRlclwiIG5nLWlmPVwidm0uYnV0dG9uc1wiPjxkaXY+PG1kLWJ1dHRvbiBjbGFzcz1cIm1kLWFjY2VudFwiIG5nLXJlcGVhdD1cInN0YXJ0IGluIHZtLmJ1dHRvbnNcIiBuZy1jbGljaz1cInN0YXJ0LmNsaWNrKClcIj57e3N0YXJ0LnRpdGxlfX08L21kLWJ1dHRvbj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdwaXBGaWxlcy5UZW1wbGF0ZXMnKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3BpcEZpbGVzLlRlbXBsYXRlcycsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnc3VjY2Vzcy9GaWxlU3VjY2Vzcy5odG1sJyxcbiAgICAnPGRpdiBjbGFzcz1cInBpcC1maWxlcyBwaXAtcHJvZ3Jlc3MtZmlsZXNcIj48ZGl2IGNsYXNzPVwicGlwLWJvZHkgcGlwLXNjcm9sbCBwaXAtcHJvZ3Jlc3MtYm9keVwiPjxkaXYgY2xhc3M9XCJsYXlvdXQtcm93XCI+PGRpdiBjbGFzcz1cInBpcC1wcm9ncmVzcy1pY29uIGJiLWdyZWVuXCI+PG1kLWljb24gbWQtc3ZnLWljb249XCJpY29uczpjaGVja1wiPjwvbWQtaWNvbj48L2Rpdj48ZGl2IGNsYXNzPVwicGlwLXByb2dyZXNzLWNvbnRlbnRcIj48aDMgY2xhc3M9XCJwaXAtdGl0bGVcIj5VcGxvYWRlZCB7ezo6dm0udHlwZX19IHN1Y2Nlc3NmdWxseSE8L2gzPjxkaXYgY2xhc3M9XCJjb2xvci1zZWNvbmRhcnktdGV4dCBwaXAtc3VidGl0bGVcIj57e3ZtLm5hbWV9fTwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJwaXAtZm9vdGVyIGxheW91dC1yb3cgbGF5b3V0LWFsaWduLWVuZC1jZW50ZXJcIiBuZy1pZj1cInZtLmJ1dHRvbnMgJiYgdm0uYnV0dG9ucy5sZW5ndGggPiAwXCI+PGRpdj48bWQtYnV0dG9uIGNsYXNzPVwibWQtYWNjZW50XCIgbmctcmVwZWF0PVwic3RhcnQgaW4gdm0uYnV0dG9uc1wiIG5nLWNsaWNrPVwic3RhcnQuY2xpY2soKVwiPnt7c3RhcnQudGl0bGV9fTwvbWQtYnV0dG9uPjwvZGl2PjwvZGl2PjwvZGl2PicpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3BpcEZpbGVzLlRlbXBsYXRlcycpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncGlwRmlsZXMuVGVtcGxhdGVzJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCd1cGxvYWQvRmlsZVVwbG9hZC5odG1sJyxcbiAgICAnPGRpdj48cGlwLXN1Y2Nlcy11cGxvYWQgbmctaWY9XCJ2bS5zdGF0ZSA9PSBcXCd1cGxvYWRcXCdcIiBwaXAtbmFtZT1cInZtLm5hbWVcIiBwaXAtdHlwZT1cInZtLnR5cGVcIiBwaXAtYnV0dG9ucz1cInZtLmJ1dHRvbnNcIj48L3BpcC1zdWNjZXMtdXBsb2FkPjxwaXAtZmFpbC11cGxvYWQgbmctaWY9XCJ2bS5zdGF0ZSA9PSBcXCdmYWlsXFwnXCIgcGlwLW5hbWU9XCJ2bS5uYW1lXCIgcGlwLXR5cGU9XCJ2bS50eXBlXCIgcGlwLWVycm9yPVwidm0uZXJyb3JcIiBwaXAtYnV0dG9ucz1cInZtLmZhaWxCdXR0b25zXCI+PC9waXAtZmFpbC11cGxvYWQ+PHBpcC1zdGFydC11cGxvYWQgbmctaWY9XCJ2bS5zdGF0ZSA9PSBcXCdzdGFydFxcJ1wiIHBpcC1uYW1lPVwidm0ubmFtZVwiIHBpcC10eXBlPVwidm0udHlwZVwiIHBpcC1wcm9ncmVzcz1cInZtLnByb2dyZXNzXCIgcGlwLWJ1dHRvbnM9XCJ2bS5zdGFydEJ1dHRvbnNcIj48L3BpcC1zdGFydC11cGxvYWQ+PC9kaXY+Jyk7XG59XSk7XG59KSgpO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1waXAtd2VidWktZmlsZXMtaHRtbC5taW4uanMubWFwXG4iXX0="}