{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/common/ButtonsUpload.ts","src/dependencies/TranslateFilter.ts","src/fail/FileFail.ts","src/index.ts","src/model/FileModel.ts","src/select/FileSelect.ts","src/service/FileUploadService.ts","src/service/FileUploadState.ts","src/start/FileStart.ts","src/success/FileSuccess.ts","src/upload/FileUpload.ts","temp/pip-webui-files-html.min.js"],"names":[],"mappings":"AAAA;;;ACAA;IAAA;IAGA,CAAC;IAAD,oBAAC;AAAD,CAHA,AAGC,IAAA;AAHY,sCAAa;;ACA1B,CAAC;IACG,yBAAyB,SAAwC;QAC7D,IAAI,YAAY,GAAQ,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC;cAC/C,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,GAAG,IAAI,CAAC;QAE3C,MAAM,CAAC,UAAC,GAAW;YACf,MAAM,CAAC,YAAY,GAAI,YAAY,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,GAAG,GAAG,GAAG,CAAC;QACpE,CAAC,CAAA;IACL,CAAC;IAED,OAAO;SACF,MAAM,CAAC,oBAAoB,EAAE,EAAE,CAAC;SAChC,MAAM,CAAC,WAAW,EAAE,eAAe,CAAC,CAAC;AAC9C,CAAC;;;;ACFD,IAAM,gBAAgB,GAAsB;IACxC,OAAO,EAAE,cAAc;IACvB,IAAI,EAAE,UAAU;IAChB,IAAI,EAAE,WAAW;IACjB,KAAK,EAAE,WAAW;CACrB,CAAA;AAED;IAAA;IAOA,CAAC;IAAD,sBAAC;AAAD,CAPA,AAOC,IAAA;AAUD;IAMI,4BAAY,MAAiB;QACzB,UAAU,CAAC;QADf,iBAQC;QAHG,MAAM,CAAC,MAAM,CAAC,OAAO,EAAE,UAAC,KAAa;YACjC,KAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACvB,CAAC,CAAC,CAAA;IACN,CAAC;IACL,yBAAC;AAAD,CAfA,AAeC,IAAA;AAED,IAAM,iBAAiB,GAAyB;IAC5C,UAAU,EAAE,kBAAkB;IAC9B,QAAQ,EAAE,gBAAgB;IAC1B,WAAW,EAAE,oBAAoB;CACpC,CAAC;AAEF,OAAO;KACF,MAAM,CAAC,qBAAqB,EAAE,EAAE,CAAC;KACjC,SAAS,CAAC,eAAe,EAAE,iBAAiB,CAAC,CAAA;;;;AC3DlD,uCAAqC;AACrC,6BAA2B;AAC3B,iCAA+B;AAC/B,+BAA6B;AAC7B,6BAA2B;AAC3B,2BAAyB;AACzB,+BAA6B;AAE7B,OAAO;KACF,MAAM,CAAC,UAAU,EAAE;IAChB,kBAAkB;IAClB,gBAAgB;IAChB,wBAAwB;IACxB,qBAAqB;IACrB,sBAAsB;IACtB,qBAAqB;IACrB,iBAAiB;CACpB,CAAC,CAAC;;AClBP,CAAC;IACG,uBAAuB,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM;QAChD,IAAI,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QACpC,IAAI,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC;QAE/B,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE;YACnB,KAAK,CAAC,MAAM,CAAC;gBACT,WAAW,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5C,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAED,4BAA4B,MAAyB;QACjD,UAAU,CAAC;QAEX,MAAM,CAAC;YACH,QAAQ,EAAE,GAAG;YACb,IAAI,EAAE,UAAC,KAAgB,EAAE,OAAO,EAAE,KAAqB;gBACnD,aAAa,CAAC,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,CAAC,CAAA;YAChD,CAAC;SACJ,CAAC;IACN,CAAC;IAED,OAAO;SACF,MAAM,CAAC,gBAAgB,EAAE,EAAE,CAAC;SAC5B,SAAS,CAAC,WAAW,EAAE,kBAAkB,CAAC,CAAA;AACnD,CAAC;;AC1BD,CAAC;IAeG,IAAM,kBAAkB,GAAwB;QAC5C,SAAS,EAAE,eAAe;QAC1B,MAAM,EAAE,YAAY;KACvB,CAAA;IAED;QAII,8BAAY,MAAiB;YACzB,UAAU,CAAC;YADf,iBAOC;YALG,MAAM,CAAC,MAAM,CAAC,iBAAiB,EAAE,UAAC,IAAI;gBAClC,EAAE,CAAC,CAAC,KAAI,CAAC,MAAM,CAAC,CAAC,CAAC;oBACd,KAAI,CAAC,MAAM,CAAC,KAAI,CAAC,SAAS,CAAC,CAAC;gBAChC,CAAC;YACL,CAAC,CAAC,CAAA;QACN,CAAC;QAEM,kDAAmB,GAA1B;YACI,CAAC,CAAC,WAAW,CAAC,CAAC,KAAK,EAAE,CAAC;QAC3B,CAAC;QAEM,kDAAmB,GAA1B;YACI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,KAAK,GAAG,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;YAC1C,KAAM,CAAC,KAAK,EAAE,CAAC;QAEzB,CAAC;QACL,2BAAC;IAAD,CAvBA,AAuBC,IAAA;IAED,IAAM,mBAAmB,GAAG;QACxB,QAAQ,EAAE,GAAG;QACb,OAAO,EAAE,IAAI;QACb,QAAQ,EAAE,kBAAkB;QAC5B,UAAU,EAAE,oBAAoB;QAChC,WAAW,EAAE,wBAAwB;KACxC,CAAA;IAED,OAAO;SACF,MAAM,CAAC,iBAAiB,EAAE,EAAE,CAAC;SAC7B,SAAS,CAAC,eAAe,EAAE,mBAAmB,CAAC,CAAA;AAExD,CAAC;;;;ACzDD,qDAAoD;AAGpD;IAEI,2BAA2B,KAAsB;QAC7C,UAAU,CAAC;QADY,UAAK,GAAL,KAAK,CAAiB;IAEjD,CAAC;IAEM,kCAAM,GAAb,UAAc,IAAS,EAAE,GAAW,EAChC,cAA8C,EAC9C,gBAAqE;QAGrE,IAAI,EAAE,GAAa,IAAI,QAAQ,EAAE,CAAC;QAClC,EAAE,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAExB,EAAE,CAAC,CAAC,gBAAgB,CAAC;YACjB,gBAAgB,CAAC,iCAAe,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;QAEnD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,EAAO;YAC1B,mBAAmB,EAAE;gBACjB,QAAQ,EAAE,UAAC,CAAM;oBACb,EAAE,CAAC,CAAC,CAAC,CAAC,gBAAgB,IAAI,gBAAgB,CAAC,CAAC,CAAC;wBACzC,gBAAgB,CAAC,iCAAe,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC;oBAC5E,CAAC;gBACL,CAAC;aACJ;YACD,OAAO,EAAE,EAAE,cAAc,EAAE,SAAS,EAAE;SACzC,CAAC;aACD,OAAO,CAAC,UAAC,QAAa;YACnB,EAAE,CAAC,CAAC,gBAAgB,CAAC;gBACjB,gBAAgB,CAAC,iCAAe,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;YAErD,EAAE,CAAC,CAAC,cAAc,CAAC;gBACf,cAAc,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;QACvC,CAAC,CAAC;aACD,KAAK,CAAC,UAAC,QAAa;YACjB,EAAE,CAAC,CAAC,gBAAgB,CAAC;gBACjB,gBAAgB,CAAC,iCAAe,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;YAEhD,EAAE,CAAC,CAAC,cAAc,CAAC;gBACf,cAAc,CAAC,IAAI,EAAE,QAAQ,CAAC,KAAK,IAAI,QAAQ,CAAC,CAAC;QACzD,CAAC,CAAC,CAAC;IACP,CAAC;IACL,wBAAC;AAAD,CA1CA,AA0CC,IAAA;AAED,OAAO;KACF,MAAM,CAAC,kBAAkB,EAAE,EAAE,CAAC;KAC9B,OAAO,CAAC,eAAe,EAAE,iBAAiB,CAAC,CAAC;;;;ACjDjD,IAAY,eAIX;AAJD,WAAY,eAAe;IACvB,+DAAS,CAAA;IACT,+DAAS,CAAA;IACT,yDAAM,CAAA;AACV,CAAC,EAJW,eAAe,GAAf,uBAAe,KAAf,uBAAe,QAI1B;;;;;;;ACOD,IAAM,iBAAiB,GAAuB;IAC1C,OAAO,EAAE,cAAc;IACvB,IAAI,EAAE,UAAU;IAChB,IAAI,EAAE,WAAW;IACjB,QAAQ,EAAE,eAAe;CAC5B,CAAC;AAGF;IAAA;IAOA,CAAC;IAAD,uBAAC;AAAD,CAPA,AAOC,IAAA;AAUD;IAMI;QAJO,aAAQ,GAAW,CAAC,CAAC;IAIZ,CAAC;IAEV,wCAAU,GAAjB,UAAkB,OAAyB;QACvC,EAAE,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;YACnB,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC,YAAY,CAAC;QAClD,CAAC;IAEL,CAAC;IAEL,0BAAC;AAAD,CAfA,AAeC,IAAA;AAED,IAAM,kBAAkB,GAAG;IACvB,UAAU,EAAE,mBAAmB;IAC/B,QAAQ,EAAE,iBAAiB;IAC3B,WAAW,EAAE,sBAAsB;CACtC,CAAC;AAEF,OAAO;KACF,MAAM,CAAC,sBAAsB,EAAE,EAAE,CAAC;KAClC,SAAS,CAAC,gBAAgB,EAAE,kBAAkB,CAAC,CAAA;;;;ACnDpD,IAAM,mBAAmB,GAAyB;IAC9C,OAAO,EAAE,cAAc;IACvB,IAAI,EAAE,UAAU;IAChB,IAAI,EAAE,WAAW;CACpB,CAAA;AAQD;IAKI;QAHO,SAAI,GAAW,MAAM,CAAC;IAGd,CAAC;IAET,0CAAU,GAAjB,UAAkB,OAAO,IAAG,CAAC;IACjC,4BAAC;AAAD,CARA,AAQC,IAAA;AAED,IAAM,oBAAoB,GAAG;IACzB,QAAQ,EAAE,GAAG;IACb,OAAO,EAAE,IAAI;IACb,UAAU,EAAE,qBAAqB;IACjC,YAAY,EAAE,IAAI;IAClB,QAAQ,EAAE,mBAAmB;IAC7B,WAAW,EAAE,0BAA0B;CAC1C,CAAA;AAGD,OAAO;KACF,MAAM,CAAC,wBAAwB,EAAE,EAAE,CAAC;KACpC,SAAS,CAAC,iBAAiB,EAAE,oBAAoB,CAAC,CAAA;;;;ACzCvD;IAAA;IAIA,CAAC;IAAD,wBAAC;AAAD,CAJA,AAIC,IAAA;AAwBD,IAAM,kBAAkB,GAAwB;IAC5C,cAAc,EAAE,sBAAsB;IACtC,OAAO,EAAE,cAAc;IACvB,KAAK,EAAE,YAAY;IACnB,IAAI,EAAE,UAAU;IAChB,KAAK,EAAE,WAAW;IAClB,IAAI,EAAE,WAAW;IACjB,QAAQ,EAAE,cAAc;CAC3B,CAAA;AAED;IAAA;IAUA,CAAC;IAAD,wBAAC;AAAD,CAVA,AAUC,IAAA;AAGD;IAaI,8BAAY,MAAiB;QAFtB,UAAK,GAAW,IAAI,CAAC;IAEK,CAAC;IAE3B,sCAAO,GAAd;QAAA,iBAWC;QAVG,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;YACf,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;YACxB,IAAI,CAAC,WAAW,GAAG;gBACf,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,cAAQ,KAAI,CAAC,QAAQ,EAAE,CAAA,CAAC,CAAC,EAAE;gBACrD,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,cAAQ,KAAI,CAAC,OAAO,EAAE,CAAA,CAAC,CAAC,EAAE;aACtD,CAAC;YACF,IAAI,CAAC,YAAY,GAAG;gBAChB,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,cAAQ,KAAI,CAAC,OAAO,EAAE,CAAA,CAAC,CAAC,EAAE;aACtD,CAAC;QACN,CAAC;IACL,CAAC;IAEM,yCAAU,GAAjB,UAAkB,OAA0B;QACxC,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;YAChB,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,YAAY,CAAC;QAC5C,CAAC;QAED,EAAE,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC;YACnB,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC,YAAY,CAAC;QAClD,CAAC;QAED,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;YAChB,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,YAAY,CAAC;QAC5C,CAAC;IAEL,CAAC;IAEM,uCAAQ,GAAf;QACI,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC;YAAC,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,CAAC;IACjE,CAAC;IAEM,sCAAO,GAAd;QACI,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;YAAC,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;IAC/D,CAAC;IAEM,sCAAO,GAAd;QACI,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC;YAAC,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;IAC/D,CAAC;IAEL,2BAAC;AAAD,CAvDA,AAuDC,IAAA;AAED,IAAM,mBAAmB,GAAG;IACxB,UAAU,EAAE,oBAAoB;IAChC,QAAQ,EAAE,kBAAkB;IAC5B,WAAW,EAAE,wBAAwB;CACxC,CAAC;AAGF,OAAO;KACF,MAAM,CAAC,qBAAqB,EAAE,EAAE,CAAC;KACjC,SAAS,CAAC,eAAe,EAAE,mBAAmB,CAAC,CAAA;;ACxHpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pip-webui-files.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","export class ButtonsUpload {\r\n    public title: string;\r\n    public click: Function;\r\n}","{\r\n    function translateFilter($injector: angular.auto.IInjectorService) {\r\n        let pipTranslate: any = $injector.has('pipTranslate') \r\n            ? $injector.get('pipTranslate') : null;\r\n\r\n        return (key: string) => {\r\n            return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipFiles.Translate', [])\r\n        .filter('translate', translateFilter);\r\n}","import { ButtonsUpload } from \"../common/ButtonsUpload\";\r\n\r\ninterface IFileFailBindings {\r\n    [key: string]: any;\r\n\r\n    buttons: any,\r\n    name: any,\r\n    type: any,\r\n    error: any\r\n}\r\n\r\nconst FileFailBindings: IFileFailBindings = {\r\n    buttons: '<?pipButtons',\r\n    name: '<pipName',\r\n    type: '<?pipType',\r\n    error: '<pipError'\r\n}\r\n\r\nclass FileFailChanges implements ng.IOnChangesObject, IFileFailBindings {\r\n    [key: string]: ng.IChangesObject<any>;\r\n\r\n    buttons: ng.IChangesObject<ButtonsUpload[]>;\r\n    error: ng.IChangesObject<string>;\r\n    name: ng.IChangesObject<string>;\r\n    type: ng.IChangesObject<string>;\r\n}\r\n\r\n\r\ninterface IFileFailController {\r\n    name: string;\r\n    type: string;\r\n    error: string;\r\n    buttons: ButtonsUpload[];\r\n}\r\n\r\nclass FileFailController implements IFileFailController, IFileFailBindings {\r\n    public name: string;\r\n    public type: string;\r\n    public error: string;\r\n    public buttons: ButtonsUpload[];\r\n\r\n    constructor($scope: ng.IScope) {\r\n        \"ngInject\";\r\n        \r\n        // Init parameters\r\n        \r\n        $scope.$watch('error', (error: string) => {\r\n            this.error = error;\r\n        })\r\n    }\r\n}\r\n\r\nconst fileFailComponent: ng.IComponentOptions = {\r\n    controller: FileFailController,\r\n    bindings: FileFailBindings,\r\n    templateUrl: 'fail/FileFail.html'\r\n};\r\n\r\nangular\r\n    .module('pipFiles.FailUpload', [])\r\n    .component('pipFailUpload', fileFailComponent)\r\n","﻿\r\nimport './service/FileUploadService';\r\nimport './model/FileModel';\r\nimport './success/FileSuccess';\r\nimport './upload/FileUpload';\r\nimport './start/FileStart';\r\nimport './fail/FileFail';\r\nimport './select/FileSelect';\r\n\r\nangular\r\n    .module('pipFiles', [\r\n        'pipFiles.Service',\r\n        'pipFiles.Model',\r\n        'pipFiles.SuccessUpload',\r\n        'pipFiles.FileUpload',\r\n        'pipFiles.StartUpload',\r\n        'pipFiles.FailUpload',\r\n        'pipFiles.Select'\r\n    ]);\r\n","{\r\n    function fileModelLink(scope, element, attrs, $parse) {\r\n        let model = $parse(attrs.fileModel);\r\n        let modelSetter = model.assign;\r\n                \r\n        element.bind('change', () => {\r\n            scope.$apply(() => {\r\n                modelSetter(scope, element[0].files[0]);\r\n            });\r\n        });\r\n    }\r\n\r\n    function fileModelDirective($parse: ng.IParseProvider) {\r\n        \"ngInject\";\r\n\r\n        return {\r\n            restrict: 'A',\r\n            link: (scope: ng.IScope, element, attrs: ng.IAttributes) => { \r\n                fileModelLink(scope, element, attrs, $parse) \r\n            }\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipFiles.Model', [])\r\n        .directive('fileModel', fileModelDirective)\r\n}","{\r\n\r\n    interface IFileSelectController {\r\n        localFile: any;\r\n        onUploadButtonClick(): void;\r\n        onDeleteButtonClick(): void;\r\n    }\r\n\r\n    interface IFileSelectBindings {\r\n        [key: string]: any;\r\n\r\n        localFile: any,\r\n        change: any\r\n    }\r\n\r\n    const FileSelectBindings: IFileSelectBindings = {\r\n        localFile: '<pipLocalFile',\r\n        change: '<pipChange'\r\n    }\r\n\r\n    class FileSelectController implements IFileSelectController {\r\n        public localFile: any;\r\n        public change: Function;\r\n\r\n        constructor($scope: ng.IScope) {\r\n            \"ngInject\";\r\n            $scope.$watch('$ctrl.localFile', (item) => {\r\n                if (this.change) {\r\n                    this.change(this.localFile);\r\n                }\r\n            })\r\n        }\r\n\r\n        public onUploadButtonClick(): void {\r\n            $('#inp_file').click();\r\n        }\r\n\r\n        public onDeleteButtonClick(): void {\r\n            this.localFile = null;\r\n            let forml = document.getElementById('inp_form');\r\n            (<any>forml).reset();\r\n\r\n        }\r\n    }\r\n\r\n    const fileSelectDirective = {\r\n        restrict: 'E',\r\n        replace: true,\r\n        bindings: FileSelectBindings,\r\n        controller: FileSelectController,\r\n        templateUrl: 'select/FileSelect.html'\r\n    }\r\n\r\n    angular\r\n        .module('pipFiles.Select', [])\r\n        .component('pipFileSelect', fileSelectDirective)\r\n\r\n}\r\n","import { FileUploadState } from './FileUploadState';\r\nimport { IFileUploadService } from './IFileUploadService';\r\n\r\nclass FileUploadService implements IFileUploadService {\r\n\r\n    public constructor(private $http: ng.IHttpService) {\r\n        \"ngInject\";\r\n    }\r\n\r\n    public upload(file: any, url: string,\r\n        resultCallback?: (data: any, err: any) => void,\r\n        progressCallback?: (state: FileUploadState, progress: number) => void\r\n    ): void {\r\n\r\n        let fd: FormData = new FormData();\r\n        fd.append('file', file);\r\n\r\n        if (progressCallback)\r\n            progressCallback(FileUploadState.Uploading, 0);\r\n\r\n        this.$http.post(url, fd, <any>{\r\n            uploadEventHandlers: {\r\n                progress: (e: any) => {\r\n                    if (e.lengthComputable && progressCallback) {\r\n                        progressCallback(FileUploadState.Uploading, (e.loaded / e.total) * 100);\r\n                    }\r\n                }\r\n            },\r\n            headers: { 'Content-Type': undefined }\r\n        })\r\n        .success((response: any) => {\r\n            if (progressCallback)\r\n                progressCallback(FileUploadState.Completed, 100);\r\n\r\n            if (resultCallback)\r\n                resultCallback(response, null);\r\n        })\r\n        .error((response: any) => {\r\n            if (progressCallback)\r\n                progressCallback(FileUploadState.Failed, 0);\r\n\r\n            if (resultCallback)\r\n                resultCallback(null, response.Error || response);\r\n        });\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipFiles.Service', [])\r\n    .service('pipFileUpload', FileUploadService);\r\n","export enum FileUploadState {\r\n    Uploading,\r\n    Completed,\r\n    Failed\r\n}","import { ButtonsUpload } from \"../common/ButtonsUpload\";\r\n\r\ninterface IFileStartBindings {\r\n    [key: string]: any;\r\n\r\n    type: any\r\n    buttons: any,\r\n    name: any,\r\n    progress: any\r\n}\r\n\r\nconst FileStartBindings: IFileStartBindings = {\r\n    buttons: '<?pipButtons',\r\n    name: '<pipName',\r\n    type: '<?pipType',\r\n    progress: '<?pipProgress'\r\n};\r\n\r\n\r\nclass FileStartChanges implements ng.IOnChangesObject, IFileStartBindings {\r\n    [key: string]: ng.IChangesObject<any>;\r\n\r\n    buttons: ng.IChangesObject<ButtonsUpload[]>;\r\n    name: ng.IChangesObject<string>;\r\n    type: ng.IChangesObject<string>;\r\n    progress: ng.IChangesObject<number>;\r\n}\r\n\r\n\r\ninterface IFileStartController {\r\n    name: string;\r\n    type: string;\r\n    progress: number;\r\n    buttons: ButtonsUpload[];\r\n}\r\n\r\nclass FileStartController implements IFileStartController {\r\n    public name: string;\r\n    public progress: number = 0;\r\n    public type: string;\r\n    public buttons: ButtonsUpload[];\r\n\r\n    constructor() { }\r\n\r\n    public $onChanges(changes: FileStartChanges) {\r\n        if (changes.progress) {\r\n            this.progress = changes.progress.currentValue;\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nconst fileStartDirective = {\r\n    controller: FileStartController,\r\n    bindings: FileStartBindings,\r\n    templateUrl: 'start/FileStart.html'\r\n};\r\n\r\nangular\r\n    .module('pipFiles.StartUpload', [])\r\n    .component('pipStartUpload', fileStartDirective)\r\n","import { ButtonsUpload } from \"../common/ButtonsUpload\";\r\n\r\ninterface IFileSuccessBindings {\r\n    [key: string]: any;\r\n\r\n    type: any\r\n    buttons: any,\r\n    name: any\r\n}\r\n\r\nconst FileSuccessBindings: IFileSuccessBindings = {\r\n    buttons: '=?pipButtons',\r\n    name: '=pipName',\r\n    type: '=?pipType',\r\n}\r\n\r\ninterface IFileSuccessController {\r\n    name: string;\r\n    type: string;\r\n    buttons: ButtonsUpload[];\r\n}\r\n\r\nclass FileSuccessController implements IFileSuccessController, IFileSuccessBindings {\r\n    public name: string;\r\n    public type: string = 'file';\r\n    public buttons: ButtonsUpload[];\r\n\r\n    constructor() {}\r\n\r\n    public $onChanges(changes) {}\r\n}\r\n\r\nconst fileSuccessDirective = {\r\n    restrict: 'E',\r\n    replace: true,\r\n    controller: FileSuccessController,\r\n    controllerAs: 'vm',\r\n    bindings: FileSuccessBindings,\r\n    templateUrl: 'success/FileSuccess.html'\r\n}\r\n\r\n\r\nangular\r\n    .module('pipFiles.SuccessUpload', [])\r\n    .component('pipSuccesUpload', fileSuccessDirective)\r\n","import { IFileUploadService } from \"../service/IFileUploadService\";\r\nimport { ButtonsUpload } from \"../common/ButtonsUpload\";\r\n\r\nclass FileUploadButtons {\r\n    retry: Function;\r\n    cancel: Function;\r\n    abort: Function;\r\n}\r\n\r\ninterface IFileUploadController {\r\n    name: string;\r\n    type: string;\r\n    state: string;\r\n    progress: number;\r\n    onCancel(): void;\r\n    onRetry(): void;\r\n    onAbort(): void;\r\n}\r\n\r\ninterface IFileUploadBindings {\r\n    [key: string]: any;\r\n\r\n    buttonFunction: any,\r\n    buttons: any,\r\n    error: any,\r\n    name: any,\r\n    state: any,\r\n    type: any,\r\n    progress: any\r\n}\r\n\r\nconst FileUploadBindings: IFileUploadBindings = {\r\n    buttonFunction: '<?pipButtonFunctions',\r\n    buttons: '<?pipButtons',\r\n    error: '<?pipError',\r\n    name: '<pipName',\r\n    state: '<pipState',\r\n    type: '<?pipType',\r\n    progress: '<pipProgress'\r\n}\r\n\r\nclass FileUploadChanges implements ng.IOnChangesObject, IFileUploadBindings {\r\n    [key: string]: ng.IChangesObject<any>;\r\n\r\n    buttonFunction: ng.IChangesObject<FileUploadButtons>;\r\n    buttons: ng.IChangesObject<boolean>;\r\n    error: ng.IChangesObject<string>;\r\n    name: ng.IChangesObject<string>;\r\n    state: ng.IChangesObject<string>;\r\n    type: ng.IChangesObject<string>;\r\n    progress: ng.IChangesObject<number>;\r\n}\r\n\r\n\r\nclass FileUploadController implements IFileUploadController, IFileUploadBindings {\r\n    public buttonFunction: FileUploadButtons;\r\n    public uploadButtons: ButtonsUpload[];\r\n    public failButtons: ButtonsUpload[];\r\n    public startButtons: ButtonsUpload[];\r\n\r\n    public name: string;\r\n    public type: string;\r\n    public state: string;\r\n    public progress: number;\r\n    public buttons: boolean;\r\n    public error: string = null;\r\n\r\n    constructor($scope: ng.IScope) { }\r\n\r\n    public $onInit() {\r\n        if (this.buttons) {\r\n            this.uploadButtons = [];\r\n            this.failButtons = [\r\n                { title: 'Cancel', click: () => { this.onCancel() } },\r\n                { title: 'Retry', click: () => { this.onRetry() } }\r\n            ];\r\n            this.startButtons = [\r\n                { title: 'Abort', click: () => { this.onAbort() } }\r\n            ];\r\n        }\r\n    }\r\n\r\n    public $onChanges(changes: FileUploadChanges) {\r\n        if (changes.state) {\r\n            this.state = changes.state.currentValue;\r\n        }\r\n\r\n        if (changes.progress) {\r\n            this.progress = changes.progress.currentValue;\r\n        }\r\n\r\n        if (changes.error) {\r\n            this.error = changes.error.currentValue;\r\n        }\r\n\r\n    }\r\n\r\n    public onCancel(): void {\r\n        if (this.buttonFunction.cancel) this.buttonFunction.cancel();\r\n    }\r\n\r\n    public onRetry(): void {\r\n        if (this.buttonFunction.retry) this.buttonFunction.retry();\r\n    }\r\n\r\n    public onAbort() {\r\n        if (this.buttonFunction.abort) this.buttonFunction.abort();\r\n    }\r\n\r\n}\r\n\r\nconst fileUploadDirective = {\r\n    controller: FileUploadController,\r\n    bindings: FileUploadBindings,\r\n    templateUrl: 'upload/FileUpload.html'\r\n};\r\n\r\n\r\nangular\r\n    .module('pipFiles.FileUpload', [])\r\n    .component('pipFileUpload', fileUploadDirective)\r\n","(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('fail/FileFail.html',\n    '<div class=\"pip-files pip-progress-files\"><div class=\"pip-body pip-scroll pip-progress-body\"><div class=\"layout-row\"><div class=\"pip-progress-icon color-badge-bg\"><md-icon md-svg-icon=\"icons:cross\"></md-icon></div><div class=\"pip-progress-content\"><h3 class=\"pip-title\">Uploading {{$ctrl.type}} failed with errors!</h3><div class=\"color-secondary-text pip-subtitle\">{{$ctrl.name}}</div><div class=\"color-error pip-error\">{{$ctrl.error}}</div></div></div></div><div class=\"pip-footer layout-row layout-align-end-center\" ng-if=\"$ctrl.buttons && $ctrl.buttons.length > 0\"><div><md-button class=\"md-accent\" ng-repeat=\"fail in $ctrl.buttons\" ng-click=\"fail.click()\">{{::fail.title}}</md-button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('select/FileSelect.html',\n    '<div class=\"pip-file-select\"><form id=\"inp_form\" class=\"pip-hidden-form\"><input type=\"file\" file-model=\"$ctrl.localFile\" id=\"inp_file\" ng-model=\"$ctrl.localFile\"></form><md-button class=\"md-raised md-accent pip-button\" ng-click=\"$ctrl.onUploadButtonClick()\" ng-if=\"!$ctrl.localFile\">Choose File</md-button><div ng-if=\"$ctrl.localFile.name\" class=\"pip-file layout-row layout-align-start-center\"><md-icon md-svg-icon=\"icons:document\" class=\"pip-icon\"></md-icon><div class=\"flex\"><div class=\"text-body2 text-overflow\">{{$ctrl.localFile.name}}</div><div ng-if=\"$ctrl.localFile.size\" class=\"color-secondary-text\">{{$ctrl.localFile.size}}</div></div><md-button ng-click=\"$ctrl.onDeleteButtonClick()\" class=\"md-icon-button\"><md-icon md-svg-icon=\"icons:cross-circle\"></md-icon></md-button></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('start/FileStart.html',\n    '<div class=\"pip-files pip-progress-files\"><div class=\"pip-body pip-scroll pip-progress-body\"><div class=\"layout-row\"><div class=\"pip-progress-icon bb-orange\"><md-icon md-svg-icon=\"icons:play\"></md-icon></div><div class=\"pip-progress-content\"><h3 class=\"pip-title\">Uploading {{::$ctrl.type}}</h3><div class=\"color-secondary-text pip-subtitle\">{{$ctrl.name}}</div><div><md-progress-linear md-mode=\"determinate\" class=\"md-accent\" value=\"{{$ctrl.progress}}\" ng-if=\"$ctrl.progress < 100\"></md-progress-linear><md-progress-linear md-mode=\"indeterminate\" class=\"md-accent\" ng-if=\"$ctrl.progress == 100\"></md-progress-linear></div></div></div></div><div class=\"pip-footer layout-row layout-align-end-center\" ng-if=\"$ctrl.buttons\"><div><md-button class=\"md-accent\" ng-repeat=\"start in $ctrl.buttons\" ng-click=\"start.click()\">{{start.title}}</md-button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('success/FileSuccess.html',\n    '<div class=\"pip-files pip-progress-files\"><div class=\"pip-body pip-scroll pip-progress-body\"><div class=\"layout-row\"><div class=\"pip-progress-icon bb-green\"><md-icon md-svg-icon=\"icons:check\"></md-icon></div><div class=\"pip-progress-content\"><h3 class=\"pip-title\">Uploaded {{::vm.type}} successfully!</h3><div class=\"color-secondary-text pip-subtitle\">{{vm.name}}</div></div></div></div><div class=\"pip-footer layout-row layout-align-end-center\" ng-if=\"vm.buttons && vm.buttons.length > 0\"><div><md-button class=\"md-accent\" ng-repeat=\"start in vm.buttons\" ng-click=\"start.click()\">{{start.title}}</md-button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('upload/FileUpload.html',\n    '<div><pip-succes-upload ng-if=\"$ctrl.state == 1 && (!$ctrl.buttons || $ctrl.uploadButtons)\" pip-name=\"$ctrl.name\" pip-type=\"$ctrl.type\" pip-buttons=\"$ctrl.buttons\"></pip-succes-upload><pip-fail-upload ng-if=\"$ctrl.state == 2\" pip-name=\"$ctrl.name\" pip-type=\"$ctrl.type\" pip-error=\"$ctrl.error\" pip-buttons=\"$ctrl.failButtons\"></pip-fail-upload><pip-start-upload ng-if=\"$ctrl.state == 0\" pip-name=\"$ctrl.name\" pip-type=\"$ctrl.type\" pip-progress=\"$ctrl.progress\" pip-buttons=\"$ctrl.startButtons\"></pip-start-upload></div>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-files-html.min.js.map\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvY29tbW9uL0J1dHRvbnNVcGxvYWQudHMiLCJzcmMvZGVwZW5kZW5jaWVzL1RyYW5zbGF0ZUZpbHRlci50cyIsInNyYy9mYWlsL0ZpbGVGYWlsLnRzIiwic3JjL2luZGV4LnRzIiwic3JjL21vZGVsL0ZpbGVNb2RlbC50cyIsInNyYy9zZWxlY3QvRmlsZVNlbGVjdC50cyIsInNyYy9zZXJ2aWNlL0ZpbGVVcGxvYWRTZXJ2aWNlLnRzIiwic3JjL3NlcnZpY2UvRmlsZVVwbG9hZFN0YXRlLnRzIiwic3JjL3N0YXJ0L0ZpbGVTdGFydC50cyIsInNyYy9zdWNjZXNzL0ZpbGVTdWNjZXNzLnRzIiwic3JjL3VwbG9hZC9GaWxlVXBsb2FkLnRzIiwidGVtcC9waXAtd2VidWktZmlsZXMtaHRtbC5taW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBO0lBQUE7SUFHQSxDQUFDO0lBQUQsb0JBQUM7QUFBRCxDQUhBLEFBR0MsSUFBQTtBQUhZLHNDQUFhOztBQ0ExQixDQUFDO0lBQ0cseUJBQXlCLFNBQXdDO1FBQzdELElBQUksWUFBWSxHQUFRLFNBQVMsQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDO2NBQy9DLFNBQVMsQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBRTNDLE1BQU0sQ0FBQyxVQUFDLEdBQVc7WUFDZixNQUFNLENBQUMsWUFBWSxHQUFJLFlBQVksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUNwRSxDQUFDLENBQUE7SUFDTCxDQUFDO0lBRUQsT0FBTztTQUNGLE1BQU0sQ0FBQyxvQkFBb0IsRUFBRSxFQUFFLENBQUM7U0FDaEMsTUFBTSxDQUFDLFdBQVcsRUFBRSxlQUFlLENBQUMsQ0FBQztBQUM5QyxDQUFDOzs7O0FDRkQsSUFBTSxnQkFBZ0IsR0FBc0I7SUFDeEMsT0FB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QkFBbUIsR0FBRztJQUN4QixVQUFVLEVBQUUsb0JBQW9CO0lBQ2hDLFFBQVEsRUFBRSxrQkFBa0I7SUFDNUIsV0FBVyxFQUFFLHdCQUF3QjtDQUN4QyxDQUFDO0FBR0YsT0FBTztLQUNGLE1BQU0sQ0FBQyxxQkFBcUIsRUFBRSxFQUFFLENBQUM7S0FDakMsU0FBUyxDQUFDLGVBQWUsRUFBRSxtQkFBbUIsQ0FBQyxDQUFBOztBQ3hIcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJleHBvcnQgY2xhc3MgQnV0dG9uc1VwbG9hZCB7XHJcbiAgICBwdWJsaWMgdGl0bGU6IHN0cmluZztcclxuICAgIHB1YmxpYyBjbGljazogRnVuY3Rpb247XHJcbn0iLCJ7XHJcbiAgICBmdW5jdGlvbiB0cmFuc2xhdGVGaWx0ZXIoJGluamVjdG9yOiBhbmd1bGFyLmF1dG8uSUluamVjdG9yU2VydmljZSkge1xyXG4gICAgICAgIGxldCBwaXBUcmFuc2xhdGU6IGFueSA9ICRpbmplY3Rvci5oYXMoJ3BpcFRyYW5zbGF0ZScpIFxyXG4gICAgICAgICAgICA/ICRpbmplY3Rvci5nZXQoJ3BpcFRyYW5zbGF0ZScpIDogbnVsbDtcclxuXHJcbiAgICAgICAgcmV0dXJuIChrZXk6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcGlwVHJhbnNsYXRlICA/IHBpcFRyYW5zbGF0ZS50cmFuc2xhdGUoa2V5KSB8fCBrZXkgOiBrZXk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdwaXBGaWxlcy5UcmFuc2xhdGUnLCBbXSlcclxuICAgICAgICAuZmlsdGVyKCd0cmFuc2xhdGUnLCB0cmFuc2xhdGVGaWx0ZXIpO1xyXG59IiwiaW1wb3J0IHsgQnV0dG9uc1VwbG9hZCB9IGZyb20gXCIuLi9jb21tb24vQnV0dG9uc1VwbG9hZFwiO1xyXG5cclxuaW50ZXJmYWNlIElGaWxlRmFpbEJpbmRpbmdzIHtcclxuICAgIFtrZXk6IHN0cmluZ106IGFueTtcclxuXHJcbiAgICBidXR0b25zOiBhbnksXHJcbiAgICBuYW1lOiBhbnksXHJcbiAgICB0eXBlOiBhbnksXHJcbiAgICBlcnJvcjogYW55XHJcbn1cclxuXHJcbmNvbnN0IEZpbGVGYWlsQmluZGluZ3M6IElGaWxlRmFpbEJpbmRpbmdzID0ge1xyXG4gICAgYnV0dG9uczogJzw/cGlwQnV0dG9ucycsXHJcbiAgICBuYW1lOiAnPHBpcE5hbWUnLFxyXG4gICAgdHlwZTogJzw/cGlwVHlwZScsXHJcbiAgICBlcnJvcjogJzxwaXBFcnJvcidcclxufVxyXG5cclxuY2xhc3MgRmlsZUZhaWxDaGFuZ2VzIGltcGxlbWVudHMgbmcuSU9uQ2hhbmdlc09iamVjdCwgSUZpbGVGYWlsQmluZGluZ3Mge1xyXG4gICAgW2tleTogc3RyaW5nXTogbmcuSUNoYW5nZXNPYmplY3Q8YW55PjtcclxuXHJcbiAgICBidXR0b25zOiBuZy5JQ2hhbmdlc09iamVjdDxCdXR0b25zVXBsb2FkW10+O1xyXG4gICAgZXJyb3I6IG5nLklDaGFuZ2VzT2JqZWN0PHN0cmluZz47XHJcbiAgICBuYW1lOiBuZy5JQ2hhbmdlc09iamVjdDxzdHJpbmc+O1xyXG4gICAgdHlwZTogbmcuSUNoYW5nZXNPYmplY3Q8c3RyaW5nPjtcclxufVxyXG5cclxuXHJcbmludGVyZmFjZSBJRmlsZUZhaWxDb250cm9sbGVyIHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHR5cGU6IHN0cmluZztcclxuICAgIGVycm9yOiBzdHJpbmc7XHJcbiAgICBidXR0b25zOiBCdXR0b25zVXBsb2FkW107XHJcbn1cclxuXHJcbmNsYXNzIEZpbGVGYWlsQ29udHJvbGxlciBpbXBsZW1lbnRzIElGaWxlRmFpbENvbnRyb2xsZXIsIElGaWxlRmFpbEJpbmRpbmdzIHtcclxuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgdHlwZTogc3RyaW5nO1xyXG4gICAgcHVibGljIGVycm9yOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgYnV0dG9uczogQnV0dG9uc1VwbG9hZFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCRzY29wZTogbmcuSVNjb3BlKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEluaXQgcGFyYW1ldGVyc1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS4kd2F0Y2goJ2Vycm9yJywgKGVycm9yOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGZpbGVGYWlsQ29tcG9uZW50OiBuZy5JQ29tcG9uZW50T3B0aW9ucyA9IHtcclxuICAgIGNvbnRyb2xsZXI6IEZpbGVGYWlsQ29udHJvbGxlcixcclxuICAgIGJpbmRpbmdzOiBGaWxlRmFpbEJpbmRpbmdzLFxyXG4gICAgdGVtcGxhdGVVcmw6ICdmYWlsL0ZpbGVGYWlsLmh0bWwnXHJcbn07XHJcblxyXG5hbmd1bGFyXHJcbiAgICAubW9kdWxlKCdwaXBGaWxlcy5GYWlsVXBsb2FkJywgW10pXHJcbiAgICAuY29tcG9uZW50KCdwaXBGYWlsVXBsb2FkJywgZmlsZUZhaWxDb21wb25lbnQpXHJcbiIsIu+7v1xyXG5pbXBvcnQgJy4vc2VydmljZS9GaWxlVXBsb2FkU2VydmljZSc7XHJcbmltcG9ydCAnLi9tb2RlbC9GaWxlTW9kZWwnO1xyXG5pbXBvcnQgJy4vc3VjY2Vzcy9GaWxlU3VjY2Vzcyc7XHJcbmltcG9ydCAnLi91cGxvYWQvRmlsZVVwbG9hZCc7XHJcbmltcG9ydCAnLi9zdGFydC9GaWxlU3RhcnQnO1xyXG5pbXBvcnQgJy4vZmFpbC9GaWxlRmFpbCc7XHJcbmltcG9ydCAnLi9zZWxlY3QvRmlsZVNlbGVjdCc7XHJcblxyXG5hbmd1bGFyXHJcbiAgICAubW9kdWxlKCdwaXBGaWxlcycsIFtcclxuICAgICAgICAncGlwRmlsZXMuU2VydmljZScsXHJcbiAgICAgICAgJ3BpcEZpbGVzLk1vZGVsJyxcclxuICAgICAgICAncGlwRmlsZXMuU3VjY2Vzc1VwbG9hZCcsXHJcbiAgICAgICAgJ3BpcEZpbGVzLkZpbGVVcGxvYWQnLFxyXG4gICAgICAgICdwaXBGaWxlcy5TdGFydFVwbG9hZCcsXHJcbiAgICAgICAgJ3BpcEZpbGVzLkZhaWxVcGxvYWQnLFxyXG4gICAgICAgICdwaXBGaWxlcy5TZWxlY3QnXHJcbiAgICBdKTtcclxuIiwie1xyXG4gICAgZnVuY3Rpb24gZmlsZU1vZGVsTGluayhzY29wZSwgZWxlbWVudCwgYXR0cnMsICRwYXJzZSkge1xyXG4gICAgICAgIGxldCBtb2RlbCA9ICRwYXJzZShhdHRycy5maWxlTW9kZWwpO1xyXG4gICAgICAgIGxldCBtb2RlbFNldHRlciA9IG1vZGVsLmFzc2lnbjtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIGVsZW1lbnQuYmluZCgnY2hhbmdlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBzY29wZS4kYXBwbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbW9kZWxTZXR0ZXIoc2NvcGUsIGVsZW1lbnRbMF0uZmlsZXNbMF0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBmaWxlTW9kZWxEaXJlY3RpdmUoJHBhcnNlOiBuZy5JUGFyc2VQcm92aWRlcikge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgbGluazogKHNjb3BlOiBuZy5JU2NvcGUsIGVsZW1lbnQsIGF0dHJzOiBuZy5JQXR0cmlidXRlcykgPT4geyBcclxuICAgICAgICAgICAgICAgIGZpbGVNb2RlbExpbmsoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCAkcGFyc2UpIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgncGlwRmlsZXMuTW9kZWwnLCBbXSlcclxuICAgICAgICAuZGlyZWN0aXZlKCdmaWxlTW9kZWwnLCBmaWxlTW9kZWxEaXJlY3RpdmUpXHJcbn0iLCJ7XHJcblxyXG4gICAgaW50ZXJmYWNlIElGaWxlU2VsZWN0Q29udHJvbGxlciB7XHJcbiAgICAgICAgbG9jYWxGaWxlOiBhbnk7XHJcbiAgICAgICAgb25VcGxvYWRCdXR0b25DbGljaygpOiB2b2lkO1xyXG4gICAgICAgIG9uRGVsZXRlQnV0dG9uQ2xpY2soKTogdm9pZDtcclxuICAgIH1cclxuXHJcbiAgICBpbnRlcmZhY2UgSUZpbGVTZWxlY3RCaW5kaW5ncyB7XHJcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55O1xyXG5cclxuICAgICAgICBsb2NhbEZpbGU6IGFueSxcclxuICAgICAgICBjaGFuZ2U6IGFueVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IEZpbGVTZWxlY3RCaW5kaW5nczogSUZpbGVTZWxlY3RCaW5kaW5ncyA9IHtcclxuICAgICAgICBsb2NhbEZpbGU6ICc8cGlwTG9jYWxGaWxlJyxcclxuICAgICAgICBjaGFuZ2U6ICc8cGlwQ2hhbmdlJ1xyXG4gICAgfVxyXG5cclxuICAgIGNsYXNzIEZpbGVTZWxlY3RDb250cm9sbGVyIGltcGxlbWVudHMgSUZpbGVTZWxlY3RDb250cm9sbGVyIHtcclxuICAgICAgICBwdWJsaWMgbG9jYWxGaWxlOiBhbnk7XHJcbiAgICAgICAgcHVibGljIGNoYW5nZTogRnVuY3Rpb247XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKCRzY29wZTogbmcuSVNjb3BlKSB7XHJcbiAgICAgICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAgICAgJHNjb3BlLiR3YXRjaCgnJGN0cmwubG9jYWxGaWxlJywgKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlKHRoaXMubG9jYWxGaWxlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvblVwbG9hZEJ1dHRvbkNsaWNrKCk6IHZvaWQge1xyXG4gICAgICAgICAgICAkKCcjaW5wX2ZpbGUnKS5jbGljaygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9uRGVsZXRlQnV0dG9uQ2xpY2soKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxGaWxlID0gbnVsbDtcclxuICAgICAgICAgICAgbGV0IGZvcm1sID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucF9mb3JtJyk7XHJcbiAgICAgICAgICAgICg8YW55PmZvcm1sKS5yZXNldCgpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZmlsZVNlbGVjdERpcmVjdGl2ZSA9IHtcclxuICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgIHJlcGxhY2U6IHRydWUsXHJcbiAgICAgICAgYmluZGluZ3M6IEZpbGVTZWxlY3RCaW5kaW5ncyxcclxuICAgICAgICBjb250cm9sbGVyOiBGaWxlU2VsZWN0Q29udHJvbGxlcixcclxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3NlbGVjdC9GaWxlU2VsZWN0Lmh0bWwnXHJcbiAgICB9XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ3BpcEZpbGVzLlNlbGVjdCcsIFtdKVxyXG4gICAgICAgIC5jb21wb25lbnQoJ3BpcEZpbGVTZWxlY3QnLCBmaWxlU2VsZWN0RGlyZWN0aXZlKVxyXG5cclxufVxyXG4iLCJpbXBvcnQgeyBGaWxlVXBsb2FkU3RhdGUgfSBmcm9tICcuL0ZpbGVVcGxvYWRTdGF0ZSc7XHJcbmltcG9ydCB7IElGaWxlVXBsb2FkU2VydmljZSB9IGZyb20gJy4vSUZpbGVVcGxvYWRTZXJ2aWNlJztcclxuXHJcbmNsYXNzIEZpbGVVcGxvYWRTZXJ2aWNlIGltcGxlbWVudHMgSUZpbGVVcGxvYWRTZXJ2aWNlIHtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSAkaHR0cDogbmcuSUh0dHBTZXJ2aWNlKSB7XHJcbiAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGxvYWQoZmlsZTogYW55LCB1cmw6IHN0cmluZyxcclxuICAgICAgICByZXN1bHRDYWxsYmFjaz86IChkYXRhOiBhbnksIGVycjogYW55KSA9PiB2b2lkLFxyXG4gICAgICAgIHByb2dyZXNzQ2FsbGJhY2s/OiAoc3RhdGU6IEZpbGVVcGxvYWRTdGF0ZSwgcHJvZ3Jlc3M6IG51bWJlcikgPT4gdm9pZFxyXG4gICAgKTogdm9pZCB7XHJcblxyXG4gICAgICAgIGxldCBmZDogRm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICBmZC5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcclxuXHJcbiAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spXHJcbiAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2soRmlsZVVwbG9hZFN0YXRlLlVwbG9hZGluZywgMCk7XHJcblxyXG4gICAgICAgIHRoaXMuJGh0dHAucG9zdCh1cmwsIGZkLCA8YW55PntcclxuICAgICAgICAgICAgdXBsb2FkRXZlbnRIYW5kbGVyczoge1xyXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5sZW5ndGhDb21wdXRhYmxlICYmIHByb2dyZXNzQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayhGaWxlVXBsb2FkU3RhdGUuVXBsb2FkaW5nLCAoZS5sb2FkZWQgLyBlLnRvdGFsKSAqIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiB1bmRlZmluZWQgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnN1Y2Nlc3MoKHJlc3BvbnNlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spXHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKEZpbGVVcGxvYWRTdGF0ZS5Db21wbGV0ZWQsIDEwMCk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdWx0Q2FsbGJhY2spXHJcbiAgICAgICAgICAgICAgICByZXN1bHRDYWxsYmFjayhyZXNwb25zZSwgbnVsbCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuZXJyb3IoKHJlc3BvbnNlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaWYgKHByb2dyZXNzQ2FsbGJhY2spXHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrKEZpbGVVcGxvYWRTdGF0ZS5GYWlsZWQsIDApO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdENhbGxiYWNrKVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0Q2FsbGJhY2sobnVsbCwgcmVzcG9uc2UuRXJyb3IgfHwgcmVzcG9uc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5hbmd1bGFyXHJcbiAgICAubW9kdWxlKCdwaXBGaWxlcy5TZXJ2aWNlJywgW10pXHJcbiAgICAuc2VydmljZSgncGlwRmlsZVVwbG9hZCcsIEZpbGVVcGxvYWRTZXJ2aWNlKTtcclxuIiwiZXhwb3J0IGVudW0gRmlsZVVwbG9hZFN0YXRlIHtcclxuICAgIFVwbG9hZGluZyxcclxuICAgIENvbXBsZXRlZCxcclxuICAgIEZhaWxlZFxyXG59IiwiaW1wb3J0IHsgQnV0dG9uc1VwbG9hZCB9IGZyb20gXCIuLi9jb21tb24vQnV0dG9uc1VwbG9hZFwiO1xyXG5cclxuaW50ZXJmYWNlIElGaWxlU3RhcnRCaW5kaW5ncyB7XHJcbiAgICBba2V5OiBzdHJpbmddOiBhbnk7XHJcblxyXG4gICAgdHlwZTogYW55XHJcbiAgICBidXR0b25zOiBhbnksXHJcbiAgICBuYW1lOiBhbnksXHJcbiAgICBwcm9ncmVzczogYW55XHJcbn1cclxuXHJcbmNvbnN0IEZpbGVTdGFydEJpbmRpbmdzOiBJRmlsZVN0YXJ0QmluZGluZ3MgPSB7XHJcbiAgICBidXR0b25zOiAnPD9waXBCdXR0b25zJyxcclxuICAgIG5hbWU6ICc8cGlwTmFtZScsXHJcbiAgICB0eXBlOiAnPD9waXBUeXBlJyxcclxuICAgIHByb2dyZXNzOiAnPD9waXBQcm9ncmVzcydcclxufTtcclxuXHJcblxyXG5jbGFzcyBGaWxlU3RhcnRDaGFuZ2VzIGltcGxlbWVudHMgbmcuSU9uQ2hhbmdlc09iamVjdCwgSUZpbGVTdGFydEJpbmRpbmdzIHtcclxuICAgIFtrZXk6IHN0cmluZ106IG5nLklDaGFuZ2VzT2JqZWN0PGFueT47XHJcblxyXG4gICAgYnV0dG9uczogbmcuSUNoYW5nZXNPYmplY3Q8QnV0dG9uc1VwbG9hZFtdPjtcclxuICAgIG5hbWU6IG5nLklDaGFuZ2VzT2JqZWN0PHN0cmluZz47XHJcbiAgICB0eXBlOiBuZy5JQ2hhbmdlc09iamVjdDxzdHJpbmc+O1xyXG4gICAgcHJvZ3Jlc3M6IG5nLklDaGFuZ2VzT2JqZWN0PG51bWJlcj47XHJcbn1cclxuXHJcblxyXG5pbnRlcmZhY2UgSUZpbGVTdGFydENvbnRyb2xsZXIge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgdHlwZTogc3RyaW5nO1xyXG4gICAgcHJvZ3Jlc3M6IG51bWJlcjtcclxuICAgIGJ1dHRvbnM6IEJ1dHRvbnNVcGxvYWRbXTtcclxufVxyXG5cclxuY2xhc3MgRmlsZVN0YXJ0Q29udHJvbGxlciBpbXBsZW1lbnRzIElGaWxlU3RhcnRDb250cm9sbGVyIHtcclxuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgcHJvZ3Jlc3M6IG51bWJlciA9IDA7XHJcbiAgICBwdWJsaWMgdHlwZTogc3RyaW5nO1xyXG4gICAgcHVibGljIGJ1dHRvbnM6IEJ1dHRvbnNVcGxvYWRbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxyXG5cclxuICAgIHB1YmxpYyAkb25DaGFuZ2VzKGNoYW5nZXM6IEZpbGVTdGFydENoYW5nZXMpIHtcclxuICAgICAgICBpZiAoY2hhbmdlcy5wcm9ncmVzcykge1xyXG4gICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gY2hhbmdlcy5wcm9ncmVzcy5jdXJyZW50VmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmNvbnN0IGZpbGVTdGFydERpcmVjdGl2ZSA9IHtcclxuICAgIGNvbnRyb2xsZXI6IEZpbGVTdGFydENvbnRyb2xsZXIsXHJcbiAgICBiaW5kaW5nczogRmlsZVN0YXJ0QmluZGluZ3MsXHJcbiAgICB0ZW1wbGF0ZVVybDogJ3N0YXJ0L0ZpbGVTdGFydC5odG1sJ1xyXG59O1xyXG5cclxuYW5ndWxhclxyXG4gICAgLm1vZHVsZSgncGlwRmlsZXMuU3RhcnRVcGxvYWQnLCBbXSlcclxuICAgIC5jb21wb25lbnQoJ3BpcFN0YXJ0VXBsb2FkJywgZmlsZVN0YXJ0RGlyZWN0aXZlKVxyXG4iLCJpbXBvcnQgeyBCdXR0b25zVXBsb2FkIH0gZnJvbSBcIi4uL2NvbW1vbi9CdXR0b25zVXBsb2FkXCI7XHJcblxyXG5pbnRlcmZhY2UgSUZpbGVTdWNjZXNzQmluZGluZ3Mge1xyXG4gICAgW2tleTogc3RyaW5nXTogYW55O1xyXG5cclxuICAgIHR5cGU6IGFueVxyXG4gICAgYnV0dG9uczogYW55LFxyXG4gICAgbmFtZTogYW55XHJcbn1cclxuXHJcbmNvbnN0IEZpbGVTdWNjZXNzQmluZGluZ3M6IElGaWxlU3VjY2Vzc0JpbmRpbmdzID0ge1xyXG4gICAgYnV0dG9uczogJz0/cGlwQnV0dG9ucycsXHJcbiAgICBuYW1lOiAnPXBpcE5hbWUnLFxyXG4gICAgdHlwZTogJz0/cGlwVHlwZScsXHJcbn1cclxuXHJcbmludGVyZmFjZSBJRmlsZVN1Y2Nlc3NDb250cm9sbGVyIHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIHR5cGU6IHN0cmluZztcclxuICAgIGJ1dHRvbnM6IEJ1dHRvbnNVcGxvYWRbXTtcclxufVxyXG5cclxuY2xhc3MgRmlsZVN1Y2Nlc3NDb250cm9sbGVyIGltcGxlbWVudHMgSUZpbGVTdWNjZXNzQ29udHJvbGxlciwgSUZpbGVTdWNjZXNzQmluZGluZ3Mge1xyXG4gICAgcHVibGljIG5hbWU6IHN0cmluZztcclxuICAgIHB1YmxpYyB0eXBlOiBzdHJpbmcgPSAnZmlsZSc7XHJcbiAgICBwdWJsaWMgYnV0dG9uczogQnV0dG9uc1VwbG9hZFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgICBwdWJsaWMgJG9uQ2hhbmdlcyhjaGFuZ2VzKSB7fVxyXG59XHJcblxyXG5jb25zdCBmaWxlU3VjY2Vzc0RpcmVjdGl2ZSA9IHtcclxuICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgY29udHJvbGxlcjogRmlsZVN1Y2Nlc3NDb250cm9sbGVyLFxyXG4gICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgYmluZGluZ3M6IEZpbGVTdWNjZXNzQmluZGluZ3MsXHJcbiAgICB0ZW1wbGF0ZVVybDogJ3N1Y2Nlc3MvRmlsZVN1Y2Nlc3MuaHRtbCdcclxufVxyXG5cclxuXHJcbmFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ3BpcEZpbGVzLlN1Y2Nlc3NVcGxvYWQnLCBbXSlcclxuICAgIC5jb21wb25lbnQoJ3BpcFN1Y2Nlc1VwbG9hZCcsIGZpbGVTdWNjZXNzRGlyZWN0aXZlKVxyXG4iLCJpbXBvcnQgeyBJRmlsZVVwbG9hZFNlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZS9JRmlsZVVwbG9hZFNlcnZpY2VcIjtcclxuaW1wb3J0IHsgQnV0dG9uc1VwbG9hZCB9IGZyb20gXCIuLi9jb21tb24vQnV0dG9uc1VwbG9hZFwiO1xyXG5cclxuY2xhc3MgRmlsZVVwbG9hZEJ1dHRvbnMge1xyXG4gICAgcmV0cnk6IEZ1bmN0aW9uO1xyXG4gICAgY2FuY2VsOiBGdW5jdGlvbjtcclxuICAgIGFib3J0OiBGdW5jdGlvbjtcclxufVxyXG5cclxuaW50ZXJmYWNlIElGaWxlVXBsb2FkQ29udHJvbGxlciB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICB0eXBlOiBzdHJpbmc7XHJcbiAgICBzdGF0ZTogc3RyaW5nO1xyXG4gICAgcHJvZ3Jlc3M6IG51bWJlcjtcclxuICAgIG9uQ2FuY2VsKCk6IHZvaWQ7XHJcbiAgICBvblJldHJ5KCk6IHZvaWQ7XHJcbiAgICBvbkFib3J0KCk6IHZvaWQ7XHJcbn1cclxuXHJcbmludGVyZmFjZSBJRmlsZVVwbG9hZEJpbmRpbmdzIHtcclxuICAgIFtrZXk6IHN0cmluZ106IGFueTtcclxuXHJcbiAgICBidXR0b25GdW5jdGlvbjogYW55LFxyXG4gICAgYnV0dG9uczogYW55LFxyXG4gICAgZXJyb3I6IGFueSxcclxuICAgIG5hbWU6IGFueSxcclxuICAgIHN0YXRlOiBhbnksXHJcbiAgICB0eXBlOiBhbnksXHJcbiAgICBwcm9ncmVzczogYW55XHJcbn1cclxuXHJcbmNvbnN0IEZpbGVVcGxvYWRCaW5kaW5nczogSUZpbGVVcGxvYWRCaW5kaW5ncyA9IHtcclxuICAgIGJ1dHRvbkZ1bmN0aW9uOiAnPD9waXBCdXR0b25GdW5jdGlvbnMnLFxyXG4gICAgYnV0dG9uczogJzw/cGlwQnV0dG9ucycsXHJcbiAgICBlcnJvcjogJzw/cGlwRXJyb3InLFxyXG4gICAgbmFtZTogJzxwaXBOYW1lJyxcclxuICAgIHN0YXRlOiAnPHBpcFN0YXRlJyxcclxuICAgIHR5cGU6ICc8P3BpcFR5cGUnLFxyXG4gICAgcHJvZ3Jlc3M6ICc8cGlwUHJvZ3Jlc3MnXHJcbn1cclxuXHJcbmNsYXNzIEZpbGVVcGxvYWRDaGFuZ2VzIGltcGxlbWVudHMgbmcuSU9uQ2hhbmdlc09iamVjdCwgSUZpbGVVcGxvYWRCaW5kaW5ncyB7XHJcbiAgICBba2V5OiBzdHJpbmddOiBuZy5JQ2hhbmdlc09iamVjdDxhbnk+O1xyXG5cclxuICAgIGJ1dHRvbkZ1bmN0aW9uOiBuZy5JQ2hhbmdlc09iamVjdDxGaWxlVXBsb2FkQnV0dG9ucz47XHJcbiAgICBidXR0b25zOiBuZy5JQ2hhbmdlc09iamVjdDxib29sZWFuPjtcclxuICAgIGVycm9yOiBuZy5JQ2hhbmdlc09iamVjdDxzdHJpbmc+O1xyXG4gICAgbmFtZTogbmcuSUNoYW5nZXNPYmplY3Q8c3RyaW5nPjtcclxuICAgIHN0YXRlOiBuZy5JQ2hhbmdlc09iamVjdDxzdHJpbmc+O1xyXG4gICAgdHlwZTogbmcuSUNoYW5nZXNPYmplY3Q8c3RyaW5nPjtcclxuICAgIHByb2dyZXNzOiBuZy5JQ2hhbmdlc09iamVjdDxudW1iZXI+O1xyXG59XHJcblxyXG5cclxuY2xhc3MgRmlsZVVwbG9hZENvbnRyb2xsZXIgaW1wbGVtZW50cyBJRmlsZVVwbG9hZENvbnRyb2xsZXIsIElGaWxlVXBsb2FkQmluZGluZ3Mge1xyXG4gICAgcHVibGljIGJ1dHRvbkZ1bmN0aW9uOiBGaWxlVXBsb2FkQnV0dG9ucztcclxuICAgIHB1YmxpYyB1cGxvYWRCdXR0b25zOiBCdXR0b25zVXBsb2FkW107XHJcbiAgICBwdWJsaWMgZmFpbEJ1dHRvbnM6IEJ1dHRvbnNVcGxvYWRbXTtcclxuICAgIHB1YmxpYyBzdGFydEJ1dHRvbnM6IEJ1dHRvbnNVcGxvYWRbXTtcclxuXHJcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nO1xyXG4gICAgcHVibGljIHR5cGU6IHN0cmluZztcclxuICAgIHB1YmxpYyBzdGF0ZTogc3RyaW5nO1xyXG4gICAgcHVibGljIHByb2dyZXNzOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgYnV0dG9uczogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBlcnJvcjogc3RyaW5nID0gbnVsbDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcigkc2NvcGU6IG5nLklTY29wZSkgeyB9XHJcblxyXG4gICAgcHVibGljICRvbkluaXQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYnV0dG9ucykge1xyXG4gICAgICAgICAgICB0aGlzLnVwbG9hZEJ1dHRvbnMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5mYWlsQnV0dG9ucyA9IFtcclxuICAgICAgICAgICAgICAgIHsgdGl0bGU6ICdDYW5jZWwnLCBjbGljazogKCkgPT4geyB0aGlzLm9uQ2FuY2VsKCkgfSB9LFxyXG4gICAgICAgICAgICAgICAgeyB0aXRsZTogJ1JldHJ5JywgY2xpY2s6ICgpID0+IHsgdGhpcy5vblJldHJ5KCkgfSB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRCdXR0b25zID0gW1xyXG4gICAgICAgICAgICAgICAgeyB0aXRsZTogJ0Fib3J0JywgY2xpY2s6ICgpID0+IHsgdGhpcy5vbkFib3J0KCkgfSB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyAkb25DaGFuZ2VzKGNoYW5nZXM6IEZpbGVVcGxvYWRDaGFuZ2VzKSB7XHJcbiAgICAgICAgaWYgKGNoYW5nZXMuc3RhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IGNoYW5nZXMuc3RhdGUuY3VycmVudFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMucHJvZ3Jlc3MpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IGNoYW5nZXMucHJvZ3Jlc3MuY3VycmVudFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZXMuZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5lcnJvciA9IGNoYW5nZXMuZXJyb3IuY3VycmVudFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG9uQ2FuY2VsKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmJ1dHRvbkZ1bmN0aW9uLmNhbmNlbCkgdGhpcy5idXR0b25GdW5jdGlvbi5jYW5jZWwoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25SZXRyeSgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5idXR0b25GdW5jdGlvbi5yZXRyeSkgdGhpcy5idXR0b25GdW5jdGlvbi5yZXRyeSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbkFib3J0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmJ1dHRvbkZ1bmN0aW9uLmFib3J0KSB0aGlzLmJ1dHRvbkZ1bmN0aW9uLmFib3J0KCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5jb25zdCBmaWxlVXBsb2FkRGlyZWN0aXZlID0ge1xyXG4gICAgY29udHJvbGxlcjogRmlsZVVwbG9hZENvbnRyb2xsZXIsXHJcbiAgICBiaW5kaW5nczogRmlsZVVwbG9hZEJpbmRpbmdzLFxyXG4gICAgdGVtcGxhdGVVcmw6ICd1cGxvYWQvRmlsZVVwbG9hZC5odG1sJ1xyXG59O1xyXG5cclxuXHJcbmFuZ3VsYXJcclxuICAgIC5tb2R1bGUoJ3BpcEZpbGVzLkZpbGVVcGxvYWQnLCBbXSlcclxuICAgIC5jb21wb25lbnQoJ3BpcEZpbGVVcGxvYWQnLCBmaWxlVXBsb2FkRGlyZWN0aXZlKVxyXG4iLCIoZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncGlwRmlsZXMuVGVtcGxhdGVzJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdwaXBGaWxlcy5UZW1wbGF0ZXMnLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ2ZhaWwvRmlsZUZhaWwuaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJwaXAtZmlsZXMgcGlwLXByb2dyZXNzLWZpbGVzXCI+PGRpdiBjbGFzcz1cInBpcC1ib2R5IHBpcC1zY3JvbGwgcGlwLXByb2dyZXNzLWJvZHlcIj48ZGl2IGNsYXNzPVwibGF5b3V0LXJvd1wiPjxkaXYgY2xhc3M9XCJwaXAtcHJvZ3Jlc3MtaWNvbiBjb2xvci1iYWRnZS1iZ1wiPjxtZC1pY29uIG1kLXN2Zy1pY29uPVwiaWNvbnM6Y3Jvc3NcIj48L21kLWljb24+PC9kaXY+PGRpdiBjbGFzcz1cInBpcC1wcm9ncmVzcy1jb250ZW50XCI+PGgzIGNsYXNzPVwicGlwLXRpdGxlXCI+VXBsb2FkaW5nIHt7JGN0cmwudHlwZX19IGZhaWxlZCB3aXRoIGVycm9ycyE8L2gzPjxkaXYgY2xhc3M9XCJjb2xvci1zZWNvbmRhcnktdGV4dCBwaXAtc3VidGl0bGVcIj57eyRjdHJsLm5hbWV9fTwvZGl2PjxkaXYgY2xhc3M9XCJjb2xvci1lcnJvciBwaXAtZXJyb3JcIj57eyRjdHJsLmVycm9yfX08L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwicGlwLWZvb3RlciBsYXlvdXQtcm93IGxheW91dC1hbGlnbi1lbmQtY2VudGVyXCIgbmctaWY9XCIkY3RybC5idXR0b25zICYmICRjdHJsLmJ1dHRvbnMubGVuZ3RoID4gMFwiPjxkaXY+PG1kLWJ1dHRvbiBjbGFzcz1cIm1kLWFjY2VudFwiIG5nLXJlcGVhdD1cImZhaWwgaW4gJGN0cmwuYnV0dG9uc1wiIG5nLWNsaWNrPVwiZmFpbC5jbGljaygpXCI+e3s6OmZhaWwudGl0bGV9fTwvbWQtYnV0dG9uPjwvZGl2PjwvZGl2PjwvZGl2PicpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3BpcEZpbGVzLlRlbXBsYXRlcycpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncGlwRmlsZXMuVGVtcGxhdGVzJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdzZWxlY3QvRmlsZVNlbGVjdC5odG1sJyxcbiAgICAnPGRpdiBjbGFzcz1cInBpcC1maWxlLXNlbGVjdFwiPjxmb3JtIGlkPVwiaW5wX2Zvcm1cIiBjbGFzcz1cInBpcC1oaWRkZW4tZm9ybVwiPjxpbnB1dCB0eXBlPVwiZmlsZVwiIGZpbGUtbW9kZWw9XCIkY3RybC5sb2NhbEZpbGVcIiBpZD1cImlucF9maWxlXCIgbmctbW9kZWw9XCIkY3RybC5sb2NhbEZpbGVcIj48L2Zvcm0+PG1kLWJ1dHRvbiBjbGFzcz1cIm1kLXJhaXNlZCBtZC1hY2NlbnQgcGlwLWJ1dHRvblwiIG5nLWNsaWNrPVwiJGN0cmwub25VcGxvYWRCdXR0b25DbGljaygpXCIgbmctaWY9XCIhJGN0cmwubG9jYWxGaWxlXCI+Q2hvb3NlIEZpbGU8L21kLWJ1dHRvbj48ZGl2IG5nLWlmPVwiJGN0cmwubG9jYWxGaWxlLm5hbWVcIiBjbGFzcz1cInBpcC1maWxlIGxheW91dC1yb3cgbGF5b3V0LWFsaWduLXN0YXJ0LWNlbnRlclwiPjxtZC1pY29uIG1kLXN2Zy1pY29uPVwiaWNvbnM6ZG9jdW1lbnRcIiBjbGFzcz1cInBpcC1pY29uXCI+PC9tZC1pY29uPjxkaXYgY2xhc3M9XCJmbGV4XCI+PGRpdiBjbGFzcz1cInRleHQtYm9keTIgdGV4dC1vdmVyZmxvd1wiPnt7JGN0cmwubG9jYWxGaWxlLm5hbWV9fTwvZGl2PjxkaXYgbmctaWY9XCIkY3RybC5sb2NhbEZpbGUuc2l6ZVwiIGNsYXNzPVwiY29sb3Itc2Vjb25kYXJ5LXRleHRcIj57eyRjdHJsLmxvY2FsRmlsZS5zaXplfX08L2Rpdj48L2Rpdj48bWQtYnV0dG9uIG5nLWNsaWNrPVwiJGN0cmwub25EZWxldGVCdXR0b25DbGljaygpXCIgY2xhc3M9XCJtZC1pY29uLWJ1dHRvblwiPjxtZC1pY29uIG1kLXN2Zy1pY29uPVwiaWNvbnM6Y3Jvc3MtY2lyY2xlXCI+PC9tZC1pY29uPjwvbWQtYnV0dG9uPjwvZGl2PjwvZGl2PicpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3BpcEZpbGVzLlRlbXBsYXRlcycpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncGlwRmlsZXMuVGVtcGxhdGVzJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCdzdGFydC9GaWxlU3RhcnQuaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJwaXAtZmlsZXMgcGlwLXByb2dyZXNzLWZpbGVzXCI+PGRpdiBjbGFzcz1cInBpcC1ib2R5IHBpcC1zY3JvbGwgcGlwLXByb2dyZXNzLWJvZHlcIj48ZGl2IGNsYXNzPVwibGF5b3V0LXJvd1wiPjxkaXYgY2xhc3M9XCJwaXAtcHJvZ3Jlc3MtaWNvbiBiYi1vcmFuZ2VcIj48bWQtaWNvbiBtZC1zdmctaWNvbj1cImljb25zOnBsYXlcIj48L21kLWljb24+PC9kaXY+PGRpdiBjbGFzcz1cInBpcC1wcm9ncmVzcy1jb250ZW50XCI+PGgzIGNsYXNzPVwicGlwLXRpdGxlXCI+VXBsb2FkaW5nIHt7OjokY3RybC50eXBlfX08L2gzPjxkaXYgY2xhc3M9XCJjb2xvci1zZWNvbmRhcnktdGV4dCBwaXAtc3VidGl0bGVcIj57eyRjdHJsLm5hbWV9fTwvZGl2PjxkaXY+PG1kLXByb2dyZXNzLWxpbmVhciBtZC1tb2RlPVwiZGV0ZXJtaW5hdGVcIiBjbGFzcz1cIm1kLWFjY2VudFwiIHZhbHVlPVwie3skY3RybC5wcm9ncmVzc319XCIgbmctaWY9XCIkY3RybC5wcm9ncmVzcyA8IDEwMFwiPjwvbWQtcHJvZ3Jlc3MtbGluZWFyPjxtZC1wcm9ncmVzcy1saW5lYXIgbWQtbW9kZT1cImluZGV0ZXJtaW5hdGVcIiBjbGFzcz1cIm1kLWFjY2VudFwiIG5nLWlmPVwiJGN0cmwucHJvZ3Jlc3MgPT0gMTAwXCI+PC9tZC1wcm9ncmVzcy1saW5lYXI+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cInBpcC1mb290ZXIgbGF5b3V0LXJvdyBsYXlvdXQtYWxpZ24tZW5kLWNlbnRlclwiIG5nLWlmPVwiJGN0cmwuYnV0dG9uc1wiPjxkaXY+PG1kLWJ1dHRvbiBjbGFzcz1cIm1kLWFjY2VudFwiIG5nLXJlcGVhdD1cInN0YXJ0IGluICRjdHJsLmJ1dHRvbnNcIiBuZy1jbGljaz1cInN0YXJ0LmNsaWNrKClcIj57e3N0YXJ0LnRpdGxlfX08L21kLWJ1dHRvbj48L2Rpdj48L2Rpdj48L2Rpdj4nKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdwaXBGaWxlcy5UZW1wbGF0ZXMnKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3BpcEZpbGVzLlRlbXBsYXRlcycsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnc3VjY2Vzcy9GaWxlU3VjY2Vzcy5odG1sJyxcbiAgICAnPGRpdiBjbGFzcz1cInBpcC1maWxlcyBwaXAtcHJvZ3Jlc3MtZmlsZXNcIj48ZGl2IGNsYXNzPVwicGlwLWJvZHkgcGlwLXNjcm9sbCBwaXAtcHJvZ3Jlc3MtYm9keVwiPjxkaXYgY2xhc3M9XCJsYXlvdXQtcm93XCI+PGRpdiBjbGFzcz1cInBpcC1wcm9ncmVzcy1pY29uIGJiLWdyZWVuXCI+PG1kLWljb24gbWQtc3ZnLWljb249XCJpY29uczpjaGVja1wiPjwvbWQtaWNvbj48L2Rpdj48ZGl2IGNsYXNzPVwicGlwLXByb2dyZXNzLWNvbnRlbnRcIj48aDMgY2xhc3M9XCJwaXAtdGl0bGVcIj5VcGxvYWRlZCB7ezo6dm0udHlwZX19IHN1Y2Nlc3NmdWxseSE8L2gzPjxkaXYgY2xhc3M9XCJjb2xvci1zZWNvbmRhcnktdGV4dCBwaXAtc3VidGl0bGVcIj57e3ZtLm5hbWV9fTwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJwaXAtZm9vdGVyIGxheW91dC1yb3cgbGF5b3V0LWFsaWduLWVuZC1jZW50ZXJcIiBuZy1pZj1cInZtLmJ1dHRvbnMgJiYgdm0uYnV0dG9ucy5sZW5ndGggPiAwXCI+PGRpdj48bWQtYnV0dG9uIGNsYXNzPVwibWQtYWNjZW50XCIgbmctcmVwZWF0PVwic3RhcnQgaW4gdm0uYnV0dG9uc1wiIG5nLWNsaWNrPVwic3RhcnQuY2xpY2soKVwiPnt7c3RhcnQudGl0bGV9fTwvbWQtYnV0dG9uPjwvZGl2PjwvZGl2PjwvZGl2PicpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3BpcEZpbGVzLlRlbXBsYXRlcycpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncGlwRmlsZXMuVGVtcGxhdGVzJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCd1cGxvYWQvRmlsZVVwbG9hZC5odG1sJyxcbiAgICAnPGRpdj48cGlwLXN1Y2Nlcy11cGxvYWQgbmctaWY9XCIkY3RybC5zdGF0ZSA9PSAxICYmICghJGN0cmwuYnV0dG9ucyB8fCAkY3RybC51cGxvYWRCdXR0b25zKVwiIHBpcC1uYW1lPVwiJGN0cmwubmFtZVwiIHBpcC10eXBlPVwiJGN0cmwudHlwZVwiIHBpcC1idXR0b25zPVwiJGN0cmwuYnV0dG9uc1wiPjwvcGlwLXN1Y2Nlcy11cGxvYWQ+PHBpcC1mYWlsLXVwbG9hZCBuZy1pZj1cIiRjdHJsLnN0YXRlID09IDJcIiBwaXAtbmFtZT1cIiRjdHJsLm5hbWVcIiBwaXAtdHlwZT1cIiRjdHJsLnR5cGVcIiBwaXAtZXJyb3I9XCIkY3RybC5lcnJvclwiIHBpcC1idXR0b25zPVwiJGN0cmwuZmFpbEJ1dHRvbnNcIj48L3BpcC1mYWlsLXVwbG9hZD48cGlwLXN0YXJ0LXVwbG9hZCBuZy1pZj1cIiRjdHJsLnN0YXRlID09IDBcIiBwaXAtbmFtZT1cIiRjdHJsLm5hbWVcIiBwaXAtdHlwZT1cIiRjdHJsLnR5cGVcIiBwaXAtcHJvZ3Jlc3M9XCIkY3RybC5wcm9ncmVzc1wiIHBpcC1idXR0b25zPVwiJGN0cmwuc3RhcnRCdXR0b25zXCI+PC9waXAtc3RhcnQtdXBsb2FkPjwvZGl2PicpO1xufV0pO1xufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwLXdlYnVpLWZpbGVzLWh0bWwubWluLmpzLm1hcFxuIl19"}