{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/index.ts","src/routing/BackDecorator.ts","src/routing/RedirectDecorator.ts","src/routing/RoutingEvents.ts","src/routing/index.ts","src/session/IdentityService.ts","src/session/SessionService.ts","src/session/index.ts","src/transactions/Transaction.ts","src/transactions/TransactionError.ts","src/transactions/TransactionService.ts","src/transactions/TransactionStrings.ts","src/transactions/index.ts","src/translate/TranslateDirective.ts","src/translate/TranslateFilter.ts","src/translate/TranslateService.ts","src/translate/Translation.ts","src/translate/index.ts","src/utilities/Codes.ts","src/utilities/Format.ts","src/utilities/PageResetService.ts","src/utilities/ScrollService.ts","src/utilities/SystemInfo.ts","src/utilities/Tags.ts","src/utilities/TimerService.ts","src/utilities/index.ts"],"names":["f","exports","module","define","amd","g","window","global","self","this","pip","services","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","angular","__export","captureStateTranslations","$rootScope","$on","event","toState","toParams","fromState","fromParams","CurrentState","name","url","params","PreviousState","decorateBackStateService","$delegate","$window","goBack","history","back","goBackAndSelect","state","_","cloneDeep","extend","go","addBackStateDecorator","$provide","decorator","$inject","defineProperty","value","config","run","3","decorateRedirectStateProvider","redirect","RedirectedStates","addRedirectStateProviderDecorator","$timeout","isNull","preventDefault","transitionTo","location","addRedirectStateDecorator","decorateRedirectStateService","hookRoutingEvents","$log","$state","RoutingVar","error","5","m","p","hasOwnProperty","Object","./RedirectDecorator","./RoutingEvents","6","IdentityRootVar","IdentityChangedEvent","IdentityService","setRootVar","identity","_setRootVar","_identity","_rootScope","_log","prototype","$emit","debug","JSON","stringify","enumerable","configurable","IdentityProvider","_service","get","set","$get","provider","SessionRootVar","SessionOpenedEvent","SessionClosedEvent","SessionService","session","_session","isOpened","open","fullReset","partialReset","close","oldSession","SessionProvider","8","./SessionService","9","Transaction","scope","_scope","_id","_operation","_progress","_error","message","reset","busy","failed","empty","aborted","id","begin","operation","Date","getTime","toString","update","progress","Math","max","abort","end","10","TransactionError","decode","details","cause","stack_trace","data","statusText","status","11","TransactionService","_transactions","create","transaction","Transaction_1","12","configureTransactionStrings","$injector","has","setTranslations","ENTERING","PROCESSING","LOADING","SAVING","pipTranslate","13","./TransactionError","./TransactionService","./TransactionStrings","14","restrict","key1","key2","link","element","attrs","key","translate","text","html","directive","translateDirective","translateHtmlDirective","translateFilter","16","language","initTranslate","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","__","constructor","LanguageRootVar","LanguageChangedEvent","TranslateService","translation","persist","$mdDateLocale","_persist","_translation","_window","_mdDateLocale","localStorage","getItem","save","changeLocale","locale","localeDate","moment","localeData","months","isArray","_months","format","shortMonths","_monthsShort","days","_weekdays","shortDays","_weekdaysMin","firstDayOfWeek","_week","dow","setItem","PageResetService_1","ResetPageEvent","use","translations","translateArray","keys","translateSet","keyProp","valueProp","translateObjects","items","translateWithPrefix","prefix","translateSetWithPrefix","translateSetWithPrefix2","_super","_this","TranslateProvider","Translation","./Translation","17","en","ru","es","pt","de","fr","_language","map","_translations","isUndefined","values","k","push","each","item","replace","toUpperCase","18","./TranslateFilter","./TranslateService","19","Codes","hash","result","charCodeAt","verification","random","substr","Format","cache","sample","maxLength","indexOf","substring","strRepeat","str","qty","getType","variable","slice","toLowerCase","fmt","match","parse_tree","arg_names","exec","_fmt","field_list","replacement_field","field_match","argv","tree_length","node_type","output","arg","cursor","sprintf","test","String","fromCharCode","parseInt","toExponential","parseFloat","toFixed","abs","pad_character","charAt","pad_length","pad","join","args","_i","arguments","parseFormat","21","hookResetEvents","pipPageReset","ResetAreaEvent","area","resetArea","ResetRootVar","ResetAreaRootVar","PageResetService","_timeout","performReset","scrollTo","parentElement","childElement","animationDuration","undefined","setTimeout","$","position","modDiff","scrollTop","top","animate","ScrollService","SystemInfo","ua","navigator","userAgent","search","version","browserName","browser","split","osAll","osAndroid","err","isDesktop","platform","isMobile","isCordova","isSupported","supported","edge","firefox","chrome","browserVersion","service","Tags","normalizeOne","tag","trim","compressOne","equal","tag1","tag2","normalizeAll","tags","isString","compressAll","searchFields","field","entity","hashTags","concat","uniq","TimerEvent","timeout","DefaultEvents","TimerService","$interval","_started","_events","_interval","isStarted","addEvent","existingEvent","find","newEvent","startEvent","removeEvent","stopEvent","splice","clearEvents","stop","interval","cancel","ex","start"],"mappings":"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","file":"pip-webui-services.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","﻿'use strict';\r\n\r\nimport './translate';\r\nimport './session';\r\nimport './transactions';\r\nimport './routing';\r\nimport './utilities';\r\n\r\nangular.module('pipServices', [\r\n    'pipTranslate',\r\n    'pipSession',\r\n    'pipTransaction',\r\n    'pipRouting',\r\n    'pipFormat',\r\n    'pipTimer',\r\n    'pipScroll',\r\n    'pipTags',\r\n    'pipCodes',\r\n    'pipSystemInfo',\r\n    'pipPageReset'\r\n]);\r\n\r\nexport * from './translate';\r\nexport * from './session';\r\nexport * from './transactions';\r\nexport * from './routing';\r\nexport * from './utilities';\r\n","'use strict';\r\n\r\nexport let CurrentState: any;\r\nexport let PreviousState: any;\r\n\r\nfunction captureStateTranslations($rootScope: ng.IRootScopeService) {\r\n    \"ngInject\";\r\n\r\n    $rootScope.$on('$stateChangeSuccess',\r\n        (event, toState, toParams, fromState, fromParams) => {\r\n            CurrentState = {\r\n                name: toState.name, \r\n                url: toState.url, \r\n                params: toParams\r\n            };\r\n\r\n            PreviousState = {\r\n                name: fromState.name, \r\n                url: fromState.url, \r\n                params: fromParams\r\n            };\r\n        }\r\n    );\r\n\r\n}\r\n\r\nfunction decorateBackStateService($delegate: any, $window: ng.IWindowService): any {\r\n    \"ngInject\";\r\n\r\n    $delegate.goBack = goBack;\r\n    $delegate.goBackAndSelect = goBackAndSelect;\r\n\r\n    return $delegate;\r\n    //////////////////////////////////////////////////\r\n\r\n    function goBack(): void {\r\n        $window.history.back()\r\n    }\r\n\r\n    function goBackAndSelect(params: any): void {\r\n        // todo: define end fix PreviousState\r\n        if (PreviousState != null \r\n            && PreviousState.name != null) {\r\n\r\n            let state = _.cloneDeep(PreviousState);\r\n\r\n            // Override selected parameters\r\n            state.params = _.extend(state.params, params);\r\n\r\n            $delegate.go(state.name, state.params);\r\n        } else {\r\n            $window.history.back();\r\n        }\r\n    }\r\n}\r\n\r\nfunction addBackStateDecorator($provide) {\r\n    $provide.decorator('$state', decorateBackStateService);\r\n}\r\n\r\nangular\r\n    .module('pipRouting')\r\n    .config(addBackStateDecorator)\r\n    .run(captureStateTranslations);\r\n    ","'use strict';\r\n\r\nlet RedirectedStates: any = {};\r\n\r\nfunction decorateRedirectStateProvider($delegate) {\r\n    \"ngInject\";\r\n\r\n    $delegate.redirect = redirect;\r\n\r\n    return $delegate;\r\n    /////////////////////////////////////////////\r\n\r\n    // Specify automatic redirect from one state to another\r\n    function redirect(fromState, toState) {\r\n        RedirectedStates[fromState] = toState;  \r\n        return this;\r\n    }\r\n}\r\n\r\nfunction addRedirectStateProviderDecorator($provide) {\r\n    \"ngInject\";\r\n\r\n    $provide.decorator('$state', decorateRedirectStateProvider);\r\n}\r\n\r\nfunction decorateRedirectStateService($delegate, $timeout) {\r\n    \"ngInject\";\r\n\r\n    $delegate.redirect = redirect;\r\n    \r\n    return $delegate;\r\n    ////////////////////////////////\r\n    \r\n    // Todo: Move this code directly to event handler?\r\n    // Todo: Nothing calls this code!!\r\n    function redirect(event, state, params) {\r\n        let toState = RedirectedStates[state.name];\r\n        if (_.isFunction(toState)) {\r\n            toState = toState(state.name, params);\r\n\r\n            if (_.isNull(toState))\r\n                throw new Error('Redirected toState cannot be null');\r\n        }\r\n\r\n        if (!!toState) {\r\n            $timeout(() => {\r\n                event.preventDefault();\r\n                $delegate.transitionTo(toState, params, {location: 'replace'});\r\n            });\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n\r\nfunction addRedirectStateDecorator($provide) {\r\n    \"ngInject\";\r\n\r\n    $provide.decorator('$state', decorateRedirectStateService);\r\n}\r\n\r\nangular\r\n    .module('pipRouting')\r\n    .config(addRedirectStateProviderDecorator)\r\n    .config(addRedirectStateDecorator);\r\n    ","'use strict';\r\n\r\nexport let RoutingVar: string = \"$routing\";\r\n\r\nfunction hookRoutingEvents(\r\n    $rootScope: ng.IRootScopeService,\r\n    $log: ng.ILogService,\r\n    $state: ng.ui.IStateService\r\n) {\r\n    \"ngInject\";\r\n\r\n    $rootScope.$on('$stateChangeStart',\r\n        (event, toState, toParams, fromState, fromParams) => {\r\n            $rootScope[RoutingVar] = true;\r\n        }\r\n    );\r\n\r\n    $rootScope.$on('$stateChangeSuccess',\r\n        (event, toState, toParams, fromState, fromParams) => {\r\n            // Unset routing variable to disable page transition\r\n            $rootScope[RoutingVar] = false;                \r\n        }\r\n    );\r\n\r\n    // Intercept route error\r\n    $rootScope.$on('$stateChangeError',\r\n        (event, toState, toParams, fromState, fromParams, error) => {\r\n            // Unset routing variable to disable page transition\r\n            $rootScope[RoutingVar] = false;\r\n\r\n            $log.error('Error while switching route to ' + toState.name);\r\n            $log.error(error);\r\n        }\r\n    );\r\n\r\n}\r\n\r\nangular\r\n    .module('pipRouting')\r\n    .run(hookRoutingEvents);\r\n    ","'use strict';\r\n\r\nangular.module('pipRouting', ['ui.router']);\r\n\r\nimport './BackDecorator';\r\nimport './RedirectDecorator';\r\nimport './RoutingEvents';\r\n\r\nexport * from './BackDecorator';\r\nexport * from './RoutingEvents';\r\n","'use strict';\r\n\r\nexport let IdentityRootVar = \"$identity\";\r\nexport let IdentityChangedEvent = \"pipIdentityChanged\";\r\n\r\nexport interface IIdentity {\r\n    id: string;\r\n    full_name: string;\r\n    details: string;\r\n    email: string;\r\n    photo_url: string;\r\n    groups: string[];\r\n}\r\n\r\nexport interface IIdentityService {\r\n    identity: any;\r\n}\r\n\r\nexport interface IIdentityProvider extends ng.IServiceProvider {\r\n    setRootVar: boolean;\r\n    identity: any;\r\n}\r\n\r\n\r\nclass IdentityService implements IIdentityService {\r\n    private _identity: any;\r\n    private _setRootVar: boolean;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _log: ng.ILogService;\r\n\r\n    public constructor(\r\n        setRootVar: boolean,\r\n        identity: any,\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService\r\n    ) {\r\n        this._setRootVar = setRootVar;\r\n        this._identity = identity;\r\n        this._rootScope = $rootScope;\r\n        this._log = $log;\r\n\r\n        this.setRootVar();\r\n    }\r\n\r\n    private setRootVar(): void {\r\n        if (this._setRootVar)\r\n            this._rootScope[IdentityRootVar] = this._identity;\r\n    }\r\n\r\n    public get identity(): any {\r\n        return this._identity;\r\n    }\r\n\r\n    public set identity(value: any) {\r\n        this._identity = value;\r\n        this.setRootVar();\r\n        this._rootScope.$emit(IdentityChangedEvent, this._identity);\r\n\r\n        let identity: any = value || {};\r\n        this._log.debug(\"Changed identity to \" + JSON.stringify(identity));\r\n    }\r\n}\r\n\r\nclass IdentityProvider implements IdentityProvider {\r\n    private _setRootVar = true;\r\n    private _identity: any = null;\r\n    private _service: IdentityService = null;\r\n\r\n    public constructor() { }\r\n\r\n    public get setRootVar(): boolean {\r\n        return this._setRootVar;  \r\n    }\r\n\r\n    public set setRootVar(value: boolean) {\r\n        this._setRootVar = !!value;\r\n    }\r\n\r\n    public get identity(): any {\r\n        return this._identity;  \r\n    }\r\n\r\n    public set identity(value: any) {\r\n        this._identity = value;\r\n    }\r\n\r\n    public $get(\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService\r\n    ): any {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new IdentityService(this._setRootVar, this._identity, $rootScope, $log);\r\n\r\n        return this._service;\r\n    }\r\n\r\n}\r\n\r\nangular\r\n    .module('pipSession')\r\n    .provider('pipIdentity', IdentityProvider);\r\n","'use strict';\r\n\r\nexport const SessionRootVar = \"$session\";\r\nexport const SessionOpenedEvent = \"pipSessionOpened\";\r\nexport const SessionClosedEvent = \"pipSessionClosed\";\r\n\r\nexport interface ISessionService {\r\n    session: any;\r\n    isOpened(): boolean;\r\n\r\n    open(session: any): void;\r\n    close(): void;\r\n}\r\n\r\nexport interface ISessionProvider extends ng.IServiceProvider {\r\n    setRootVar: boolean;\r\n    session: any;\r\n}\r\n\r\nclass SessionService implements ISessionService {\r\n    private _setRootVar: boolean;\r\n    private _session: any;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _log: ng.ILogService;\r\n\r\n    public constructor(\r\n        setRootVar: boolean, \r\n        session: any, \r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService\r\n    ) {\r\n        this._setRootVar = setRootVar;\r\n        this._session = session;\r\n        this._rootScope = $rootScope;\r\n        this._log = $log;\r\n\r\n        this.setRootVar();\r\n    }\r\n    \r\n    private setRootVar(): void {\r\n        if (this._setRootVar)\r\n            this._rootScope[SessionRootVar] = this._session;\r\n    }\r\n\r\n    public get session(): any {\r\n        return this._session;\r\n    }\r\n\r\n    public isOpened(): boolean {\r\n        return this._session != null;\r\n    }\r\n\r\n    public open(session: any, fullReset: boolean = false, partialReset: boolean = false) {\r\n        if (session == null)\r\n            throw new Error(\"Session cannot be null\");\r\n\r\n        this._session = session;\r\n        this.setRootVar();\r\n        this._rootScope.$emit(SessionOpenedEvent, session);\r\n\r\n        this._log.debug(\"Opened session \" + session);\r\n    }\r\n\r\n    public close(fullReset: boolean = false, partialReset: boolean = false) {\r\n        let oldSession = this._session;\r\n\r\n        this._session = null;\r\n        this.setRootVar();\r\n        this._rootScope.$emit(SessionClosedEvent, oldSession);\r\n\r\n        this._log.debug(\"Closed session \" + oldSession);\r\n    }\r\n}\r\n\r\nclass SessionProvider implements ISessionProvider {\r\n    private _setRootVar = true;\r\n    private _session: any = null;\r\n    private _service: SessionService = null;\r\n\r\n    public constructor() { }\r\n\r\n    public get setRootVar(): boolean {\r\n        return this._setRootVar;  \r\n    }\r\n\r\n    public set setRootVar(value: boolean) {\r\n        this._setRootVar = !!value;\r\n    }\r\n\r\n    public get session(): any {\r\n        return this._session;  \r\n    }\r\n\r\n    public set session(value: any) {\r\n        this._session = value;\r\n    }\r\n\r\n    public $get(\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService\r\n    ): any {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new SessionService(this._setRootVar, this._session, $rootScope, $log);\r\n\r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipSession')\r\n    .provider('pipSession', SessionProvider); \r\n","'use strict';\r\n\r\nangular.module('pipSession', []);\r\n\r\nimport './IdentityService';\r\nimport './SessionService';\r\n\r\nexport * from './IdentityService';\r\nexport * from './SessionService';\r\n","'use strict';\r\n\r\nimport { TransactionError } from './TransactionError'\r\n\r\nexport class Transaction {\r\n    private _scope: string = null;\r\n    private _id: string = null;\r\n    private _operation: string = null;\r\n    private _error: TransactionError = new TransactionError();\r\n    private _progress: number = 0;\r\n\r\n    public constructor(scope: string) {\r\n        this._scope = scope;\r\n    }\r\n\r\n    public get scope(): string {\r\n        return this._scope;\r\n    }\r\n\r\n    public get id(): string {\r\n        return this._id;\r\n    }\r\n\r\n    public get operation(): string {\r\n        return this._operation;\r\n    }\r\n\r\n    public get progress(): number {\r\n        return this._progress;\r\n    }\r\n\r\n    public get error(): TransactionError {\r\n        return this._error;\r\n    }\r\n\r\n    public get errorMessage(): string {\r\n        return this._error.message;\r\n    }\r\n\r\n    public reset(): void {\r\n        this._id = null;\r\n        this._operation = null;\r\n        this._progress = 0;\r\n        this._error.reset();\r\n    }\r\n\r\n    public busy(): boolean {\r\n        return this._id != null;\r\n    }\r\n\r\n    public failed(): boolean {\r\n        return !this._error.empty();\r\n    }\r\n\r\n    public aborted(id: string): boolean {\r\n        return this._id != id;\r\n    }\r\n\r\n    public begin(operation: string): string {\r\n        // Transaction is already running\r\n        if (this._id != null) return null;\r\n\r\n        this._id = new Date().getTime().toString();\r\n        this._operation = operation || 'PROCESSING'\r\n        this._error.reset();\r\n\r\n        return this._id;\r\n    }\r\n\r\n    public update(progress: number): void {\r\n        this._progress = Math.max(progress, 100);\r\n    }\r\n\r\n    public abort(): void {\r\n        this._id = null;\r\n        this._error.reset();\r\n    }\r\n\r\n    public end(error?: any): void {\r\n        this._error.decode(error);\r\n        this._id = null;\r\n    }\r\n}\r\n","'use strict';\r\n\r\nexport class TransactionError {\r\n    public code: string;\r\n    public message: string;\r\n    public details: any;\r\n    public cause: string;\r\n    public stack_trace: string;\r\n\r\n    public constructor(error?: any) {\r\n        if (error != null)\r\n            this.decode(error);\r\n    }\r\n\r\n    public reset(): void {\r\n        this.code = null;\r\n        this.message = null;\r\n        this.details = null;\r\n        this.cause = null;\r\n        this.stack_trace = null;\r\n    }\r\n\r\n    public empty(): boolean {\r\n        return this.message = null && this.code == null;\r\n    }\r\n\r\n    public decode(error: any): void {\r\n        this.reset();\r\n\r\n        if (error == null) return;\r\n\r\n        // Process regular messages\r\n        if (error.message) {\r\n            this.message = error.message;\r\n        }\r\n\r\n        // Process server application errors\r\n        if (error.data) {\r\n            if (error.data.code) { \r\n                // process server error codes here\r\n                this.message = this.message || 'ERROR_' + error.data.code;\r\n                this.code = this.code || error.data.code;\r\n            }\r\n\r\n            if (error.data.message) {\r\n                this.message = this.message || error.data.message;\r\n            }\r\n\r\n            this.message = this.message || error.data;\r\n            this.details = this.details || error.data;\r\n\r\n            this.cause = error.data.cause;\r\n            this.stack_trace = error.data.stack_trace;\r\n            this.details = error.data.details;            \r\n        }\r\n\r\n        // Process standard HTTP errors\r\n        if (error.statusText) {\r\n            this.message = this.message || error.statusText;\r\n        }\r\n        if (error.status) {\r\n            this.message = this.message || 'ERROR_' + error.status;\r\n            this.code = this.code || error.status;\r\n        }\r\n        \r\n        this.message = this.message || error;\r\n        this.details = this.details || error;\r\n    }\r\n}\r\n","'use strict';\r\n\r\nimport { Transaction } from './Transaction';\r\n\r\nexport interface ITransactionService {\r\n    create(scope?: string): Transaction;\r\n    get(scope?: string): Transaction;\r\n}\r\n\r\nclass TransactionService implements ITransactionService {\r\n    private _transactions: Transaction = <Transaction>{};\r\n\r\n    public constructor() {}\r\n\r\n    public create(scope?: string): Transaction {\r\n        let transaction: Transaction = new Transaction(scope);\r\n        \r\n        if (scope != null)\r\n            this._transactions[scope] = transaction;\r\n\r\n        return transaction;\r\n    }\r\n\r\n    public get(scope?: string): Transaction {\r\n        let transaction: Transaction = scope != null ? <Transaction>this._transactions[scope] : null;\r\n\r\n        if (transaction == null) {\r\n            transaction = new Transaction(scope);\r\n            if (scope != null)\r\n                this._transactions[scope] = transaction;\r\n        }\r\n\r\n        return transaction;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipTransaction')\r\n    .service('pipTransaction', TransactionService);\r\n","'use strict';\r\n\r\nfunction configureTransactionStrings($injector: ng.auto.IInjectorService) {\r\n    \"ngInject\";\r\n\r\n    let pipTranslate:pip.services.ITranslateService = $injector.has('pipTranslateProvider') ? <pip.services.ITranslateService>$injector.get('pipTranslateProvider') : null;\r\n\r\n    if (pipTranslate) {\r\n        pipTranslate.setTranslations('en', {\r\n            'ENTERING': 'Entering...',\r\n            'PROCESSING': 'Processing...',\r\n            'LOADING': 'Loading...',\r\n            'SAVING': 'Saving...'\r\n        });\r\n\r\n        pipTranslate.setTranslations('ru', {\r\n            'ENTERING': 'Вход в систему...',\r\n            'PROCESSING': 'Обрабатывается...',\r\n            'LOADING': 'Загружается...',\r\n            'SAVING': 'Сохраняется...'\r\n        });   \r\n    }\r\n    \r\n}\r\n\r\nangular\r\n    .module('pipTransaction')\r\n    .config(configureTransactionStrings);\r\n","'use strict';\r\n\r\nangular.module('pipTransaction', []);\r\n\r\nimport './TransactionStrings';\r\nimport './TransactionError';\r\nimport './Transaction';\r\nimport './TransactionService';\r\n\r\nexport * from './TransactionError';\r\nexport * from './Transaction';\r\nexport * from './TransactionService';\r\n","'use strict';\r\n\r\nfunction translateDirective(pipTranslate): ng.IDirective {\r\n    \"ngInject\";\r\n\r\n    return {\r\n        restrict: 'EA',\r\n        scope: {\r\n            key1: '@pipTranslate',\r\n            key2: '@key'\r\n        },\r\n        link: (scope: ng.IScope, element: ng.IAugmentedJQuery, attrs: ng.IAttributes) => {\r\n            let key: string = scope.key1 || scope.key2;\r\n            let value: string = pipTranslate.translate(key);\r\n            element.text(value);\r\n        }\r\n    };\r\n}\r\n\r\nfunction translateHtmlDirective(pipTranslate: pip.services.ITranslateService): ng.IDirective {\r\n    \"ngInject\";\r\n\r\n    return {\r\n        restrict: 'EA',\r\n        scope: {\r\n            key1: '@pipTranslateHtml',\r\n            key2: '@key'\r\n        },\r\n        link: (scope: ng.IScope, element: ng.IAugmentedJQuery, attrs: ng.IAttributes) => {\r\n            let key: string = scope.key1 || scope.key2;\r\n            let value: string = pipTranslate.translate(key);\r\n            element.html(value);\r\n        }\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipTranslate')\r\n    .directive('pipTranslate', translateDirective)\r\n    .directive('pipTranslateHtml', translateHtmlDirective);\r\n","'use strict';\r\n\r\nfunction translateFilter(pipTranslate: pip.services.ITranslateService) {\r\n    \"ngInject\";\r\n\r\n    return function (key: string) {\r\n        return pipTranslate.translate(key) || key;\r\n    }\r\n}\r\n\r\nfunction optionalTranslateFilter($injector: ng.auto.IInjectorService) {\r\n    \"ngInject\";\r\n\r\n    let pipTranslate: pip.services.ITranslateService = $injector.has('pipTranslate') \r\n        ? <pip.services.ITranslateService>$injector.get('pipTranslate') : null;\r\n\r\n    return function (key: string) {\r\n        return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipTranslate')\r\n    .filter('translate', translateFilter);\r\n","﻿'use strict';\r\n\r\nimport { Translation } from './Translation';\r\nimport { ResetPageEvent } from '../utilities/PageResetService';\r\n\r\nexport let LanguageRootVar = \"$language\";\r\nexport let LanguageChangedEvent = \"pipLanguageChanged\";    \r\n\r\nexport interface ITranslateService {\r\n    language: string;\r\n\r\n    use(language: string): string;\r\n    setTranslations(language: string, translations: any): void;\r\n    translations(language: string, translations: any): void;\r\n\r\n    translate(key: string): string;\r\n    translateArray(keys: string[]): string[];\r\n    translateSet(keys: string[], keyProp: string, valueProp: string): any[];\r\n    translateObjects(items: any[], keyProp: string, valueProp: string): any[];\r\n    translateWithPrefix(prefix: string, key: string);\r\n    translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string);\r\n    translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string);\r\n}\r\n\r\nexport interface ITranslateProvider extends ITranslateService, ng.IServiceProvider {\r\n}\r\n\r\nclass TranslateService implements ITranslateService {\r\n    private _translation: Translation;\r\n    private _setRootVar: boolean;\r\n    private _persist: boolean;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _log: ng.ILogService;\r\n    private _window: ng.IWindowService;\r\n    private _mdDateLocale: angular.material.IDateLocaleProvider;\r\n\r\n    public constructor(\r\n        translation: Translation,\r\n        setRootVar: boolean,\r\n        persist: boolean,\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService,\r\n        $window: ng.IWindowService,\r\n        $mdDateLocale: angular.material.IDateLocaleProvider,\r\n    ) {\r\n        this._setRootVar = setRootVar;\r\n        this._persist = persist;\r\n        this._translation = translation;\r\n        this._rootScope = $rootScope;\r\n        this._log = $log;\r\n        this._window = $window;\r\n        this._mdDateLocale = $mdDateLocale;\r\n\r\n        if (this._persist && this._window.localStorage)\r\n            this._translation.language = this._window.localStorage.getItem('language') || this._translation.language;\r\n\r\n        this._log.debug(\"Set language to \" + this._translation.language);\r\n\r\n        this.save();\r\n    }\r\n\r\n    private changeLocale(locale: string) {\r\n        if (!locale) return;\r\n\r\n        // var localeDate: moment.MomentLanguageData;\r\n        var localeDate: any;\r\n\r\n        moment.locale(locale);\r\n        localeDate = moment.localeData();\r\n\r\n        this._mdDateLocale.months = angular.isArray(localeDate._months) ? localeDate._months : localeDate._months.format;\r\n        this._mdDateLocale.shortMonths = angular.isArray(localeDate._monthsShort) ? localeDate._monthsShort : localeDate._monthsShort.format;\r\n        this._mdDateLocale.days = angular.isArray(localeDate._weekdays) ? localeDate._weekdays : localeDate._weekdays.format;\r\n        this._mdDateLocale.shortDays = localeDate._weekdaysMin;\r\n        this._mdDateLocale.firstDayOfWeek = localeDate._week.dow;\r\n    }\r\n\r\n    private save(): void {\r\n        if (this._setRootVar)\r\n            this._rootScope[LanguageRootVar] = this._translation.language;\r\n\r\n        if (this._persist && this._window.localStorage != null)\r\n            this._window.localStorage.setItem('language', this._translation.language);\r\n    }\r\n\r\n    public get language(): string {\r\n        return this._translation.language;\r\n    }\r\n\r\n    public set language(value: string) {\r\n        if (value != this._translation.language) {\r\n            this._translation.language = value;\r\n            \r\n            this._log.debug(\"Changing language to \" + value);\r\n\r\n            this.changeLocale(this._translation.language);\r\n            this.save();   \r\n\r\n            this._rootScope.$emit(LanguageChangedEvent, value);\r\n            this._rootScope.$emit(ResetPageEvent);\r\n        }\r\n    }\r\n\r\n    public use(language: string): string {\r\n        if (language != null)\r\n            this.language = language;\r\n        return this.language;\r\n    }\r\n\r\n    public setTranslations(language: string, translations: any): void {\r\n        return this._translation.setTranslations(language, translations);\r\n    }\r\n\r\n    public translations(language: string, translations: any): void {\r\n        return this._translation.setTranslations(language, translations);\r\n    }\r\n\r\n    public translate(key: string): string {\r\n        return this._translation.translate(key);\r\n    }\r\n\r\n    public translateArray(keys: string[]): string[] {\r\n        return this._translation.translateArray(keys);\r\n    }\r\n    \r\n    public translateSet(keys: string[], keyProp: string, valueProp: string): any[] {\r\n        return this._translation.translateSet(keys, keyProp, valueProp);\r\n    }\r\n\r\n    public translateObjects(items: any[], keyProp: string, valueProp: string): any[] {\r\n        return this._translation.translateObjects(items, keyProp, valueProp);\r\n    }\r\n\r\n    public translateWithPrefix(prefix: string, key: string) {\r\n        return this._translation.translateWithPrefix(prefix, key);\r\n    }\r\n\r\n    public translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n        return this._translation.translateSetWithPrefix(prefix, keys, keyProp, valueProp);\r\n    }\r\n\r\n    public translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n        return this._translation.translateSetWithPrefix2(prefix, keys, keyProp, valueProp);\r\n    }\r\n}\r\n\r\nclass TranslateProvider extends Translation implements ITranslateProvider {\r\n    private _translation: Translation;\r\n    private _setRootVar: boolean = true;\r\n    private _persist: boolean = true;\r\n    private _service: TranslateService;\r\n    \r\n    public constructor() {\r\n        super();\r\n    }\r\n\r\n    public get setRootVar(): boolean {\r\n        return this._setRootVar;  \r\n    }\r\n\r\n    public set setRootVar(value: boolean) {\r\n        this._setRootVar = !!value;\r\n    }\r\n\r\n    public get persist(): boolean {\r\n        return this._persist;  \r\n    }\r\n\r\n    public set persist(value: boolean) {\r\n        this._persist = !!value;\r\n    }\r\n\r\n    public $get(\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService, \r\n        $window: ng.IWindowService,\r\n        $mdDateLocale: angular.material.IDateLocaleProvider\r\n    ): any {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null) \r\n            this._service = new TranslateService(this, this._setRootVar, this._persist, $rootScope, $log, $window, $mdDateLocale);\r\n\r\n        return this._service;\r\n    }\r\n}\r\n\r\nfunction initTranslate(pipTranslate: ITranslateService) {\r\n    pipTranslate.language;\r\n}\r\n\r\nangular\r\n    .module('pipTranslate')\r\n    .provider('pipTranslate', TranslateProvider)\r\n    .run(initTranslate);\r\n","'use strict';\r\n\r\nexport class Translation {\r\n    protected _language: string = 'en';\r\n    protected _translations = {\r\n        en: {\r\n            'en': 'English',\r\n            'ru': 'Russian',\r\n            'es': 'Spanish',\r\n            'pt': 'Portuguese',\r\n            'de': 'German',\r\n            'fr': 'French'\r\n        },\r\n        ru: {\r\n            'en': 'Английский',\r\n            'ru': 'Русский',\r\n            'es': 'Испанский',\r\n            'pt': 'Португальский',\r\n            'de': 'Немецкий',\r\n            'fr': 'Французский'\r\n        }\r\n    };\r\n\r\n    public constructor() {}\r\n\r\n    public get language(): string { return this._language; }\r\n    public set language(value: string) { this._language = value; }\r\n\r\n    public use(language: string): string {\r\n        if (language != null)\r\n            this._language = language;\r\n        return this._language;\r\n    }\r\n\r\n    // Set translation strings for specific language\r\n    public setTranslations(language: string, translations: any): void {\r\n        let map = this._translations[language] || {};\r\n        this._translations[language] = _.extend(map, translations);\r\n    }\r\n\r\n    // Yet another method to set translation strings for specific language\r\n    public translations(language: string, translations: any): void {\r\n        this.setTranslations(language, translations);\r\n    }\r\n\r\n    // Translate a string by key using set language\r\n    public translate(key: string): string {\r\n        if (_.isNull(key) || _.isUndefined(key)) return '';\r\n\r\n        let translations = this._translations[this._language] || {};\r\n        return translations[key] || key;\r\n    }\r\n\r\n    // Translate an array of strings\r\n    public translateArray(keys: string[]): string[] {\r\n        if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n        let values: string[] = [];\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(keys, function (k: string) {\r\n            let key = k || '';\r\n            values.push(translations[key] || key);\r\n        });\r\n\r\n        return values;\r\n    }\r\n\r\n    // Translate an array of strings into array of objects (set)\r\n    public translateSet(keys: string[], keyProp: string, valueProp: string): any[] {\r\n        if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n        keyProp = keyProp || 'id';\r\n        valueProp = valueProp || 'name';\r\n\r\n        let values: any[] = [];\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(keys, function (key: string) {\r\n            let value: any = {};\r\n            key = key || '';\r\n\r\n            value[keyProp] = key;\r\n            value[valueProp] = translations[key] || key;\r\n\r\n            values.push(value);\r\n        });\r\n\r\n        return values;\r\n    }\r\n\r\n    // Translate a collection of objects\r\n    public translateObjects(items: any[], keyProp: string, valueProp: string): any[] {\r\n        if (_.isNull(items) || items.length == 0) return [];\r\n\r\n        keyProp = keyProp || 'name';\r\n        valueProp = valueProp || 'nameLocal';\r\n\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(items, function (item: any) {\r\n            let key = item[keyProp] || '';\r\n\r\n            item[valueProp] = translations[key] || key;\r\n        });\r\n\r\n        return items;\r\n    }\r\n\r\n    // Translate a string by key  with prefix using set language todo\r\n    public translateWithPrefix(prefix: string, key: string) {\r\n        prefix = prefix ? prefix + '_' : '';\r\n        key = (prefix + key).replace(/ /g, '_').toUpperCase();\r\n        if (key == null) return '';\r\n        let translations = this._translations[this._language] || {};\r\n        return translations[key] || key;\r\n    };\r\n\r\n    public translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n        if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n        prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() : '';\r\n        keyProp = keyProp || 'id';\r\n        valueProp = valueProp || 'name';\r\n\r\n        let values = [];\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(keys, function (key: string) {\r\n            let value: any = {}; \r\n            key = key || '';\r\n\r\n            value[keyProp] = key;\r\n            value[valueProp] = translations[prefix + '_' + key] || key;\r\n\r\n            values.push(value);\r\n        });\r\n\r\n        return values;\r\n    }\r\n\r\n    // Translate an array of strings, apply uppercase and replace ' ' => '_'\r\n    public translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n        if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n        keyProp = keyProp || 'id';\r\n        valueProp = valueProp || 'name';\r\n        prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() + '_': '';\r\n\r\n        let values = [];\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(keys, function (key: string) {\r\n            let value: any = {};\r\n            key = key || '';\r\n\r\n            value[keyProp] = key;\r\n            value[valueProp] = translations[prefix + key.replace(/ /g, '_').toUpperCase()]\r\n                || (prefix + key.replace(/ /g, '_').toUpperCase());\r\n\r\n            values.push(value);\r\n        });\r\n\r\n        return values;\r\n    }\r\n}\r\n","'use strict';\r\n\r\nangular.module('pipTranslate', []);\r\n\r\nimport './Translation';\r\nimport './TranslateService';\r\nimport './TranslateFilter';\r\nimport './TranslateDirective';\r\n\r\nexport * from './Translation';\r\nexport * from './TranslateService';\r\n","'use strict';\r\n\r\nexport interface ICodes {\r\n    // Simple version of string hashcode\r\n    hash(value: string): number;\r\n    // Generates random big number for verification codes\r\n    verification(): string;\r\n}\r\n\r\n\r\nclass Codes implements ICodes {\r\n    // Simple version of string hashcode\r\n    public hash(value: string): number {\r\n        if (value == null) return 0;\r\n        \r\n        let result: number = 0;\r\n        for (let i = 0; i < value.length; i++)\r\n            result += value.charCodeAt(i);\r\n\r\n        return result;\r\n    }\r\n\r\n    // Generates random big number for verification codes\r\n    public verification(): string {\r\n        return Math.random().toString(36).substr(2, 10).toUpperCase(); // remove `0.`\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipCodes', [])\r\n    .service('pipCodes', Codes);\r\n","'use strict';\r\n\r\nexport interface IFormat {\r\n    // Creates a sample line from a text\r\n    sample(value: string, maxLength: number): string;\r\n\r\n    sprintf(message: string, ...args: any[]): string;\r\n}\r\n\r\n\r\nclass Format implements IFormat {\r\n    // Cached for parsed formats\r\n    private cache = {};\r\n\r\n    // Creates a sample line from a text\r\n    public sample(value: string, maxLength: number): string {\r\n        if (!value || value == '') {\r\n            return '';\r\n        }\r\n\r\n        var length: number = value.indexOf('\\n');\r\n        length = length >= 0 ? length : value.length;\r\n        length = length < maxLength ? value.length : maxLength;\r\n\r\n        return value.substring(0, length);\r\n    }\r\n\r\n    private strRepeat(str: string, qty: number): string {\r\n        if (qty < 1) { \r\n            return '';\r\n        }\r\n        var result: string = '';\r\n        while (qty > 0) {\r\n            if (qty & 1) result += str;\r\n            qty >>= 1, str += str;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    private getType(variable): string {\r\n        return toString.call(variable).slice(8, -1).toLowerCase();\r\n    }\r\n\r\n    private parseFormat(fmt: string): any {\r\n        let _fmt: string = fmt, match = [], parse_tree = [], arg_names: number = 0;\r\n        while (_fmt) {\r\n            if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\r\n                parse_tree.push(match[0]);\r\n            }\r\n            else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\r\n                parse_tree.push('%');\r\n            }\r\n            else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\r\n                if (match[2]) {\r\n                    arg_names |= 1;\r\n                    let field_list: string[] = [], replacement_field: string = match[2], field_match: string[] = [];\r\n                    if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                        field_list.push(field_match[1]);\r\n                        while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\r\n                            if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                                field_list.push(field_match[1]);\r\n                            }\r\n                            else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\r\n                                field_list.push(field_match[1]);\r\n                            }\r\n                            else {\r\n                                throw new Error('Unknown error');\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        throw new Error('Unknown error');\r\n                    }\r\n                    match[2] = field_list;\r\n                }\r\n                else {\r\n                    arg_names |= 2;\r\n                }\r\n                if (arg_names === 3) {\r\n                    throw new Error('Mixing positional and named placeholders is not (yet) supported');\r\n                }\r\n                parse_tree.push(match);\r\n            }\r\n            else {\r\n                throw new Error('Unknown error');\r\n            }\r\n            _fmt = _fmt.substring(match[0].length);\r\n        }\r\n        return parse_tree;\r\n    }\r\n\r\n    private format(parse_tree: any, argv: any): string {\r\n        let cursor: number = 0; \r\n        let tree_length: number = parse_tree.length; \r\n        let output = [];\r\n\r\n        for (let i = 0; i < tree_length; i++) {\r\n            let node_type = this.getType(parse_tree[i]);\r\n            if (node_type === 'string') {\r\n                output.push(parse_tree[i]);\r\n            }\r\n            else if (node_type === 'array') {\r\n                let match = parse_tree[i]; // convenience purposes only\r\n                let arg: any;\r\n                if (match[2]) { // keyword argument\r\n                    arg = argv[cursor];\r\n                    for (let k = 0; k < match[2].length; k++) {\r\n                        if (!arg.hasOwnProperty(match[2][k])) {\r\n                            throw new Error(this.sprintf('Property \"%s\" does not exist', match[2][k]));\r\n                        }\r\n                        arg = arg[match[2][k]];\r\n                    }\r\n                } else if (match[1]) { // positional argument (explicit)\r\n                    arg = argv[match[1]];\r\n                }\r\n                else { // positional argument (implicit)\r\n                    arg = argv[cursor++];\r\n                }\r\n\r\n                if (/[^s]/.test(match[8]) && (this.getType(arg) != 'number')) {\r\n                    throw new Error(this.sprintf('Expecting number but found %s', this.getType(arg)));\r\n                }\r\n                switch (match[8]) {\r\n                    case 'b': arg = arg.toString(2); break;\r\n                    case 'c': arg = String.fromCharCode(arg); break;\r\n                    case 'd': arg = parseInt(arg, 10); break;\r\n                    case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;\r\n                    case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;\r\n                    case 'o': arg = arg.toString(8); break;\r\n                    case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;\r\n                    case 'u': arg = Math.abs(arg); break;\r\n                    case 'x': arg = arg.toString(16); break;\r\n                    case 'X': arg = arg.toString(16).toUpperCase(); break;\r\n                }\r\n                arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);                \r\n                let pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';\r\n                let pad_length = match[6] - String(arg).length;\r\n                let pad = match[6] ? this.strRepeat(pad_character, pad_length) : '';\r\n                output.push(match[5] ? arg + pad : pad + arg);\r\n            }\r\n        }\r\n        return output.join('');\r\n    }\r\n    \r\n    public sprintf(message: string, ...args: any[]): string {\r\n        if (!this.cache.hasOwnProperty(message))\r\n            this.cache[message] = this.parseFormat(message);\r\n\r\n        return this.format(this.cache[message], args);\r\n    }\r\n}\r\n\r\n\r\nangular\r\n    .module('pipFormat', [])\r\n    .service('pipFormat', Format);\r\n","'use strict';\r\n\r\nexport let ResetPageEvent: string = \"pipResetPage\";\r\nexport let ResetAreaEvent: string = \"pipResetArea\";\r\n\r\nexport let ResetRootVar: string = \"$reset\";\r\nexport let ResetAreaRootVar: string = \"$resetArea\";\r\n\r\nexport interface IPageResetService {\r\n    reset(): void;\r\n    resetArea(area: string): void;\r\n}\r\n\r\n\r\nclass PageResetService implements IPageResetService {\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _log: ng.ILogService;\r\n    private _timeout: ng.ITimeoutService;\r\n\r\n    public constructor(\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService, \r\n        $timeout: ng.ITimeoutService\r\n    ) {\r\n        this._rootScope = $rootScope;\r\n        this._log = $log;\r\n        this._timeout = $timeout;\r\n\r\n        $rootScope[ResetRootVar] = false;\r\n        $rootScope[ResetAreaRootVar] = null;\r\n    }\r\n\r\n    public reset(): void {\r\n        this._log.debug(\"Resetting the entire page\");\r\n        this.performReset(null);\r\n    }\r\n\r\n    public resetArea(area: string): void {\r\n        this._log.debug(\"Resetting the area \" + area);\r\n        this.performReset(area);\r\n    }\r\n\r\n    private performReset(area?: string): void {\r\n        this._rootScope[ResetRootVar] = area == null;\r\n        this._rootScope[ResetAreaRootVar] = area;\r\n\r\n        this._timeout(() => {\r\n            this._rootScope[ResetRootVar] = false;\r\n            this._rootScope[ResetAreaRootVar] = null;\r\n        }, 0);\r\n    }\r\n}\r\n\r\n\r\nfunction hookResetEvents(\r\n    $rootScope: ng.IRootScopeService, \r\n    pipPageReset: IPageResetService\r\n) {\r\n    $rootScope.$on(ResetPageEvent, () => { pipPageReset.reset(); });\r\n    $rootScope.$on(ResetAreaEvent, (event, area) => { pipPageReset.resetArea(area); });\r\n}\r\n\r\n\r\nangular.module('pipPageReset', [])\r\n    .service('pipPageReset', PageResetService)\r\n    .run(hookResetEvents);\r\n","'use strict';\r\n\r\nexport interface IScrollService {\r\n    scrollTo(parentElement, childElement, animationDuration): void;\r\n}\r\n\r\nclass ScrollService implements IScrollService {\r\n\r\n    public scrollTo(parentElement, childElement, animationDuration): void {\r\n        if (!parentElement || !childElement) return;\r\n        if (animationDuration == undefined) animationDuration = 300;\r\n\r\n        setTimeout(function () {\r\n            if (!$(childElement).position()) return;\r\n            var modDiff= Math.abs($(parentElement).scrollTop() - $(childElement).position().top);\r\n            if (modDiff < 20) return;\r\n            var scrollTo = $(parentElement).scrollTop() + ($(childElement).position().top - 20);\r\n            if (animationDuration > 0)\r\n                $(parentElement).animate({\r\n                    scrollTop: scrollTo + 'px'\r\n                }, animationDuration);\r\n        }, 100);\r\n    }\r\n\r\n}\r\n\r\n\r\nangular\r\n    .module('pipScroll', [])\r\n    .service('pipScroll', ScrollService);\r\n","'use strict';\r\n\r\nexport interface ISystemInfo {\r\n    browserName: string;\r\n    browserVersion: string;\r\n    platform: string;\r\n    os: string;\r\n\r\n    isDesktop(): boolean;\r\n    isMobile(): boolean;\r\n    isCordova(): boolean;\r\n    isSupported(supported?: any): boolean;\r\n}\r\n\r\n\r\nclass SystemInfo implements ISystemInfo {\r\n    private _window: ng.IWindowService;\r\n\r\n    public constructor($window: ng.IWindowService) {\r\n        \"ngInject\";\r\n\r\n        this._window = $window;\r\n    }\r\n\r\n    // todo add support for iPhone\r\n    public get browserName(): string {\r\n        let ua = this._window.navigator.userAgent;\r\n\r\n        if (ua.search(/Edge/) > -1) return \"edge\";\r\n        if (ua.search(/MSIE/) > -1) return \"ie\";\r\n        if (ua.search(/Trident/) > -1) return \"ie\";\r\n        if (ua.search(/Firefox/) > -1) return \"firefox\";\r\n        if (ua.search(/Opera/) > -1) return \"opera\";\r\n        if (ua.search(/OPR/) > -1) return \"opera\";\r\n        if (ua.search(/YaBrowser/) > -1) return \"yabrowser\";\r\n        if (ua.search(/Chrome/) > -1) return \"chrome\";\r\n        if (ua.search(/Safari/) > -1) return \"safari\";\r\n        if (ua.search(/Maxthon/) > -1) return \"maxthon\";\r\n        \r\n        return \"unknown\";\r\n    }\r\n\r\n    public get browserVersion(): string {\r\n        let version;\r\n        let ua = this._window.navigator.userAgent;\r\n        let browser = this.browserName;\r\n\r\n        switch (browser) {\r\n            case \"edge\":\r\n                version = (ua.split(\"Edge\")[1]).split(\"/\")[1];\r\n                break;\r\n            case \"ie\":\r\n                version = (ua.split(\"MSIE \")[1]).split(\";\")[0];\r\n                break;\r\n            case \"ie11\":\r\n                browser = \"ie\";\r\n                version = (ua.split(\"; rv:\")[1]).split(\")\")[0];\r\n                break;\r\n            case \"firefox\":\r\n                version = ua.split(\"Firefox/\")[1];\r\n                break;\r\n            case \"opera\":\r\n                version = ua.split(\"Version/\")[1];\r\n                break;\r\n            case \"operaWebkit\":\r\n                version = ua.split(\"OPR/\")[1];\r\n                break;\r\n            case \"yabrowser\":\r\n                version = (ua.split(\"YaBrowser/\")[1]).split(\" \")[0];\r\n                break;\r\n            case \"chrome\":\r\n                version = (ua.split(\"Chrome/\")[1]).split(\" \")[0];\r\n                break;\r\n            case \"safari\":\r\n                version = (ua.split(\"Version/\")[1]).split(\" \")[0];\r\n                break;\r\n            case \"maxthon\":\r\n                version = ua.split(\"Maxthon/\")[1];\r\n                break;\r\n        }\r\n\r\n        return version;\r\n    }\r\n    \r\n    public get platform(): string {\r\n        let ua = this._window.navigator.userAgent;\r\n\r\n        if (/iphone|ipad|ipod|android|blackberry|mini|windows\\sce|palm/i.test(ua.toLowerCase())) \r\n            return 'mobile';\r\n\r\n        return 'desktop';\r\n    }\r\n\r\n    public get os(): string {\r\n        let ua = this._window.navigator.userAgent;\r\n\r\n        try {\r\n            let osAll = (/(windows|mac|android|linux|blackberry|sunos|solaris|iphone)/.exec(ua.toLowerCase()) || [ua])[0].replace('sunos', 'solaris');\r\n            let osAndroid = (/(android)/.exec(ua.toLowerCase()) || '');\r\n            return osAndroid && (osAndroid == 'android' || (osAndroid[0] == 'android')) ? 'android' : osAll;\r\n        } catch (err) {\r\n            return 'unknown'\r\n        }\r\n    }\r\n\r\n    public isDesktop(): boolean {\r\n        return this.platform == 'desktop';\r\n    }\r\n\r\n    public isMobile(): boolean {\r\n        return this.platform == 'mobile';\r\n    }\r\n\r\n    // Todo: complete implementation\r\n    public isCordova(): boolean {\r\n        return false;\r\n    }\r\n\r\n    // Todo: Move to errors\r\n    public isSupported(supported?: any): boolean {\r\n        if (!supported) \r\n            supported = {\r\n                edge: 11,\r\n                ie: 11,\r\n                firefox: 43, //4, for testing\r\n                opera: 35,\r\n                chrome: 47\r\n            };\r\n\r\n        let browser = this.browserName;\r\n        let version = this.browserVersion;\r\n        version = version.split(\".\")[0]\r\n\r\n        if (browser && supported[browser] && version >= supported[browser]) \r\n            return true;\r\n\r\n        return true;\r\n    }\r\n}\r\n\r\n\r\nangular\r\n    .module('pipSystemInfo', [])\r\n    .service('pipSystemInfo', SystemInfo);\r\n","'use strict';\r\n\r\nexport interface ITags {\r\n    normalizeOne(tag: string): string;\r\n    compressOne(tag: string): string;\r\n    equal(tag1: string, tag2: string): boolean;\r\n    normalizeAll(tags: any): string[];\r\n    compressAll(tags: any): string[];\r\n    extract(entity: any, searchFields?: string[]): string[];\r\n}\r\n\r\n\r\nclass Tags implements ITags {\r\n\r\n    public normalizeOne(tag: string): string {\r\n        return tag \r\n            ? _.trim(tag.replace(/(_|#)+/g, ' '))\r\n            : null;\r\n    }\r\n\r\n    public compressOne(tag: string): string {\r\n        return tag\r\n            ? tag.replace(/( |_|#)/g, '').toLowerCase()\r\n            : null;\r\n    }\r\n\r\n    public equal(tag1: string, tag2: string): boolean {\r\n        if (tag1 == null && tag2 == null)\r\n            return true;\r\n        if (tag1 == null || tag2 == null)\r\n            return false;\r\n        return this.compressOne(tag1) == this.compressOne(tag2);\r\n    }\r\n\r\n    public normalizeAll(tags: any): string[] {\r\n        if (_.isString(tags))\r\n            tags = tags.split(/( |,|;)+/);\r\n\r\n        tags = _.map(tags, (tag: string) => this.normalizeOne(tag));\r\n\r\n        return tags;\r\n    }\r\n\r\n    public compressAll(tags: any): string[] {\r\n        if (_.isString(tags))\r\n            tags = tags.split(/( |,|;)+/);\r\n\r\n        tags = _.map(tags, (tag: string) => this.compressOne(tag));\r\n\r\n        return tags;\r\n    }\r\n\r\n    public extract(entity: any, searchFields?: string[]): string[] {\r\n        let tags = this.normalizeAll(entity.tags);\r\n\r\n        _.each(searchFields, (field) => {\r\n            let text = entity[field] || '';\r\n\r\n            if (text != '') {\r\n                let hashTags = text.match(/#\\w+/g);\r\n                tags = tags.concat(this.normalizeAll(hashTags));\r\n            }\r\n        });\r\n\r\n        return _.uniq(tags);\r\n    }\r\n}\r\n\r\n\r\nangular\r\n    .module('pipTags', [])\r\n    .service('pipTags', Tags);\r\n","'use strict';\r\n\r\nexport interface ITimerService {\r\n    isStarted(): boolean;\r\n\r\n    addEvent(event: string, timeout: number): void;\r\n    removeEvent(event: string): void;\r\n    clearEvents(): void;\r\n\r\n    start(): void;\r\n    stop(): void;\r\n}\r\n\r\n\r\nclass TimerEvent {\r\n    public event: string;\r\n    public timeout: number;\r\n    public interval: any;\r\n\r\n    public constructor(event: string, timeout: number) {\r\n        this.event = event;\r\n        this.timeout = timeout;\r\n    }\r\n}\r\n\r\n\r\nlet DefaultEvents: TimerEvent[] = [\r\n    new TimerEvent('pipAutoPullChanges', 60000), // 1 min\r\n    new TimerEvent('pipAutoUpdatePage', 15000), // 15 sec\r\n    new TimerEvent('pipAutoUpdateCollection', 300000) // 5 min\r\n];\r\n\r\n\r\nclass TimerService implements ITimerService {\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _log: ng.ILogService;\r\n    private _interval: ng.IIntervalService;        \r\n    private _started = false;\r\n    private _events: TimerEvent[] = _.cloneDeep(DefaultEvents);\r\n\r\n    public constructor(\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService, \r\n        $interval: ng.IIntervalService\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._rootScope = $rootScope;\r\n        this._log = $log;\r\n        this._interval = $interval;\r\n    }\r\n\r\n    public isStarted(): boolean {\r\n        return this._started;\r\n    }\r\n\r\n    public addEvent(event: string, timeout: number): void {\r\n        var existingEvent = _.find(this._events, (e) => e.event == event);\r\n        if (existingEvent != null) return;\r\n\r\n        let newEvent = <TimerEvent> {\r\n            event: event,\r\n            timeout: timeout\r\n        };\r\n        this._events.push(newEvent);\r\n\r\n        if (this._started)\r\n            this.startEvent(newEvent);\r\n    }\r\n\r\n    public removeEvent(event: string): void {\r\n        for (let i = this._events.length - 1; i >= 0; i--) {\r\n            let existingEvent = this._events[i];\r\n            if (existingEvent.event == event) {\r\n                this.stopEvent(existingEvent);\r\n                this._events.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    public clearEvents(): void {\r\n        this.stop();\r\n        this._events = [];\r\n    }\r\n\r\n    private startEvent(event: TimerEvent): void {\r\n        event.interval = this._interval(\r\n            () => { \r\n                this._log.debug('Generated timer event ' + event.event); \r\n                this._rootScope.$emit(event.event)\r\n            },\r\n            event.timeout\r\n        )\r\n    }\r\n\r\n    private stopEvent(event: TimerEvent): void {\r\n        if (event.interval != null) {\r\n            try {\r\n                this._interval.cancel(event.interval);\r\n            } catch (ex) {\r\n                // Do nothing\r\n            }\r\n            event.interval = null;\r\n        }\r\n    }\r\n\r\n    public start(): void {\r\n        if (this._started) return;\r\n\r\n        _.each(this._events, (event) => {\r\n            this.startEvent(event);\r\n        });\r\n\r\n        this._started = true;\r\n    }\r\n\r\n    public stop(): void {\r\n        _.each(this._events, (event) => {\r\n            this.stopEvent(event);\r\n        });\r\n\r\n        this._started = false;\r\n    }\r\n}\r\n\r\n\r\nangular.module('pipTimer', [])\r\n    .service('pipTimer', TimerService);\r\n","'use strict';\r\n\r\nimport './Format';\r\nimport './TimerService';\r\nimport './ScrollService';\r\nimport './Tags';\r\nimport './Codes';\r\nimport './SystemInfo';\r\nimport './PageResetService';\r\n\r\nexport * from './Format';\r\nexport * from './TimerService';\r\nexport * from './ScrollService';\r\nexport * from './Tags';\r\nexport * from './Codes';\r\nexport * from './SystemInfo';\r\nexport * from './PageResetService';"]}